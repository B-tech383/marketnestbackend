<<<<<<< HEAD
{"file_contents":{"cart.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/cart.php';\n\nrequire_login();\n\n$cart_manager = new CartManager();\n$message = '';\n\n// Handle cart updates\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    if (isset($_POST['update_quantity'])) {\n        $product_id = $_POST['product_id'];\n        $quantity = max(0, $_POST['quantity']);\n        \n        $result = $cart_manager->update_cart_quantity($_SESSION['user_id'], $product_id, $quantity);\n        $message = $result['message'];\n    } elseif (isset($_POST['remove_item'])) {\n        $product_id = $_POST['product_id'];\n        \n        $result = $cart_manager->remove_from_cart($_SESSION['user_id'], $product_id);\n        $message = $result['message'];\n    }\n}\n\n$cart_items = $cart_manager->get_cart_items($_SESSION['user_id']);\n$cart_total = $cart_manager->get_cart_total($_SESSION['user_id']);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Shopping Cart - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Shopping Cart</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"products.php\" class=\"text-gray-700 hover:text-accent\">Continue Shopping</a>\n                    <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                    <a href=\"logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-8\">Shopping Cart</h1>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <?php if (empty($cart_items)): ?>\n            <div class=\"text-center py-12\">\n                <div class=\"text-gray-400 text-6xl mb-4\">üõí</div>\n                <h3 class=\"text-xl font-medium text-gray-900 mb-2\">Your cart is empty</h3>\n                <p class=\"text-gray-500 mb-6\">Add some products to get started!</p>\n                <a href=\"products.php\" class=\"bg-accent text-white px-6 py-3 rounded-md font-medium hover:bg-blue-600 transition duration-200\">\n                    Start Shopping\n                </a>\n            </div>\n        <?php else: ?>\n            <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                <!-- Cart Items -->\n                <div class=\"lg:col-span-2\">\n                    <div class=\"bg-white rounded-lg shadow-sm\">\n                        <div class=\"px-6 py-4 border-b border-gray-200\">\n                            <h2 class=\"text-lg font-semibold text-gray-900\">Cart Items (<?php echo count($cart_items); ?>)</h2>\n                        </div>\n                        \n                        <div class=\"divide-y divide-gray-200\">\n                            <?php foreach ($cart_items as $item): ?>\n                                <div class=\"p-6\">\n                                    <div class=\"flex items-start space-x-4\">\n                                        <div class=\"flex-shrink-0\">\n                                            <?php if (!empty($item['images'])): ?>\n                                                <img src=\"<?php echo $item['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($item['name']); ?>\" \n                                                     class=\"w-20 h-20 object-cover rounded-md\">\n                                            <?php else: ?>\n                                                <div class=\"w-20 h-20 bg-gray-200 rounded-md flex items-center justify-center\">\n                                                    <span class=\"text-gray-400 text-xs\">No Image</span>\n                                                </div>\n                                            <?php endif; ?>\n                                        </div>\n                                        \n                                        <div class=\"flex-1\">\n                                            <div class=\"flex justify-between\">\n                                                <div>\n                                                    <h3 class=\"text-lg font-medium text-gray-900\">\n                                                        <a href=\"product-detail.php?id=<?php echo $item['product_id']; ?>\" class=\"hover:text-accent\">\n                                                            <?php echo htmlspecialchars($item['name']); ?>\n                                                        </a>\n                                                    </h3>\n                                                    <p class=\"text-sm text-gray-600\">by <?php echo htmlspecialchars($item['business_name']); ?></p>\n                                                    <p class=\"text-lg font-semibold text-gray-900 mt-2\">$<?php echo number_format($item['current_price'], 2); ?></p>\n                                                </div>\n                                                \n                                                <div class=\"text-right\">\n                                                    <p class=\"text-lg font-bold text-gray-900\">$<?php echo number_format($item['total_price'], 2); ?></p>\n                                                </div>\n                                            </div>\n                                            \n                                            <div class=\"flex items-center justify-between mt-4\">\n                                                <form method=\"POST\" class=\"flex items-center space-x-2\">\n                                                    <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $item['product_id']; ?>\">\n                                                    <label for=\"quantity_<?php echo $item['product_id']; ?>\" class=\"text-sm text-gray-700\">Qty:</label>\n                                                    <select name=\"quantity\" id=\"quantity_<?php echo $item['product_id']; ?>\" \n                                                            class=\"border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-accent focus:border-accent\"\n                                                            onchange=\"this.form.submit()\">\n                                                        <?php for ($i = 1; $i <= min(10, $item['stock_quantity']); $i++): ?>\n                                                            <option value=\"<?php echo $i; ?>\" <?php echo $i == $item['quantity'] ? 'selected' : ''; ?>>\n                                                                <?php echo $i; ?>\n                                                            </option>\n                                                        <?php endfor; ?>\n                                                    </select>\n                                                    <input type=\"hidden\" name=\"update_quantity\" value=\"1\">\n                                                </form>\n                                                \n                                                <form method=\"POST\" class=\"inline\">\n                                                    <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $item['product_id']; ?>\">\n                                                    <button type=\"submit\" name=\"remove_item\" \n                                                            class=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                                                            onclick=\"return confirm('Remove this item from cart?')\">\n                                                        Remove\n                                                    </button>\n                                                </form>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            <?php endforeach; ?>\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Order Summary -->\n                <div class=\"lg:col-span-1\">\n                    <div class=\"bg-white rounded-lg shadow-sm p-6 sticky top-8\">\n                        <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Order Summary</h2>\n                        \n                        <div class=\"space-y-3 mb-6\">\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Subtotal</span>\n                                <span class=\"font-medium\">$<?php echo number_format($cart_total, 2); ?></span>\n                            </div>\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Shipping</span>\n                                <span class=\"font-medium\">Free</span>\n                            </div>\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Tax</span>\n                                <span class=\"font-medium\">$<?php echo number_format($cart_total * 0.08, 2); ?></span>\n                            </div>\n                            <div class=\"border-t pt-3\">\n                                <div class=\"flex justify-between\">\n                                    <span class=\"text-lg font-semibold\">Total</span>\n                                    <span class=\"text-lg font-bold text-accent\">$<?php echo number_format($cart_total * 1.08, 2); ?></span>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <a href=\"checkout.php\" class=\"w-full bg-accent text-white py-3 px-4 rounded-md font-medium hover:bg-blue-600 transition duration-200 block text-center\">\n                            Proceed to Checkout\n                        </a>\n                        \n                        <a href=\"products.php\" class=\"w-full mt-3 border border-gray-300 text-gray-700 py-3 px-4 rounded-md font-medium hover:bg-gray-50 transition duration-200 block text-center\">\n                            Continue Shopping\n                        </a>\n                    </div>\n                </div>\n            </div>\n        <?php endif; ?>\n    </div>\n</body>\n</html>\n","size_bytes":11569},"checkout.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/cart.php';\nrequire_once './includes/order.php';\n\nrequire_login();\n\n$cart_manager = new CartManager();\n$order_manager = new OrderManager();\n\n$cart_items = $cart_manager->get_cart_items($_SESSION['user_id']);\n$cart_total = $cart_manager->get_cart_total($_SESSION['user_id']);\n\nif (empty($cart_items)) {\n    redirect('cart.php');\n}\n\n$error = '';\n$success = '';\n$coupon_discount = 0;\n$coupon_message = '';\n\n// Handle coupon validation\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['apply_coupon'])) {\n    $coupon_code = sanitize_input($_POST['coupon_code']);\n    $result = $order_manager->validate_coupon($coupon_code, $cart_total);\n    \n    if ($result['success']) {\n        $coupon_discount = $result['discount'];\n        $coupon_message = \"Coupon applied! You saved $\" . number_format($coupon_discount, 2);\n        $_SESSION['checkout_coupon'] = $coupon_code;\n        $_SESSION['checkout_discount'] = $coupon_discount;\n    } else {\n        $coupon_message = $result['message'];\n    }\n}\n\n// Handle order placement\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['place_order'])) {\n    $shipping_address = sanitize_input($_POST['shipping_address']);\n    $billing_address = sanitize_input($_POST['billing_address']);\n    $payment_method = sanitize_input($_POST['payment_method']);\n    $coupon_code = $_SESSION['checkout_coupon'] ?? null;\n    \n    if (empty($shipping_address) || empty($billing_address) || empty($payment_method)) {\n        $error = 'Please fill in all required fields';\n    } else {\n        $result = $order_manager->create_order(\n            $_SESSION['user_id'], \n            $cart_items, \n            $shipping_address, \n            $billing_address, \n            $payment_method,\n            $coupon_code\n        );\n        \n        if ($result['success']) {\n            // Clear checkout session data\n            unset($_SESSION['checkout_coupon']);\n            unset($_SESSION['checkout_discount']);\n            \n            redirect('order-confirmation.php?order=' . $result['order_number']);\n        } else {\n            $error = $result['message'];\n        }\n    }\n}\n\n// Use session discount if available\nif (isset($_SESSION['checkout_discount'])) {\n    $coupon_discount = $_SESSION['checkout_discount'];\n}\n\n$tax_amount = ($cart_total - $coupon_discount) * 0.08;\n$final_total = $cart_total + $tax_amount - $coupon_discount;\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Checkout - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Checkout</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"cart.php\" class=\"text-gray-700 hover:text-accent\">Back to Cart</a>\n                    <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-8\">Checkout</h1>\n        \n        <?php if ($error): ?>\n            <div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\">\n                <?php echo $error; ?>\n            </div>\n        <?php endif; ?>\n        \n        <?php if ($coupon_message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $coupon_message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <form method=\"POST\" class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <!-- Checkout Form -->\n            <div class=\"lg:col-span-2 space-y-8\">\n                <!-- Shipping Address -->\n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Shipping Address</h2>\n                    <textarea name=\"shipping_address\" rows=\"4\" required \n                              placeholder=\"Enter your full shipping address...\"\n                              class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\"></textarea>\n                </div>\n                \n                <!-- Billing Address -->\n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Billing Address</h2>\n                    <div class=\"mb-4\">\n                        <label class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"same_as_shipping\" class=\"mr-2\" onchange=\"toggleBillingAddress()\">\n                            <span class=\"text-sm text-gray-700\">Same as shipping address</span>\n                        </label>\n                    </div>\n                    <textarea name=\"billing_address\" id=\"billing_address\" rows=\"4\" required \n                              placeholder=\"Enter your billing address...\"\n                              class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\"></textarea>\n                </div>\n                \n                <!-- Payment Method -->\n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Payment Method</h2>\n                    <div class=\"space-y-3\">\n                        <label class=\"flex items-center p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer\">\n                            <input type=\"radio\" name=\"payment_method\" value=\"credit_card\" required class=\"mr-3\">\n                            <div class=\"flex items-center\">\n                                <span class=\"text-2xl mr-2\">üí≥</span>\n                                <span class=\"font-medium\">Credit Card</span>\n                            </div>\n                        </label>\n                        \n                        <label class=\"flex items-center p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer\">\n                            <input type=\"radio\" name=\"payment_method\" value=\"paypal\" required class=\"mr-3\">\n                            <div class=\"flex items-center\">\n                                <span class=\"text-2xl mr-2\">üÖøÔ∏è</span>\n                                <span class=\"font-medium\">PayPal</span>\n                            </div>\n                        </label>\n                        \n                        <label class=\"flex items-center p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer\">\n                            <input type=\"radio\" name=\"payment_method\" value=\"apple_pay\" required class=\"mr-3\">\n                            <div class=\"flex items-center\">\n                                <span class=\"text-2xl mr-2\">üçé</span>\n                                <span class=\"font-medium\">Apple Pay</span>\n                            </div>\n                        </label>\n                        \n                        <label class=\"flex items-center p-3 border border-green-200 rounded-md hover:bg-green-50 cursor-pointer bg-green-25\">\n                            <input type=\"radio\" name=\"payment_method\" value=\"mobile_money_cameroon\" required class=\"mr-3\">\n                            <div class=\"flex items-center\">\n                                <span class=\"text-2xl mr-2\">üì±</span>\n                                <div>\n                                    <span class=\"font-medium text-green-700\">Mobile Money (Cameroon)</span>\n                                    <p class=\"text-sm text-green-600\">Send payment to: 679871130</p>\n                                </div>\n                            </div>\n                        </label>\n                    </div>\n                    \n                    <div class=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\">\n                        <p class=\"text-sm text-blue-800\">\n                            <strong>Mobile Money Instructions:</strong> For Mobile Money payments, send the total amount to <strong>679871130</strong> and include your order number in the transaction message.\n                        </p>\n                    </div>\n                </div>\n            </div>\n            \n            <!-- Order Summary -->\n            <div class=\"lg:col-span-1\">\n                <div class=\"bg-white rounded-lg shadow-sm p-6 sticky top-8\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Order Summary</h2>\n                    \n                    <!-- Order Items -->\n                    <div class=\"space-y-3 mb-6 max-h-60 overflow-y-auto\">\n                        <?php foreach ($cart_items as $item): ?>\n                            <div class=\"flex items-center space-x-3\">\n                                <?php if (!empty($item['images'])): ?>\n                                    <img src=\"<?php echo $item['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($item['name']); ?>\" \n                                         class=\"w-12 h-12 object-cover rounded\">\n                                <?php else: ?>\n                                    <div class=\"w-12 h-12 bg-gray-200 rounded flex items-center justify-center\">\n                                        <span class=\"text-gray-400 text-xs\">No Image</span>\n                                    </div>\n                                <?php endif; ?>\n                                <div class=\"flex-1\">\n                                    <p class=\"text-sm font-medium text-gray-900 line-clamp-1\"><?php echo htmlspecialchars($item['name']); ?></p>\n                                    <p class=\"text-xs text-gray-500\">Qty: <?php echo $item['quantity']; ?></p>\n                                </div>\n                                <p class=\"text-sm font-medium\">$<?php echo number_format($item['total_price'], 2); ?></p>\n                            </div>\n                        <?php endforeach; ?>\n                    </div>\n                    \n                    <!-- Coupon Code -->\n                    <div class=\"mb-6 pb-6 border-b border-gray-200\">\n                        <div class=\"flex space-x-2\">\n                            <input type=\"text\" name=\"coupon_code\" placeholder=\"Coupon code\" \n                                   value=\"<?php echo $_SESSION['checkout_coupon'] ?? ''; ?>\"\n                                   class=\"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-accent focus:border-accent\">\n                            <button type=\"submit\" name=\"apply_coupon\" \n                                    class=\"px-4 py-2 bg-gray-500 text-white rounded-md text-sm hover:bg-gray-600 transition duration-200\">\n                                Apply\n                            </button>\n                        </div>\n                    </div>\n                    \n                    <!-- Totals -->\n                    <div class=\"space-y-3 mb-6\">\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Subtotal</span>\n                            <span class=\"font-medium\">$<?php echo number_format($cart_total, 2); ?></span>\n                        </div>\n                        \n                        <?php if ($coupon_discount > 0): ?>\n                            <div class=\"flex justify-between text-green-600\">\n                                <span>Discount</span>\n                                <span>-$<?php echo number_format($coupon_discount, 2); ?></span>\n                            </div>\n                        <?php endif; ?>\n                        \n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Shipping</span>\n                            <span class=\"font-medium text-green-600\">Free</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Tax</span>\n                            <span class=\"font-medium\">$<?php echo number_format($tax_amount, 2); ?></span>\n                        </div>\n                        <div class=\"border-t pt-3\">\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-lg font-semibold\">Total</span>\n                                <span class=\"text-lg font-bold text-accent\">$<?php echo number_format($final_total, 2); ?></span>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <button type=\"submit\" name=\"place_order\" \n                            class=\"w-full bg-accent text-white py-3 px-4 rounded-md font-medium hover:bg-blue-600 transition duration-200\">\n                        Place Order\n                    </button>\n                    \n                    <div class=\"mt-4 text-center\">\n                        <p class=\"text-xs text-gray-500\">\n                            By placing your order, you agree to our Terms of Service and Privacy Policy.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    \n    <script>\n        function toggleBillingAddress() {\n            const checkbox = document.getElementById('same_as_shipping');\n            const billingAddress = document.getElementById('billing_address');\n            const shippingAddress = document.querySelector('textarea[name=\"shipping_address\"]');\n            \n            if (checkbox.checked) {\n                billingAddress.value = shippingAddress.value;\n                billingAddress.disabled = true;\n                billingAddress.classList.add('bg-gray-100');\n            } else {\n                billingAddress.disabled = false;\n                billingAddress.classList.remove('bg-gray-100');\n            }\n        }\n        \n        // Auto-copy shipping to billing when shipping changes\n        document.querySelector('textarea[name=\"shipping_address\"]').addEventListener('input', function() {\n            const checkbox = document.getElementById('same_as_shipping');\n            if (checkbox.checked) {\n                document.getElementById('billing_address').value = this.value;\n            }\n        });\n    </script>\n</body>\n</html>\n","size_bytes":15427},"index.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/product.php';\n\n$productManager = new ProductManager();\n\n// Get featured products and categories\n$featuredProducts = $productManager->getFeaturedProducts(12);\n$categories = $productManager->getCategories();\n$flashDeals = $productManager->getFlashDeals(6);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title><?php echo SITE_NAME; ?> - Your Premier Marketplace Destination</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    },\n                    fontFamily: {\n                        'sans': ['Inter', 'system-ui', 'sans-serif'],\n                    }\n                }\n            }\n        }\n    </script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n    <style>\n        @keyframes float {\n            0%, 100% { transform: translateY(0px) rotate(0deg); }\n            33% { transform: translateY(-20px) rotate(120deg); }\n            66% { transform: translateY(10px) rotate(240deg); }\n        }\n        @keyframes float-reverse {\n            0%, 100% { transform: translateY(0px) rotate(0deg); }\n            33% { transform: translateY(15px) rotate(-90deg); }\n            66% { transform: translateY(-25px) rotate(-180deg); }\n        }\n        @keyframes spin-slow {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n        }\n        .animate-float { animation: float 6s ease-in-out infinite; }\n        .animate-float-reverse { animation: float-reverse 8s ease-in-out infinite; }\n        .animate-spin-slow { animation: spin-slow 20s linear infinite; }\n        .floating-element {\n            backdrop-filter: blur(10px);\n            box-shadow: 0 8px 32px 0 rgba(255, 255, 255, 0.1);\n        }\n        .card-3d {\n            transform-style: preserve-3d;\n            transition: transform 0.3s ease;\n            perspective: 1000px;\n        }\n        .card-3d:hover {\n            transform: perspective(1000px) rotateY(5deg) rotateX(3deg) translateZ(10px);\n        }\n        @media (prefers-reduced-motion: reduce) {\n            .animate-float, .animate-float-reverse, .animate-spin-slow, .card-3d {\n                animation: none;\n                transform: none !important;\n            }\n        }\n    </style>\n</head>\n<body class=\"bg-gray-50 font-sans\">\n    <!-- Professional Header -->\n    <header class=\"bg-white shadow-sm sticky top-0 z-50 border-b\">\n        <!-- Top Bar -->\n        <div class=\"bg-primary text-white text-sm\">\n            <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2\">\n                <div class=\"flex justify-between items-center\">\n                    <div class=\"flex items-center space-x-6\">\n                        <span>üìç Free shipping on orders over $50</span>\n                        <span>üìû Customer Service: 1-800-MARKET-NEST</span>\n                    </div>\n                    <div class=\"flex items-center space-x-4\">\n                        <?php if (!is_logged_in()): ?>\n                            <a href=\"login.php\" class=\"hover:text-gray-300\">Sign In</a>\n                            <span class=\"text-gray-400\">|</span>\n                            <a href=\"register.php\" class=\"hover:text-gray-300\">Create Account</a>\n                        <?php else: ?>\n                            <span>Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                            <a href=\"logout.php\" class=\"hover:text-gray-300\">Sign Out</a>\n                        <?php endif; ?>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Main Header -->\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex items-center justify-between h-16\">\n                <!-- Logo -->\n                <div class=\"flex items-center\">\n                    <a href=\"index.php\" class=\"flex items-center\">\n                        <div class=\"w-10 h-10 bg-accent rounded-lg flex items-center justify-center mr-3\">\n                            <span class=\"text-white font-bold text-lg\">MN</span>\n                        </div>\n                        <span class=\"text-2xl font-bold text-primary\"><?php echo SITE_NAME; ?></span>\n                    </a>\n                </div>\n                \n                <!-- Search Bar -->\n                <div class=\"flex-1 max-w-2xl mx-8\">\n                    <form action=\"products.php\" method=\"GET\" class=\"relative\">\n                        <div class=\"flex\">\n                            <input type=\"text\" name=\"search\" placeholder=\"Search products, brands, and more...\" \n                                   class=\"flex-1 px-4 py-3 border-2 border-gray-200 rounded-l-lg focus:outline-none focus:border-accent text-gray-700\">\n                            <button type=\"submit\" class=\"bg-accent hover:bg-blue-600 text-white px-6 py-3 rounded-r-lg transition-colors\">\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\n                                </svg>\n                            </button>\n                        </div>\n                    </form>\n                </div>\n                \n                <!-- User Actions -->\n                <div class=\"flex items-center space-x-6\">\n                    <?php if (is_logged_in()): ?>\n                        <?php if (get_user_role() === 'customer'): ?>\n                            <a href=\"cart.php\" class=\"flex items-center text-gray-700 hover:text-accent relative\">\n                                <svg class=\"w-6 h-6 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v5a2 2 0 01-2 2H9a2 2 0 01-2-2v-5m6-5V6a2 2 0 00-2-2H9a2 2 0 00-2 2v3\"></path>\n                                </svg>\n                                <span class=\"font-medium\">Cart</span>\n                                <span id=\"cart-count\" class=\"absolute -top-2 -right-2 bg-warning text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">0</span>\n                            </a>\n                        <?php endif; ?>\n                        \n                        <div class=\"relative group\">\n                            <button class=\"flex items-center text-gray-700 hover:text-accent\">\n                                <svg class=\"w-6 h-6 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                                </svg>\n                                <span class=\"font-medium\">Account</span>\n                            </button>\n                            <div class=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200\">\n                                <div class=\"py-2\">\n                                    <?php if (get_user_role() === 'customer'): ?>\n                                        <a href=\"user/dashboard.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Dashboard</a>\n                                    <?php elseif (get_user_role() === 'vendor'): ?>\n                                        <a href=\"vendor/dashboard.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Vendor Panel</a>\n                                    <?php elseif (get_user_role() === 'admin'): ?>\n                                        <a href=\"admin/dashboard.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Admin Panel</a>\n                                    <?php endif; ?>\n                                    <a href=\"order-history.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Orders</a>\n                                    <a href=\"track.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Track Package</a>\n                                    <hr class=\"my-1\">\n                                    <a href=\"logout.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Sign Out</a>\n                                </div>\n                            </div>\n                        </div>\n                    <?php else: ?>\n                        <a href=\"track.php\" class=\"flex items-center text-gray-700 hover:text-accent\">\n                            <svg class=\"w-6 h-6 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n                            </svg>\n                            <span class=\"font-medium\">Track</span>\n                        </a>\n                        <a href=\"login.php\" class=\"bg-accent text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium\">Sign In</a>\n                    <?php endif; ?>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Category Navigation -->\n        <div class=\"border-t bg-gray-50\">\n            <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                <nav class=\"flex items-center space-x-8 py-3 overflow-x-auto\">\n                    <a href=\"products.php\" class=\"whitespace-nowrap text-gray-700 hover:text-accent font-medium\">All Products</a>\n                    <?php foreach (array_slice($categories, 0, 8) as $category): ?>\n                        <a href=\"products.php?category=<?php echo urlencode($category['name']); ?>\" \n                           class=\"whitespace-nowrap text-gray-700 hover:text-accent flex items-center\">\n                            <span class=\"mr-2\"><?php echo $category['icon'] ?? 'üì¶'; ?></span>\n                            <?php echo htmlspecialchars($category['name']); ?>\n                        </a>\n                    <?php endforeach; ?>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <!-- Hero Section with 3D Animation Background -->\n    <section class=\"relative bg-gradient-to-r from-accent to-blue-600 text-white overflow-hidden\">\n        <!-- 3D Floating Elements Animation -->\n        <div class=\"absolute inset-0 overflow-hidden pointer-events-none\">\n            <div class=\"floating-element absolute top-10 left-10 w-16 h-16 bg-white bg-opacity-10 rounded-lg animate-float\"></div>\n            <div class=\"floating-element absolute top-20 right-20 w-12 h-12 bg-white bg-opacity-10 rounded-full animate-pulse\"></div>\n            <div class=\"floating-element absolute bottom-20 left-20 w-20 h-20 bg-white bg-opacity-10 rounded-lg animate-spin-slow\"></div>\n            <div class=\"floating-element absolute bottom-10 right-10 w-14 h-14 bg-white bg-opacity-10 rounded-full animate-float-reverse\"></div>\n            <div class=\"floating-element absolute top-1/2 left-1/4 w-8 h-8 bg-white bg-opacity-10 rounded-lg animate-bounce\" style=\"animation-delay: 1s;\"></div>\n            <div class=\"floating-element absolute top-1/3 right-1/3 w-10 h-10 bg-white bg-opacity-10 rounded-full animate-float\" style=\"animation-delay: 2s;\"></div>\n        </div>\n        \n        <!-- Gradient Overlay for depth -->\n        <div class=\"absolute inset-0 bg-gradient-to-br from-transparent via-blue-500 to-accent opacity-30\"></div>\n        \n        <div class=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\n            <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center\">\n                <div>\n                    <h1 class=\"text-5xl lg:text-6xl font-bold leading-tight mb-6\">\n                        Discover Everything You Need at \n                        <span class=\"text-yellow-300\"><?php echo SITE_NAME; ?></span>\n                    </h1>\n                    <p class=\"text-xl text-blue-100 mb-8 leading-relaxed\">\n                        From daily essentials to unique finds - explore millions of products with fast delivery, secure payment, and advanced tracking.\n                    </p>\n                    <div class=\"flex flex-col sm:flex-row gap-4\">\n                        <a href=\"products.php\" class=\"bg-white text-accent px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-100 transition-colors shadow-lg\">\n                            Start Shopping\n                        </a>\n                        <a href=\"#categories\" class=\"border-2 border-white text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-white hover:text-accent transition-colors\">\n                            Browse Categories\n                        </a>\n                    </div>\n                </div>\n                <div class=\"relative\">\n                    <div class=\"bg-white/10 rounded-2xl p-8 backdrop-blur-sm\">\n                        <div class=\"grid grid-cols-2 gap-4\">\n                            <div class=\"bg-white/20 rounded-lg p-4 text-center\">\n                                <div class=\"text-3xl mb-2\">üöö</div>\n                                <div class=\"font-semibold\">Fast Delivery</div>\n                            </div>\n                            <div class=\"bg-white/20 rounded-lg p-4 text-center\">\n                                <div class=\"text-3xl mb-2\">üîí</div>\n                                <div class=\"font-semibold\">Secure Payment</div>\n                            </div>\n                            <div class=\"bg-white/20 rounded-lg p-4 text-center\">\n                                <div class=\"text-3xl mb-2\">üì±</div>\n                                <div class=\"font-semibold\">Easy Tracking</div>\n                            </div>\n                            <div class=\"bg-white/20 rounded-lg p-4 text-center\">\n                                <div class=\"text-3xl mb-2\">üíØ</div>\n                                <div class=\"font-semibold\">Quality Guarantee</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n\n    <!-- Flash Deals Section -->\n    <?php if (!empty($flashDeals)): ?>\n    <section class=\"py-12 bg-white\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex items-center justify-between mb-8\">\n                <div>\n                    <h2 class=\"text-3xl font-bold text-gray-900 mb-2\">‚ö° Flash Deals</h2>\n                    <p class=\"text-gray-600\">Limited time offers - grab them while you can!</p>\n                </div>\n                <a href=\"products.php?deals=1\" class=\"text-accent hover:text-blue-600 font-semibold\">View All Deals ‚Üí</a>\n            </div>\n            <div class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n                <?php foreach ($flashDeals as $product): ?>\n                    <div class=\"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border group card-3d\">\n                        <div class=\"relative\">\n                            <img src=\"<?php echo htmlspecialchars($product['image_url'] ?: 'https://via.placeholder.com/200x200?text=Product'); ?>\" \n                                 alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                                 class=\"w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300\">\n                            <div class=\"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-md text-xs font-bold\">\n                                <?php echo $product['discount_percentage']; ?>% OFF\n                            </div>\n                        </div>\n                        <div class=\"p-3\">\n                            <h3 class=\"font-medium text-gray-900 text-sm mb-2 line-clamp-2\"><?php echo htmlspecialchars($product['name']); ?></h3>\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <span class=\"text-lg font-bold text-gray-900\">$<?php echo number_format($product['sale_price'], 2); ?></span>\n                                    <span class=\"text-sm text-gray-500 line-through ml-1\">$<?php echo number_format($product['price'], 2); ?></span>\n                                </div>\n                                <a href=\"product-detail.php?id=<?php echo $product['id']; ?>\" \n                                   class=\"bg-accent text-white px-2 py-1 rounded text-xs hover:bg-blue-600 transition-colors\">\n                                    View\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                <?php endforeach; ?>\n            </div>\n        </div>\n    </section>\n    <?php endif; ?>\n\n    <!-- Categories Section -->\n    <section id=\"categories\" class=\"py-12 bg-gray-50\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"text-center mb-12\">\n                <h2 class=\"text-3xl font-bold text-gray-900 mb-4\">Shop by Category</h2>\n                <p class=\"text-gray-600 max-w-2xl mx-auto\">Find exactly what you're looking for in our carefully curated categories</p>\n            </div>\n            <div class=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6\">\n                <?php foreach ($categories as $category): ?>\n                    <a href=\"products.php?category=<?php echo urlencode($category['name']); ?>\" \n                       class=\"group bg-white rounded-xl p-6 text-center hover:shadow-lg transition-all duration-300 border hover:border-accent card-3d\">\n                        <div class=\"w-16 h-16 bg-gradient-to-br from-accent/10 to-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:from-accent/20 group-hover:to-blue-200 transition-colors\">\n                            <span class=\"text-2xl\"><?php echo $category['icon'] ?? 'üì¶'; ?></span>\n                        </div>\n                        <h3 class=\"font-semibold text-gray-900 mb-1\"><?php echo htmlspecialchars($category['name']); ?></h3>\n                        <p class=\"text-sm text-gray-500\"><?php echo $category['product_count']; ?> items</p>\n                    </a>\n                <?php endforeach; ?>\n            </div>\n        </div>\n    </section>\n\n    <!-- Featured Products -->\n    <section class=\"py-12 bg-white\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex items-center justify-between mb-8\">\n                <div>\n                    <h2 class=\"text-3xl font-bold text-gray-900 mb-2\">Featured Products</h2>\n                    <p class=\"text-gray-600\">Handpicked items just for you</p>\n                </div>\n                <a href=\"products.php\" class=\"text-accent hover:text-blue-600 font-semibold\">View All Products ‚Üí</a>\n            </div>\n            <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-6\">\n                <?php foreach ($featuredProducts as $product): ?>\n                    <div class=\"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border group card-3d\">\n                        <div class=\"relative\">\n                            <img src=\"<?php echo htmlspecialchars($product['image_url'] ?: 'https://via.placeholder.com/200x200?text=Product'); ?>\" \n                                 alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                                 class=\"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300\">\n                        </div>\n                        <div class=\"p-4\">\n                            <h3 class=\"font-medium text-gray-900 mb-2 line-clamp-2\"><?php echo htmlspecialchars($product['name']); ?></h3>\n                            <p class=\"text-gray-500 text-sm mb-3 line-clamp-2\"><?php echo htmlspecialchars(substr($product['description'], 0, 80)); ?>...</p>\n                            <div class=\"flex items-center justify-between\">\n                                <span class=\"text-xl font-bold text-gray-900\">$<?php echo number_format($product['price'], 2); ?></span>\n                                <a href=\"product-detail.php?id=<?php echo $product['id']; ?>\" \n                                   class=\"bg-accent text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-600 transition-colors\">\n                                    View\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                <?php endforeach; ?>\n            </div>\n        </div>\n    </section>\n\n    <!-- Features Section -->\n    <section class=\"py-16 bg-primary text-white\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"text-center mb-12\">\n                <h2 class=\"text-3xl font-bold mb-4\">Why Choose Market Nest?</h2>\n                <p class=\"text-lg text-gray-300\">Experience the difference with our premium marketplace</p>\n            </div>\n            <div class=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n                <div class=\"text-center group card-3d\">\n                    <div class=\"w-20 h-20 bg-accent rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300\">\n                        <svg class=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <h3 class=\"text-xl font-bold mb-3\">Verified Quality</h3>\n                    <p class=\"text-gray-300 leading-relaxed\">Every product is carefully vetted by our quality assurance team to ensure you receive only the best.</p>\n                </div>\n                \n                <div class=\"text-center group card-3d\">\n                    <div class=\"w-20 h-20 bg-success rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300\">\n                        <svg class=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\"></path>\n                        </svg>\n                    </div>\n                    <h3 class=\"text-xl font-bold mb-3\">Lightning Fast Delivery</h3>\n                    <p class=\"text-gray-300 leading-relaxed\">Get your orders delivered in record time with our optimized logistics network and real-time tracking.</p>\n                </div>\n                \n                <div class=\"text-center group card-3d\">\n                    <div class=\"w-20 h-20 bg-warning rounded-2xl flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300\">\n                        <svg class=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"></path>\n                        </svg>\n                    </div>\n                    <h3 class=\"text-xl font-bold mb-3\">Secure & Protected</h3>\n                    <p class=\"text-gray-300 leading-relaxed\">Shop with confidence knowing your data and transactions are protected by bank-grade security.</p>\n                </div>\n            </div>\n        </div>\n    </section>\n\n    <!-- Footer -->\n    <footer class=\"bg-gray-900 text-white\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n            <div class=\"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8\">\n                <div>\n                    <div class=\"flex items-center mb-4\">\n                        <div class=\"w-8 h-8 bg-accent rounded-lg flex items-center justify-center mr-2\">\n                            <span class=\"text-white font-bold\">MN</span>\n                        </div>\n                        <span class=\"text-xl font-bold\"><?php echo SITE_NAME; ?></span>\n                    </div>\n                    <p class=\"text-gray-400 mb-4 leading-relaxed\">Your trusted marketplace for quality products, fast delivery, and exceptional service.</p>\n                    <div class=\"flex space-x-4\">\n                        <a href=\"#\" class=\"text-gray-400 hover:text-accent transition-colors\">\n                            <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z\"/>\n                            </svg>\n                        </a>\n                        <a href=\"#\" class=\"text-gray-400 hover:text-accent transition-colors\">\n                            <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z\"/>\n                            </svg>\n                        </a>\n                        <a href=\"#\" class=\"text-gray-400 hover:text-accent transition-colors\">\n                            <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.754-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001 12.017.001z\"/>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n                \n                <div>\n                    <h4 class=\"font-semibold mb-4 text-lg\">Shop</h4>\n                    <ul class=\"space-y-3 text-gray-400\">\n                        <li><a href=\"products.php\" class=\"hover:text-accent transition-colors\">All Products</a></li>\n                        <li><a href=\"products.php?deals=1\" class=\"hover:text-accent transition-colors\">Flash Deals</a></li>\n                        <li><a href=\"products.php?featured=1\" class=\"hover:text-accent transition-colors\">Featured Items</a></li>\n                        <li><a href=\"vendor-application.php\" class=\"hover:text-accent transition-colors\">Become a Seller</a></li>\n                    </ul>\n                </div>\n                \n                <div>\n                    <h4 class=\"font-semibold mb-4 text-lg\">Customer Service</h4>\n                    <ul class=\"space-y-3 text-gray-400\">\n                        <li><a href=\"track.php\" class=\"hover:text-accent transition-colors\">Track Your Order</a></li>\n                        <li><a href=\"#\" class=\"hover:text-accent transition-colors\">Help Center</a></li>\n                        <li><a href=\"#\" class=\"hover:text-accent transition-colors\">Returns & Refunds</a></li>\n                        <li><a href=\"#\" class=\"hover:text-accent transition-colors\">Contact Support</a></li>\n                    </ul>\n                </div>\n                \n                <div>\n                    <h4 class=\"font-semibold mb-4 text-lg\">Account</h4>\n                    <ul class=\"space-y-3 text-gray-400\">\n                        <?php if (is_logged_in()): ?>\n                            <li><a href=\"user/dashboard.php\" class=\"hover:text-accent transition-colors\">My Account</a></li>\n                            <li><a href=\"order-history.php\" class=\"hover:text-accent transition-colors\">Order History</a></li>\n                        <?php else: ?>\n                            <li><a href=\"login.php\" class=\"hover:text-accent transition-colors\">Sign In</a></li>\n                            <li><a href=\"register.php\" class=\"hover:text-accent transition-colors\">Create Account</a></li>\n                        <?php endif; ?>\n                        <li><a href=\"#\" class=\"hover:text-accent transition-colors\">Privacy Policy</a></li>\n                        <li><a href=\"#\" class=\"hover:text-accent transition-colors\">Terms of Service</a></li>\n                    </ul>\n                </div>\n            </div>\n            \n            <div class=\"border-t border-gray-800 pt-8\">\n                <div class=\"flex flex-col md:flex-row justify-between items-center\">\n                    <p class=\"text-gray-400 mb-4 md:mb-0\">&copy; 2024 <?php echo SITE_NAME; ?>. All rights reserved.</p>\n                    <div class=\"flex items-center space-x-6 text-sm text-gray-400\">\n                        <span>üîí Secure Shopping</span>\n                        <span>üöö Fast Delivery</span>\n                        <span>üí≥ Multiple Payment Options</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </footer>\n\n    <!-- Scripts -->\n    <script>\n        // Update cart count on page load\n        if (document.getElementById('cart-count')) {\n            fetch('api/cart-count.php')\n                .then(response => response.json())\n                .then(data => {\n                    document.getElementById('cart-count').textContent = data.count || 0;\n                })\n                .catch(error => console.error('Error fetching cart count:', error));\n        }\n    </script>\n</body>\n</html>","size_bytes":31668},"login.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/auth.php';\n\n$auth = new Auth();\n$error = '';\n$success = '';\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $username = sanitize_input($_POST['username']);\n    $password = $_POST['password'];\n    \n    $result = $auth->login($username, $password);\n    \n    if ($result['success']) {\n        $success = $result['message'];\n        // Redirect based on role\n        $role = get_user_role();\n        if ($role === 'admin') {\n            redirect('admin/dashboard.php');\n        } elseif ($role === 'vendor') {\n            redirect('vendor/dashboard.php');\n        } else {\n            redirect('index.php');\n        }\n    } else {\n        $error = $result['message'];\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Sign In - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    },\n                    fontFamily: {\n                        'sans': ['Inter', 'system-ui', 'sans-serif'],\n                    }\n                }\n            }\n        }\n    </script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n</head>\n<body class=\"bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen font-sans\">\n    <div class=\"min-h-screen flex\">\n        <!-- Left Side - Branding -->\n        <div class=\"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary via-secondary to-accent relative overflow-hidden\">\n            <div class=\"absolute inset-0 bg-black/20\"></div>\n            <div class=\"relative z-10 flex items-center justify-center w-full p-12\">\n                <div class=\"text-center text-white\">\n                    <div class=\"flex items-center justify-center mb-8\">\n                        <div class=\"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mr-4\">\n                            <span class=\"text-white font-bold text-2xl\">MN</span>\n                        </div>\n                        <span class=\"text-4xl font-bold\"><?php echo SITE_NAME; ?></span>\n                    </div>\n                    <h2 class=\"text-3xl font-bold mb-6\">Welcome Back!</h2>\n                    <p class=\"text-xl text-blue-100 leading-relaxed max-w-md\">\n                        Sign in to access your account and continue your amazing shopping experience.\n                    </p>\n                    <div class=\"mt-12 grid grid-cols-3 gap-6\">\n                        <div class=\"text-center\">\n                            <div class=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"></path>\n                                </svg>\n                            </div>\n                            <p class=\"text-sm\">Secure</p>\n                        </div>\n                        <div class=\"text-center\">\n                            <div class=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\"></path>\n                                </svg>\n                            </div>\n                            <p class=\"text-sm\">Fast</p>\n                        </div>\n                        <div class=\"text-center\">\n                            <div class=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n                                </svg>\n                            </div>\n                            <p class=\"text-sm\">Trusted</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Right Side - Login Form -->\n        <div class=\"flex-1 flex items-center justify-center p-8 lg:p-12\">\n            <div class=\"w-full max-w-md space-y-8\">\n                <!-- Mobile Logo -->\n                <div class=\"lg:hidden text-center\">\n                    <div class=\"flex items-center justify-center mb-6\">\n                        <div class=\"w-12 h-12 bg-accent rounded-xl flex items-center justify-center mr-3\">\n                            <span class=\"text-white font-bold text-lg\">MN</span>\n                        </div>\n                        <span class=\"text-2xl font-bold text-primary\"><?php echo SITE_NAME; ?></span>\n                    </div>\n                </div>\n\n                <div>\n                    <h2 class=\"text-3xl font-bold text-gray-900 mb-2\">Sign in</h2>\n                    <p class=\"text-gray-600\">Enter your credentials to access your account</p>\n                </div>\n                \n                <?php if ($error): ?>\n                    <div class=\"bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg\">\n                        <div class=\"flex\">\n                            <div class=\"flex-shrink-0\">\n                                <svg class=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                    <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\" />\n                                </svg>\n                            </div>\n                            <div class=\"ml-3\">\n                                <p class=\"text-sm text-red-700\"><?php echo $error; ?></p>\n                            </div>\n                        </div>\n                    </div>\n                <?php endif; ?>\n                \n                <?php if ($success): ?>\n                    <div class=\"bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg\">\n                        <div class=\"flex\">\n                            <div class=\"flex-shrink-0\">\n                                <svg class=\"h-5 w-5 text-green-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                    <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\" />\n                                </svg>\n                            </div>\n                            <div class=\"ml-3\">\n                                <p class=\"text-sm text-green-700\"><?php echo $success; ?></p>\n                            </div>\n                        </div>\n                    </div>\n                <?php endif; ?>\n                \n                <form class=\"space-y-6\" method=\"POST\">\n                    <div>\n                        <label for=\"username\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Username or Email\n                        </label>\n                        <div class=\"relative\">\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                                </svg>\n                            </div>\n                            <input id=\"username\" name=\"username\" type=\"text\" required \n                                   class=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                   placeholder=\"Enter your username or email\">\n                        </div>\n                    </div>\n                    \n                    <div>\n                        <label for=\"password\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Password\n                        </label>\n                        <div class=\"relative\">\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"></path>\n                                </svg>\n                            </div>\n                            <input id=\"password\" name=\"password\" type=\"password\" required \n                                   class=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                   placeholder=\"Enter your password\">\n                        </div>\n                    </div>\n                    \n                    <div class=\"flex items-center justify-between\">\n                        <div class=\"flex items-center\">\n                            <input id=\"remember-me\" name=\"remember-me\" type=\"checkbox\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded\">\n                            <label for=\"remember-me\" class=\"ml-2 block text-sm text-gray-700\">\n                                Remember me\n                            </label>\n                        </div>\n                        <a href=\"#\" class=\"text-sm text-accent hover:text-blue-600 font-medium\">\n                            Forgot password?\n                        </a>\n                    </div>\n                    \n                    <div>\n                        <button type=\"submit\" \n                                class=\"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-xl text-white bg-accent hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent transition-all duration-200 shadow-lg hover:shadow-xl\">\n                            <span class=\"absolute left-0 inset-y-0 flex items-center pl-3\">\n                                <svg class=\"h-5 w-5 text-blue-300 group-hover:text-blue-200\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"></path>\n                                </svg>\n                            </span>\n                            Sign in to your account\n                        </button>\n                    </div>\n                </form>\n\n                <!-- Divider -->\n                <div class=\"relative\">\n                    <div class=\"absolute inset-0 flex items-center\">\n                        <div class=\"w-full border-t border-gray-300\"></div>\n                    </div>\n                    <div class=\"relative flex justify-center text-sm\">\n                        <span class=\"px-2 bg-white text-gray-500\">New to Market Nest?</span>\n                    </div>\n                </div>\n\n                <!-- Sign up link -->\n                <div class=\"text-center\">\n                    <a href=\"register.php\" class=\"w-full inline-flex justify-center items-center px-4 py-3 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent transition-all duration-200\">\n                        <svg class=\"w-5 h-5 mr-2 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\"></path>\n                        </svg>\n                        Create new account\n                    </a>\n                </div>\n\n                <!-- Back to home -->\n                <div class=\"text-center\">\n                    <a href=\"index.php\" class=\"text-sm text-gray-500 hover:text-accent font-medium\">\n                        ‚Üê Back to <?php echo SITE_NAME; ?>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>","size_bytes":13843},"logout.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/auth.php';\n\n$auth = new Auth();\n$auth->logout();\nredirect('index.php');\n?>\n","size_bytes":142},"order-confirmation.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/order.php';\n\nrequire_login();\n\n$order_number = $_GET['order'] ?? null;\nif (!$order_number) {\n    redirect('index.php');\n}\n\n$order_manager = new OrderManager();\n\n// Get order by order number\n$database = new Database();\n$db = $database->getConnection();\n$stmt = $db->prepare(\"SELECT id FROM orders WHERE order_number = ? AND user_id = ?\");\n$stmt->execute([$order_number, $_SESSION['user_id']]);\n$order_data = $stmt->fetch(PDO::FETCH_ASSOC);\n\nif (!$order_data) {\n    redirect('index.php');\n}\n\n$order = $order_manager->get_order_by_id($order_data['id'], $_SESSION['user_id']);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Order Confirmation - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Order Confirmation</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"order-history.php\" class=\"text-gray-700 hover:text-accent\">Order History</a>\n                    <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                    <a href=\"logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <!-- Success Message -->\n        <div class=\"text-center mb-8\">\n            <div class=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <span class=\"text-green-600 text-2xl\">‚úì</span>\n            </div>\n            <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">Order Confirmed!</h1>\n            <p class=\"text-gray-600\">Thank you for your purchase. Your order has been placed successfully.</p>\n        </div>\n        \n        <!-- Order Details -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n            <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Order Number</h3>\n                    <p class=\"text-lg font-semibold text-gray-900\"><?php echo $order['order_number']; ?></p>\n                </div>\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Order Date</h3>\n                    <p class=\"text-lg font-semibold text-gray-900\"><?php echo date('M j, Y g:i A', strtotime($order['created_at'])); ?></p>\n                </div>\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Total Amount</h3>\n                    <p class=\"text-lg font-semibold text-accent\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                </div>\n            </div>\n            \n            <?php if ($order['tracking_number']): ?>\n                <div class=\"bg-blue-50 border border-blue-200 rounded-md p-4\">\n                    <div class=\"flex items-center\">\n                        <span class=\"text-accent text-xl mr-3\">üì¶</span>\n                        <div>\n                            <h4 class=\"font-medium text-blue-800\">Tracking Information</h4>\n                            <p class=\"text-sm text-blue-700\">\n                                Tracking Number: <strong><?php echo $order['tracking_number']; ?></strong>\n                            </p>\n                            <a href=\"track.php?tracking=<?php echo $order['tracking_number']; ?>\" \n                               class=\"text-sm text-accent hover:text-blue-800 font-medium\">\n                                Track your shipment ‚Üí\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            <?php endif; ?>\n        </div>\n        \n        <!-- Order Items -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n            <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Order Items</h2>\n            <div class=\"divide-y divide-gray-200\">\n                <?php foreach ($order['items'] as $item): ?>\n                    <div class=\"py-4 flex items-center space-x-4\">\n                        <div class=\"flex-shrink-0\">\n                            <?php if (!empty($item['images'])): ?>\n                                <img src=\"<?php echo $item['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($item['name']); ?>\" \n                                     class=\"w-16 h-16 object-cover rounded-md\">\n                            <?php else: ?>\n                                <div class=\"w-16 h-16 bg-gray-200 rounded-md flex items-center justify-center\">\n                                    <span class=\"text-gray-400 text-xs\">No Image</span>\n                                </div>\n                            <?php endif; ?>\n                        </div>\n                        \n                        <div class=\"flex-1\">\n                            <h3 class=\"font-medium text-gray-900\"><?php echo htmlspecialchars($item['name']); ?></h3>\n                            <p class=\"text-sm text-gray-600\">by <?php echo htmlspecialchars($item['business_name']); ?></p>\n                            <p class=\"text-sm text-gray-600\">Quantity: <?php echo $item['quantity']; ?></p>\n                        </div>\n                        \n                        <div class=\"text-right\">\n                            <p class=\"font-medium text-gray-900\">$<?php echo number_format($item['total'], 2); ?></p>\n                            <p class=\"text-sm text-gray-600\">$<?php echo number_format($item['price'], 2); ?> each</p>\n                        </div>\n                    </div>\n                <?php endforeach; ?>\n            </div>\n        </div>\n        \n        <!-- Order Summary -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n            <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Order Summary</h2>\n            <div class=\"space-y-2\">\n                <div class=\"flex justify-between\">\n                    <span class=\"text-gray-600\">Subtotal</span>\n                    <span>$<?php echo number_format($order['total_amount'] - $order['tax_amount'] - $order['shipping_amount'] + $order['discount_amount'], 2); ?></span>\n                </div>\n                \n                <?php if ($order['discount_amount'] > 0): ?>\n                    <div class=\"flex justify-between text-green-600\">\n                        <span>Discount</span>\n                        <span>-$<?php echo number_format($order['discount_amount'], 2); ?></span>\n                    </div>\n                <?php endif; ?>\n                \n                <div class=\"flex justify-between\">\n                    <span class=\"text-gray-600\">Shipping</span>\n                    <span><?php echo $order['shipping_amount'] > 0 ? '$' . number_format($order['shipping_amount'], 2) : 'Free'; ?></span>\n                </div>\n                <div class=\"flex justify-between\">\n                    <span class=\"text-gray-600\">Tax</span>\n                    <span>$<?php echo number_format($order['tax_amount'], 2); ?></span>\n                </div>\n                <div class=\"border-t pt-2\">\n                    <div class=\"flex justify-between font-semibold text-lg\">\n                        <span>Total</span>\n                        <span class=\"text-accent\">$<?php echo number_format($order['total_amount'], 2); ?></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Addresses -->\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n            <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">Shipping Address</h3>\n                <p class=\"text-gray-700 whitespace-pre-line\"><?php echo htmlspecialchars($order['shipping_address']); ?></p>\n            </div>\n            \n            <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">Billing Address</h3>\n                <p class=\"text-gray-700 whitespace-pre-line\"><?php echo htmlspecialchars($order['billing_address']); ?></p>\n            </div>\n        </div>\n        \n        <!-- Action Buttons -->\n        <div class=\"text-center space-x-4\">\n            <a href=\"products.php\" class=\"bg-accent text-white px-6 py-3 rounded-md font-medium hover:bg-blue-600 transition duration-200\">\n                Continue Shopping\n            </a>\n            <a href=\"order-history.php\" class=\"border border-gray-300 text-gray-700 px-6 py-3 rounded-md font-medium hover:bg-gray-50 transition duration-200\">\n                View Order History\n            </a>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":9757},"order-detail.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/order.php';\n\nrequire_login();\n\n$order_id = $_GET['id'] ?? null;\nif (!$order_id) {\n    redirect('order-history.php');\n}\n\n$order_manager = new OrderManager();\n$order = $order_manager->get_order_by_id($order_id, $_SESSION['user_id']);\n\nif (!$order) {\n    redirect('order-history.php');\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Order Details - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <a href=\"order-history.php\" class=\"text-gray-700 hover:text-accent\">Order History</a>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                    <a href=\"logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div class=\"mb-6\">\n            <a href=\"order-history.php\" class=\"text-accent hover:text-blue-600 text-sm font-medium\">\n                ‚Üê Back to Order History\n            </a>\n        </div>\n        \n        <h1 class=\"text-3xl font-bold text-gray-900 mb-8\">Order Details</h1>\n        \n        <!-- Order Info -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n            <div class=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Order Number</h3>\n                    <p class=\"text-lg font-semibold text-gray-900\"><?php echo $order['order_number']; ?></p>\n                </div>\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Order Date</h3>\n                    <p class=\"text-lg font-semibold text-gray-900\"><?php echo date('M j, Y', strtotime($order['created_at'])); ?></p>\n                </div>\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Status</h3>\n                    <?php\n                    $status_colors = [\n                        'pending' => 'bg-yellow-100 text-yellow-800',\n                        'processing' => 'bg-blue-100 text-blue-800',\n                        'shipped' => 'bg-purple-100 text-purple-800',\n                        'delivered' => 'bg-green-100 text-green-800',\n                        'cancelled' => 'bg-red-100 text-red-800'\n                    ];\n                    ?>\n                    <span class=\"inline-flex px-3 py-1 text-sm font-semibold rounded-full <?php echo $status_colors[$order['status']]; ?>\">\n                        <?php echo ucfirst($order['status']); ?>\n                    </span>\n                </div>\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Total</h3>\n                    <p class=\"text-lg font-semibold text-accent\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                </div>\n            </div>\n            \n            <?php if ($order['tracking_number']): ?>\n                <div class=\"mt-6 bg-blue-50 border border-blue-200 rounded-md p-4\">\n                    <div class=\"flex items-center justify-between\">\n                        <div class=\"flex items-center\">\n                            <span class=\"text-accent text-xl mr-3\">üì¶</span>\n                            <div>\n                                <h4 class=\"font-medium text-blue-800\">Tracking Number</h4>\n                                <p class=\"text-sm text-blue-700\"><?php echo $order['tracking_number']; ?></p>\n                            </div>\n                        </div>\n                        <a href=\"track.php?tracking=<?php echo $order['tracking_number']; ?>\" \n                           class=\"bg-accent text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-600 transition duration-200\">\n                            Track Package\n                        </a>\n                    </div>\n                </div>\n            <?php endif; ?>\n        </div>\n        \n        <!-- Order Items -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n            <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Order Items</h2>\n            <div class=\"divide-y divide-gray-200\">\n                <?php foreach ($order['items'] as $item): ?>\n                    <div class=\"py-4 flex items-center space-x-4\">\n                        <div class=\"flex-shrink-0\">\n                            <?php if (!empty($item['images'])): ?>\n                                <img src=\"<?php echo $item['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($item['name']); ?>\" \n                                     class=\"w-16 h-16 object-cover rounded-md\">\n                            <?php else: ?>\n                                <div class=\"w-16 h-16 bg-gray-200 rounded-md flex items-center justify-center\">\n                                    <span class=\"text-gray-400 text-xs\">No Image</span>\n                                </div>\n                            <?php endif; ?>\n                        </div>\n                        \n                        <div class=\"flex-1\">\n                            <h3 class=\"font-medium text-gray-900\">\n                                <a href=\"product-detail.php?id=<?php echo $item['product_id']; ?>\" class=\"hover:text-accent\">\n                                    <?php echo htmlspecialchars($item['name']); ?>\n                                </a>\n                            </h3>\n                            <p class=\"text-sm text-gray-600\">by <?php echo htmlspecialchars($item['business_name']); ?></p>\n                            <p class=\"text-sm text-gray-600\">Quantity: <?php echo $item['quantity']; ?> √ó $<?php echo number_format($item['price'], 2); ?></p>\n                        </div>\n                        \n                        <div class=\"text-right\">\n                            <p class=\"font-medium text-gray-900\">$<?php echo number_format($item['total'], 2); ?></p>\n                            <?php if ($order['status'] === 'delivered'): ?>\n                                <a href=\"add-review.php?product=<?php echo $item['product_id']; ?>&order=<?php echo $order['id']; ?>\" \n                                   class=\"text-sm text-accent hover:text-blue-600 font-medium\">\n                                    Write Review\n                                </a>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                <?php endforeach; ?>\n            </div>\n        </div>\n        \n        <!-- Order Summary & Addresses -->\n        <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            <!-- Order Summary -->\n            <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Order Summary</h2>\n                <div class=\"space-y-2\">\n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Subtotal</span>\n                        <span>$<?php echo number_format($order['total_amount'] - $order['tax_amount'] - $order['shipping_amount'] + $order['discount_amount'], 2); ?></span>\n                    </div>\n                    \n                    <?php if ($order['discount_amount'] > 0): ?>\n                        <div class=\"flex justify-between text-green-600\">\n                            <span>Discount</span>\n                            <span>-$<?php echo number_format($order['discount_amount'], 2); ?></span>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Shipping</span>\n                        <span><?php echo $order['shipping_amount'] > 0 ? '$' . number_format($order['shipping_amount'], 2) : 'Free'; ?></span>\n                    </div>\n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Tax</span>\n                        <span>$<?php echo number_format($order['tax_amount'], 2); ?></span>\n                    </div>\n                    <div class=\"border-t pt-2\">\n                        <div class=\"flex justify-between font-semibold text-lg\">\n                            <span>Total</span>\n                            <span class=\"text-accent\">$<?php echo number_format($order['total_amount'], 2); ?></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            <!-- Addresses -->\n            <div class=\"space-y-6\">\n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">Shipping Address</h3>\n                    <p class=\"text-gray-700 whitespace-pre-line\"><?php echo htmlspecialchars($order['shipping_address']); ?></p>\n                </div>\n                \n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">Billing Address</h3>\n                    <p class=\"text-gray-700 whitespace-pre-line\"><?php echo htmlspecialchars($order['billing_address']); ?></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":10408},"order-history.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/order.php';\n\nrequire_login();\n\n$order_manager = new OrderManager();\n$page = max(1, $_GET['page'] ?? 1);\n$limit = 10;\n$offset = ($page - 1) * $limit;\n\n$orders = $order_manager->get_user_orders($_SESSION['user_id'], $limit, $offset);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Order History - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Order History</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"products.php\" class=\"text-gray-700 hover:text-accent\">Shop</a>\n                    <a href=\"cart.php\" class=\"text-gray-700 hover:text-accent\">Cart</a>\n                    <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                    <a href=\"logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-8\">Order History</h1>\n        \n        <?php if (empty($orders)): ?>\n            <div class=\"text-center py-12\">\n                <div class=\"text-gray-400 text-6xl mb-4\">üìã</div>\n                <h3 class=\"text-xl font-medium text-gray-900 mb-2\">No orders yet</h3>\n                <p class=\"text-gray-500 mb-6\">Start shopping to see your orders here!</p>\n                <a href=\"products.php\" class=\"bg-accent text-white px-6 py-3 rounded-md font-medium hover:bg-blue-600 transition duration-200\">\n                    Start Shopping\n                </a>\n            </div>\n        <?php else: ?>\n            <div class=\"space-y-6\">\n                <?php foreach ($orders as $order): ?>\n                    <div class=\"bg-white rounded-lg shadow-sm border\">\n                        <div class=\"px-6 py-4 border-b border-gray-200\">\n                            <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n                                <div class=\"flex items-center space-x-4\">\n                                    <div>\n                                        <h3 class=\"text-lg font-semibold text-gray-900\">Order <?php echo $order['order_number']; ?></h3>\n                                        <p class=\"text-sm text-gray-600\">Placed on <?php echo date('M j, Y g:i A', strtotime($order['created_at'])); ?></p>\n                                    </div>\n                                </div>\n                                \n                                <div class=\"mt-4 sm:mt-0 flex items-center space-x-4\">\n                                    <div class=\"text-right\">\n                                        <p class=\"text-lg font-semibold text-gray-900\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                                        <?php\n                                        $status_colors = [\n                                            'pending' => 'bg-yellow-100 text-yellow-800',\n                                            'processing' => 'bg-blue-100 text-blue-800',\n                                            'shipped' => 'bg-purple-100 text-purple-800',\n                                            'delivered' => 'bg-green-100 text-green-800',\n                                            'cancelled' => 'bg-red-100 text-red-800'\n                                        ];\n                                        ?>\n                                        <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full <?php echo $status_colors[$order['status']]; ?>\">\n                                            <?php echo ucfirst($order['status']); ?>\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class=\"px-6 py-4\">\n                            <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n                                <div class=\"flex items-center space-x-4\">\n                                    <?php if ($order['tracking_number']): ?>\n                                        <div class=\"flex items-center text-sm text-gray-600\">\n                                            <span class=\"mr-2\">üì¶</span>\n                                            <span>Tracking: <?php echo $order['tracking_number']; ?></span>\n                                        </div>\n                                    <?php endif; ?>\n                                    \n                                    <?php if ($order['shipment_status']): ?>\n                                        <div class=\"flex items-center text-sm text-gray-600\">\n                                            <span class=\"mr-2\">üöö</span>\n                                            <span><?php echo ucfirst(str_replace('_', ' ', $order['shipment_status'])); ?></span>\n                                        </div>\n                                    <?php endif; ?>\n                                </div>\n                                \n                                <div class=\"mt-4 sm:mt-0 flex space-x-3\">\n                                    <a href=\"order-detail.php?id=<?php echo $order['id']; ?>\" \n                                       class=\"text-accent hover:text-blue-600 text-sm font-medium\">\n                                        View Details\n                                    </a>\n                                    \n                                    <?php if ($order['tracking_number']): ?>\n                                        <a href=\"track.php?tracking=<?php echo $order['tracking_number']; ?>\" \n                                           class=\"text-accent hover:text-blue-600 text-sm font-medium\">\n                                            Track Package\n                                        </a>\n                                    <?php endif; ?>\n                                    \n                                    <?php if ($order['status'] === 'delivered'): ?>\n                                        <a href=\"review-order.php?id=<?php echo $order['id']; ?>\" \n                                           class=\"text-accent hover:text-blue-600 text-sm font-medium\">\n                                            Write Review\n                                        </a>\n                                    <?php endif; ?>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                <?php endforeach; ?>\n            </div>\n            \n            <!-- Pagination -->\n            <div class=\"mt-8 flex justify-center\">\n                <div class=\"flex space-x-2\">\n                    <?php if ($page > 1): ?>\n                        <a href=\"?page=<?php echo $page - 1; ?>\" \n                           class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Previous</a>\n                    <?php endif; ?>\n                    \n                    <?php if (count($orders) == $limit): ?>\n                        <a href=\"?page=<?php echo $page + 1; ?>\" \n                           class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Next</a>\n                    <?php endif; ?>\n                </div>\n            </div>\n        <?php endif; ?>\n    </div>\n</body>\n</html>\n","size_bytes":8594},"product-detail.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/product.php';\nrequire_once './includes/cart.php';\nrequire_once './includes/wishlist.php';\n\n$product_id = $_GET['id'] ?? null;\nif (!$product_id) {\n    redirect('products.php');\n}\n\n$product_manager = new ProductManager();\n$cart_manager = new CartManager();\n$wishlist_manager = new WishlistManager();\n\n$product = $product_manager->get_product_by_id($product_id);\nif (!$product) {\n    redirect('products.php');\n}\n\n// Add to recently viewed\nif (is_logged_in()) {\n    $product_manager->add_to_recently_viewed($_SESSION['user_id'], $product_id);\n}\n\n// Handle add to cart\n$message = '';\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['add_to_cart'])) {\n    if (!is_logged_in()) {\n        redirect('login.php');\n    }\n    \n    $quantity = max(1, $_POST['quantity'] ?? 1);\n    $result = $cart_manager->add_to_cart($_SESSION['user_id'], $product_id, $quantity);\n    $message = $result['message'];\n}\n\n// Handle wishlist toggle\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['toggle_wishlist'])) {\n    if (!is_logged_in()) {\n        redirect('login.php');\n    }\n    \n    $is_in_wishlist = $wishlist_manager->is_in_wishlist($_SESSION['user_id'], $product_id);\n    \n    if ($is_in_wishlist) {\n        $result = $wishlist_manager->remove_from_wishlist($_SESSION['user_id'], $product_id);\n    } else {\n        $result = $wishlist_manager->add_to_wishlist($_SESSION['user_id'], $product_id);\n    }\n    \n    $message = $result['message'];\n}\n\n// Get reviews\n$reviews = $product_manager->get_product_reviews($product_id, 5);\n\n// Check if in wishlist\n$is_in_wishlist = is_logged_in() ? $wishlist_manager->is_in_wishlist($_SESSION['user_id'], $product_id) : false;\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title><?php echo htmlspecialchars($product['name']); ?> - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <a href=\"products.php\" class=\"text-gray-700 hover:text-accent\">Products</a>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <?php if (is_logged_in()): ?>\n                        <a href=\"cart.php\" class=\"text-gray-700 hover:text-accent\">Cart</a>\n                        <a href=\"wishlist.php\" class=\"text-gray-700 hover:text-accent\">Wishlist</a>\n                        <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                        <a href=\"logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                    <?php else: ?>\n                        <a href=\"login.php\" class=\"text-accent hover:text-blue-600\">Login</a>\n                        <a href=\"register.php\" class=\"bg-accent text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-200\">Sign Up</a>\n                    <?php endif; ?>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n            <!-- Product Images -->\n            <div>\n                <?php if (!empty($product['images'])): ?>\n                    <div class=\"mb-4\">\n                        <img src=\"<?php echo $product['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                             class=\"w-full h-96 object-cover rounded-lg shadow-md\" id=\"main-image\">\n                    </div>\n                    \n                    <?php if (count($product['images']) > 1): ?>\n                        <div class=\"grid grid-cols-4 gap-2\">\n                            <?php foreach ($product['images'] as $index => $image): ?>\n                                <img src=\"<?php echo $image; ?>\" alt=\"Product image <?php echo $index + 1; ?>\" \n                                     class=\"w-full h-20 object-cover rounded cursor-pointer hover:opacity-75 transition duration-200 <?php echo $index === 0 ? 'ring-2 ring-accent' : ''; ?>\"\n                                     onclick=\"changeMainImage('<?php echo $image; ?>', this)\">\n                            <?php endforeach; ?>\n                        </div>\n                    <?php endif; ?>\n                <?php else: ?>\n                    <div class=\"w-full h-96 bg-gray-200 rounded-lg flex items-center justify-center\">\n                        <span class=\"text-gray-400 text-xl\">No Image Available</span>\n                    </div>\n                <?php endif; ?>\n            </div>\n            \n            <!-- Product Info -->\n            <div>\n                <div class=\"flex items-center mb-4\">\n                    <div class=\"flex items-center\">\n                        <?php if ($product['vendor_logo']): ?>\n                            <img src=\"<?php echo $product['vendor_logo']; ?>\" alt=\"Vendor logo\" class=\"w-8 h-8 rounded-full mr-2\">\n                        <?php endif; ?>\n                        <span class=\"text-gray-600\"><?php echo htmlspecialchars($product['business_name']); ?></span>\n                        <?php if ($product['is_verified']): ?>\n                            <span class=\"ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full\">\n                                <?php echo $product['verification_badge'] ?: 'Verified'; ?>\n                            </span>\n                        <?php endif; ?>\n                    </div>\n                </div>\n                \n                <h1 class=\"text-3xl font-bold text-gray-900 mb-4\"><?php echo htmlspecialchars($product['name']); ?></h1>\n                \n                <div class=\"flex items-center mb-4\">\n                    <?php if ($product['avg_rating'] > 0): ?>\n                        <div class=\"flex items-center\">\n                            <?php for ($i = 1; $i <= 5; $i++): ?>\n                                <span class=\"text-yellow-400 text-lg\">\n                                    <?php echo $i <= $product['avg_rating'] ? '‚òÖ' : '‚òÜ'; ?>\n                                </span>\n                            <?php endfor; ?>\n                            <span class=\"text-gray-600 ml-2\"><?php echo $product['avg_rating']; ?> (<?php echo $product['review_count']; ?> reviews)</span>\n                        </div>\n                    <?php else: ?>\n                        <span class=\"text-gray-500\">No reviews yet</span>\n                    <?php endif; ?>\n                </div>\n                \n                <div class=\"mb-6\">\n                    <?php if ($product['sale_price']): ?>\n                        <div class=\"flex items-center space-x-4\">\n                            <span class=\"text-3xl font-bold text-red-600\">$<?php echo number_format($product['sale_price'], 2); ?></span>\n                            <span class=\"text-xl text-gray-500 line-through\">$<?php echo number_format($product['price'], 2); ?></span>\n                            <span class=\"bg-red-100 text-red-800 text-sm px-2 py-1 rounded\">\n                                Save $<?php echo number_format($product['price'] - $product['sale_price'], 2); ?>\n                            </span>\n                        </div>\n                    <?php else: ?>\n                        <span class=\"text-3xl font-bold text-gray-900\">$<?php echo number_format($product['price'], 2); ?></span>\n                    <?php endif; ?>\n                </div>\n                \n                <div class=\"mb-6\">\n                    <p class=\"text-gray-700 leading-relaxed\"><?php echo nl2br(htmlspecialchars($product['description'])); ?></p>\n                </div>\n                \n                <div class=\"mb-6\">\n                    <span class=\"text-sm font-medium text-gray-700\">Category: </span>\n                    <span class=\"text-sm text-gray-600\"><?php echo htmlspecialchars($product['category_name']); ?></span>\n                </div>\n                \n                <div class=\"mb-6\">\n                    <?php if ($product['stock_quantity'] > 0): ?>\n                        <span class=\"text-green-600 font-medium\">‚úì In Stock (<?php echo $product['stock_quantity']; ?> available)</span>\n                    <?php else: ?>\n                        <span class=\"text-red-600 font-medium\">‚úó Out of Stock</span>\n                    <?php endif; ?>\n                </div>\n                \n                <?php if ($product['stock_quantity'] > 0): ?>\n                    <form method=\"POST\" class=\"mb-6\">\n                        <div class=\"flex items-center space-x-4 mb-4\">\n                            <label for=\"quantity\" class=\"text-sm font-medium text-gray-700\">Quantity:</label>\n                            <select name=\"quantity\" id=\"quantity\" class=\"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-accent focus:border-accent\">\n                                <?php for ($i = 1; $i <= min(10, $product['stock_quantity']); $i++): ?>\n                                    <option value=\"<?php echo $i; ?>\"><?php echo $i; ?></option>\n                                <?php endfor; ?>\n                            </select>\n                        </div>\n                        \n                        <div class=\"flex space-x-4\">\n                            <button type=\"submit\" name=\"add_to_cart\" \n                                    class=\"flex-1 bg-accent text-white px-6 py-3 rounded-md font-medium hover:bg-blue-600 transition duration-200\">\n                                Add to Cart\n                            </button>\n                            \n                            <button type=\"submit\" name=\"toggle_wishlist\" \n                                    class=\"px-6 py-3 border border-gray-300 rounded-md hover:bg-gray-50 transition duration-200\">\n                                <?php echo $is_in_wishlist ? '‚ù§Ô∏è Remove from Wishlist' : 'ü§ç Add to Wishlist'; ?>\n                            </button>\n                        </div>\n                    </form>\n                <?php endif; ?>\n            </div>\n        </div>\n        \n        <!-- Reviews Section -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6\">\n            <h2 class=\"text-2xl font-bold text-gray-900 mb-6\">Customer Reviews</h2>\n            \n            <?php if (empty($reviews)): ?>\n                <p class=\"text-gray-500\">No reviews yet. Be the first to review this product!</p>\n            <?php else: ?>\n                <div class=\"space-y-6\">\n                    <?php foreach ($reviews as $review): ?>\n                        <div class=\"border-b border-gray-200 pb-6 last:border-b-0\">\n                            <div class=\"flex items-center justify-between mb-2\">\n                                <div class=\"flex items-center\">\n                                    <span class=\"font-medium text-gray-900\"><?php echo htmlspecialchars($review['first_name'] . ' ' . $review['last_name']); ?></span>\n                                    <?php if ($review['is_verified_purchase']): ?>\n                                        <span class=\"ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded\">Verified Purchase</span>\n                                    <?php endif; ?>\n                                </div>\n                                <span class=\"text-sm text-gray-500\"><?php echo date('M j, Y', strtotime($review['created_at'])); ?></span>\n                            </div>\n                            \n                            <div class=\"flex items-center mb-2\">\n                                <?php for ($i = 1; $i <= 5; $i++): ?>\n                                    <span class=\"text-yellow-400\">\n                                        <?php echo $i <= $review['rating'] ? '‚òÖ' : '‚òÜ'; ?>\n                                    </span>\n                                <?php endfor; ?>\n                            </div>\n                            \n                            <?php if ($review['title']): ?>\n                                <h4 class=\"font-medium text-gray-900 mb-2\"><?php echo htmlspecialchars($review['title']); ?></h4>\n                            <?php endif; ?>\n                            \n                            <p class=\"text-gray-700\"><?php echo nl2br(htmlspecialchars($review['comment'])); ?></p>\n                        </div>\n                    <?php endforeach; ?>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n    \n    <script>\n        function changeMainImage(src, element) {\n            document.getElementById('main-image').src = src;\n            \n            // Remove ring from all thumbnails\n            document.querySelectorAll('.grid img').forEach(img => {\n                img.classList.remove('ring-2', 'ring-accent');\n            });\n            \n            // Add ring to clicked thumbnail\n            element.classList.add('ring-2', 'ring-accent');\n        }\n    </script>\n</body>\n</html>\n","size_bytes":14052},"products.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/product.php';\n\n$product_manager = new ProductManager();\n\n// Get parameters\n$category_id = $_GET['category'] ?? null;\n$search = $_GET['search'] ?? null;\n$page = max(1, $_GET['page'] ?? 1);\n$limit = 20;\n$offset = ($page - 1) * $limit;\n\n// Get products and categories\n$products = $product_manager->get_products($limit, $offset, $category_id, $search);\n$categories = $product_manager->get_categories();\n$flash_deals = $product_manager->get_flash_deals(6);\n\n$page_title = 'Products';\nif ($search) {\n    $page_title = \"Search results for: \" . htmlspecialchars($search);\n} elseif ($category_id) {\n    $category = array_filter($categories, fn($c) => $c['id'] == $category_id);\n    if ($category) {\n        $page_title = reset($category)['name'];\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title><?php echo $page_title; ?> - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    },\n                    fontFamily: {\n                        'sans': ['Inter', 'system-ui', 'sans-serif'],\n                    }\n                }\n            }\n        }\n    </script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n</head>\n<body class=\"bg-gray-50 font-sans\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b sticky top-0 z-50\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-8\">\n                    <a href=\"index.php\" class=\"flex items-center\">\n                        <div class=\"w-8 h-8 bg-accent rounded-lg flex items-center justify-center mr-2\">\n                            <span class=\"text-white font-bold\">MN</span>\n                        </div>\n                        <span class=\"text-xl font-bold text-primary\"><?php echo SITE_NAME; ?></span>\n                    </a>\n                    \n                    <!-- Search Bar -->\n                    <form method=\"GET\" action=\"products.php\" class=\"hidden md:flex items-center\">\n                        <div class=\"relative\">\n                            <input type=\"text\" name=\"search\" value=\"<?php echo htmlspecialchars($search ?? ''); ?>\" \n                                   placeholder=\"Search products, brands, and more...\" \n                                   class=\"w-96 px-4 py-2 border-2 border-gray-200 rounded-l-lg focus:outline-none focus:border-accent\">\n                            <button type=\"submit\" class=\"px-6 py-2 bg-accent text-white rounded-r-lg hover:bg-blue-600 transition duration-200\">\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\n                                </svg>\n                            </button>\n                        </div>\n                    </form>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <?php if (is_logged_in()): ?>\n                        <a href=\"cart.php\" class=\"text-gray-700 hover:text-accent relative\">\n                            Cart\n                            <span class=\"absolute -top-2 -right-2 bg-accent text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\" id=\"cart-count\">0</span>\n                        </a>\n                        <a href=\"wishlist.php\" class=\"text-gray-700 hover:text-accent\">Wishlist</a>\n                        <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                        <a href=\"logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                    <?php else: ?>\n                        <a href=\"login.php\" class=\"text-accent hover:text-blue-600\">Login</a>\n                        <a href=\"register.php\" class=\"bg-accent text-white px-4 py-2 rounded-md hover:bg-blue-600 transition duration-200\">Sign Up</a>\n                    <?php endif; ?>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <!-- Flash Deals Section -->\n        <?php if (!empty($flash_deals) && !$search && !$category_id): ?>\n            <div class=\"mb-8\">\n                <div class=\"bg-gradient-to-r from-red-500 to-accent text-white rounded-lg p-6 mb-6\">\n                    <h2 class=\"text-2xl font-bold mb-2\">Flash Deals - Limited Time!</h2>\n                    <p class=\"text-red-100\">Hurry up! These deals won't last long.</p>\n                </div>\n                \n                <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n                    <?php foreach ($flash_deals as $deal): ?>\n                        <div class=\"bg-white rounded-lg shadow-md overflow-hidden border-2 border-red-200\">\n                            <div class=\"relative\">\n                                <?php if (!empty($deal['images'])): ?>\n                                    <img src=\"<?php echo $deal['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($deal['name']); ?>\" \n                                         class=\"w-full h-32 object-cover\">\n                                <?php else: ?>\n                                    <div class=\"w-full h-32 bg-gray-200 flex items-center justify-center\">\n                                        <span class=\"text-gray-400\">No Image</span>\n                                    </div>\n                                <?php endif; ?>\n                                \n                                <div class=\"absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded\">\n                                    FLASH DEAL\n                                </div>\n                            </div>\n                            \n                            <div class=\"p-3\">\n                                <h3 class=\"font-medium text-sm text-gray-900 mb-1 line-clamp-2\"><?php echo htmlspecialchars($deal['name']); ?></h3>\n                                <div class=\"flex items-center space-x-2 mb-2\">\n                                    <span class=\"text-lg font-bold text-red-600\">$<?php echo number_format($deal['sale_price'], 2); ?></span>\n                                    <span class=\"text-sm text-gray-500 line-through\">$<?php echo number_format($deal['price'], 2); ?></span>\n                                </div>\n                                \n                                <div class=\"text-xs text-red-600 font-medium\">\n                                    Ends: <?php echo date('M j, g:i A', strtotime($deal['flash_deal_end'])); ?>\n                                </div>\n                            </div>\n                        </div>\n                    <?php endforeach; ?>\n                </div>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"flex flex-col lg:flex-row gap-8\">\n            <!-- Sidebar -->\n            <div class=\"lg:w-64 flex-shrink-0\">\n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Categories</h3>\n                    <ul class=\"space-y-2\">\n                        <li>\n                            <a href=\"products.php\" class=\"block text-gray-700 hover:text-accent py-1 <?php echo !$category_id ? 'text-accent font-medium' : ''; ?>\">\n                                All Products\n                            </a>\n                        </li>\n                        <?php foreach ($categories as $category): ?>\n                            <li>\n                                <a href=\"products.php?category=<?php echo $category['id']; ?>\" \n                                   class=\"block text-gray-700 hover:text-accent py-1 <?php echo $category_id == $category['id'] ? 'text-accent font-medium' : ''; ?>\">\n                                    <?php echo htmlspecialchars($category['name']); ?>\n                                    <span class=\"text-sm text-gray-500\">(<?php echo $category['product_count']; ?>)</span>\n                                </a>\n                            </li>\n                        <?php endforeach; ?>\n                    </ul>\n                </div>\n            </div>\n            \n            <!-- Main Content -->\n            <div class=\"flex-1\">\n                <div class=\"flex justify-between items-center mb-6\">\n                    <h1 class=\"text-2xl font-bold text-gray-900\"><?php echo $page_title; ?></h1>\n                    <div class=\"text-sm text-gray-500\">\n                        <?php echo count($products); ?> products found\n                    </div>\n                </div>\n                \n                <!-- Mobile Search -->\n                <div class=\"md:hidden mb-6\">\n                    <form method=\"GET\" action=\"products.php\">\n                        <div class=\"flex\">\n                            <input type=\"text\" name=\"search\" value=\"<?php echo htmlspecialchars($search ?? ''); ?>\" \n                                   placeholder=\"Search products...\" \n                                   class=\"flex-1 px-4 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-accent focus:border-accent\">\n                            <button type=\"submit\" class=\"px-4 py-2 bg-accent text-white rounded-r-md hover:bg-blue-600 transition duration-200\">\n                                Search\n                            </button>\n                        </div>\n                    </form>\n                </div>\n                \n                <!-- Products Grid -->\n                <?php if (empty($products)): ?>\n                    <div class=\"text-center py-12\">\n                        <div class=\"text-gray-400 text-6xl mb-4\">üì¶</div>\n                        <h3 class=\"text-xl font-medium text-gray-900 mb-2\">No products found</h3>\n                        <p class=\"text-gray-500\">Try adjusting your search or browse different categories.</p>\n                    </div>\n                <?php else: ?>\n                    <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n                        <?php foreach ($products as $product): ?>\n                            <div class=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-200\">\n                                <a href=\"product-detail.php?id=<?php echo $product['id']; ?>\" class=\"block\">\n                                    <div class=\"relative\">\n                                        <?php if (!empty($product['images'])): ?>\n                                            <img src=\"<?php echo $product['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                                                 class=\"w-full h-48 object-cover\">\n                                        <?php else: ?>\n                                            <div class=\"w-full h-48 bg-gray-200 flex items-center justify-center\">\n                                                <span class=\"text-gray-400\">No Image</span>\n                                            </div>\n                                        <?php endif; ?>\n                                        \n                                        <?php if ($product['is_featured']): ?>\n                                            <div class=\"absolute top-2 left-2 bg-accent text-white text-xs px-2 py-1 rounded\">\n                                                Featured\n                                            </div>\n                                        <?php endif; ?>\n                                        \n                                        <?php if ($product['sale_price']): ?>\n                                            <div class=\"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded\">\n                                                Sale\n                                            </div>\n                                        <?php endif; ?>\n                                    </div>\n                                    \n                                    <div class=\"p-4\">\n                                        <div class=\"flex items-center mb-2\">\n                                            <span class=\"text-sm text-gray-600\"><?php echo htmlspecialchars($product['business_name']); ?></span>\n                                            <?php if ($product['is_verified']): ?>\n                                                <span class=\"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full\">Verified</span>\n                                            <?php endif; ?>\n                                        </div>\n                                        \n                                        <h3 class=\"font-medium text-gray-900 mb-2 line-clamp-2\"><?php echo htmlspecialchars($product['name']); ?></h3>\n                                        \n                                        <div class=\"flex items-center mb-2\">\n                                            <?php if ($product['avg_rating'] > 0): ?>\n                                                <div class=\"flex items-center\">\n                                                    <span class=\"text-yellow-400\">‚òÖ</span>\n                                                    <span class=\"text-sm text-gray-600 ml-1\"><?php echo $product['avg_rating']; ?> (<?php echo $product['review_count']; ?>)</span>\n                                                </div>\n                                            <?php else: ?>\n                                                <span class=\"text-sm text-gray-500\">No reviews yet</span>\n                                            <?php endif; ?>\n                                        </div>\n                                        \n                                        <div class=\"flex items-center justify-between\">\n                                            <div>\n                                                <?php if ($product['sale_price']): ?>\n                                                    <span class=\"text-lg font-bold text-red-600\">$<?php echo number_format($product['sale_price'], 2); ?></span>\n                                                    <span class=\"text-sm text-gray-500 line-through ml-2\">$<?php echo number_format($product['price'], 2); ?></span>\n                                                <?php else: ?>\n                                                    <span class=\"text-lg font-bold text-gray-900\">$<?php echo number_format($product['price'], 2); ?></span>\n                                                <?php endif; ?>\n                                            </div>\n                                            \n                                            <?php if ($product['stock_quantity'] > 0): ?>\n                                                <span class=\"text-sm text-green-600\">In Stock</span>\n                                            <?php else: ?>\n                                                <span class=\"text-sm text-red-600\">Out of Stock</span>\n                                            <?php endif; ?>\n                                        </div>\n                                    </div>\n                                </a>\n                            </div>\n                        <?php endforeach; ?>\n                    </div>\n                    \n                    <!-- Pagination -->\n                    <div class=\"mt-8 flex justify-center\">\n                        <div class=\"flex space-x-2\">\n                            <?php if ($page > 1): ?>\n                                <a href=\"?<?php echo http_build_query(array_merge($_GET, ['page' => $page - 1])); ?>\" \n                                   class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Previous</a>\n                            <?php endif; ?>\n                            \n                            <?php if (count($products) == $limit): ?>\n                                <a href=\"?<?php echo http_build_query(array_merge($_GET, ['page' => $page + 1])); ?>\" \n                                   class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Next</a>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                <?php endif; ?>\n            </div>\n        </div>\n    </div>\n    \n    <script>\n        // Update cart count on page load\n        if (<?php echo is_logged_in() ? 'true' : 'false'; ?>) {\n            fetch('api/cart-count.php')\n                .then(response => response.json())\n                .then(data => {\n                    document.getElementById('cart-count').textContent = data.count || 0;\n                });\n        }\n    </script>\n</body>\n</html>\n","size_bytes":17610},"register.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/auth.php';\n\n$auth = new Auth();\n$error = '';\n$success = '';\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $username = sanitize_input($_POST['username']);\n    $email = sanitize_input($_POST['email']);\n    $password = $_POST['password'];\n    $confirm_password = $_POST['confirm_password'];\n    $first_name = sanitize_input($_POST['first_name']);\n    $last_name = sanitize_input($_POST['last_name']);\n    $phone = sanitize_input($_POST['phone']);\n    $address = sanitize_input($_POST['address']);\n    $city = sanitize_input($_POST['city']);\n    $state = sanitize_input($_POST['state']);\n    $zip_code = sanitize_input($_POST['zip_code']);\n    \n    if ($password !== $confirm_password) {\n        $error = 'Passwords do not match';\n    } else {\n        $result = $auth->register($username, $email, $password, $first_name, $last_name, $phone, $address, $city, $state, $zip_code);\n        \n        if ($result['success']) {\n            $success = $result['message'];\n        } else {\n            $error = $result['message'];\n        }\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Create Account - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    },\n                    fontFamily: {\n                        'sans': ['Inter', 'system-ui', 'sans-serif'],\n                    }\n                }\n            }\n        }\n    </script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n</head>\n<body class=\"bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen font-sans\">\n    <div class=\"min-h-screen py-12\">\n        <div class=\"max-w-4xl mx-auto px-4\">\n            <!-- Header -->\n            <div class=\"text-center mb-12\">\n                <div class=\"flex items-center justify-center mb-6\">\n                    <div class=\"w-14 h-14 bg-accent rounded-2xl flex items-center justify-center mr-4\">\n                        <span class=\"text-white font-bold text-xl\">MN</span>\n                    </div>\n                    <span class=\"text-3xl font-bold text-primary\"><?php echo SITE_NAME; ?></span>\n                </div>\n                <h1 class=\"text-4xl font-bold text-gray-900 mb-4\">Join Market Nest</h1>\n                <p class=\"text-xl text-gray-600 max-w-2xl mx-auto\">Create your account and start your amazing shopping journey with thousands of quality products.</p>\n            </div>\n            \n            <div class=\"bg-white rounded-2xl shadow-xl overflow-hidden\">\n                <div class=\"px-8 py-12\">\n                    <?php if ($error): ?>\n                        <div class=\"mb-8 bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg\">\n                            <div class=\"flex\">\n                                <div class=\"flex-shrink-0\">\n                                    <svg class=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                        <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\" />\n                                    </svg>\n                                </div>\n                                <div class=\"ml-3\">\n                                    <p class=\"text-sm text-red-700\"><?php echo $error; ?></p>\n                                </div>\n                            </div>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <?php if ($success): ?>\n                        <div class=\"mb-8 bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg\">\n                            <div class=\"flex\">\n                                <div class=\"flex-shrink-0\">\n                                    <svg class=\"h-5 w-5 text-green-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                        <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\" />\n                                    </svg>\n                                </div>\n                                <div class=\"ml-3\">\n                                    <p class=\"text-sm text-green-700\">\n                                        <?php echo $success; ?> \n                                        <a href=\"login.php\" class=\"font-medium text-green-800 underline hover:text-green-900\">\n                                            Sign in now ‚Üí\n                                        </a>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <form method=\"POST\" class=\"space-y-8\">\n                        <!-- Personal Information -->\n                        <div>\n                            <h3 class=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                                <svg class=\"w-5 h-5 mr-2 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                                </svg>\n                                Personal Information\n                            </h3>\n                            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                <div>\n                                    <label for=\"first_name\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        First Name *\n                                    </label>\n                                    <input id=\"first_name\" name=\"first_name\" type=\"text\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter your first name\">\n                                </div>\n                                \n                                <div>\n                                    <label for=\"last_name\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        Last Name *\n                                    </label>\n                                    <input id=\"last_name\" name=\"last_name\" type=\"text\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter your last name\">\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Account Information -->\n                        <div>\n                            <h3 class=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                                <svg class=\"w-5 h-5 mr-2 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\"></path>\n                                </svg>\n                                Account Credentials\n                            </h3>\n                            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                <div>\n                                    <label for=\"username\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        Username *\n                                    </label>\n                                    <input id=\"username\" name=\"username\" type=\"text\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Choose a username\">\n                                </div>\n                                \n                                <div>\n                                    <label for=\"email\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        Email Address *\n                                    </label>\n                                    <input id=\"email\" name=\"email\" type=\"email\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter your email address\">\n                                </div>\n                            </div>\n                            \n                            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6\">\n                                <div>\n                                    <label for=\"password\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        Password *\n                                    </label>\n                                    <input id=\"password\" name=\"password\" type=\"password\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Create a strong password\">\n                                </div>\n                                \n                                <div>\n                                    <label for=\"confirm_password\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        Confirm Password *\n                                    </label>\n                                    <input id=\"confirm_password\" name=\"confirm_password\" type=\"password\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Confirm your password\">\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Contact Information -->\n                        <div>\n                            <h3 class=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                                <svg class=\"w-5 h-5 mr-2 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n                                </svg>\n                                Contact & Address\n                                <span class=\"text-sm text-gray-500 font-normal ml-2\">(Optional)</span>\n                            </h3>\n                            \n                            <div class=\"mb-6\">\n                                <label for=\"phone\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                    Phone Number\n                                </label>\n                                <input id=\"phone\" name=\"phone\" type=\"tel\" \n                                       class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                       placeholder=\"Enter your phone number\">\n                            </div>\n                            \n                            <div class=\"mb-6\">\n                                <label for=\"address\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                    Street Address\n                                </label>\n                                <textarea id=\"address\" name=\"address\" rows=\"3\" \n                                          class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                          placeholder=\"Enter your street address\"></textarea>\n                            </div>\n                            \n                            <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                                <div>\n                                    <label for=\"city\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        City\n                                    </label>\n                                    <input id=\"city\" name=\"city\" type=\"text\" \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter your city\">\n                                </div>\n                                \n                                <div>\n                                    <label for=\"state\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        State/Province\n                                    </label>\n                                    <input id=\"state\" name=\"state\" type=\"text\" \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter your state\">\n                                </div>\n                                \n                                <div>\n                                    <label for=\"zip_code\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        ZIP/Postal Code\n                                    </label>\n                                    <input id=\"zip_code\" name=\"zip_code\" type=\"text\" \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter ZIP code\">\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Terms and Submit -->\n                        <div class=\"border-t border-gray-200 pt-8\">\n                            <div class=\"flex items-center mb-6\">\n                                <input id=\"terms\" name=\"terms\" type=\"checkbox\" required class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded\">\n                                <label for=\"terms\" class=\"ml-2 block text-sm text-gray-700\">\n                                    I agree to the \n                                    <a href=\"#\" class=\"text-accent hover:text-blue-600 font-medium\">Terms of Service</a> \n                                    and \n                                    <a href=\"#\" class=\"text-accent hover:text-blue-600 font-medium\">Privacy Policy</a>\n                                </label>\n                            </div>\n                            \n                            <button type=\"submit\" \n                                    class=\"w-full flex justify-center items-center py-4 px-6 border border-transparent rounded-xl shadow-lg text-base font-medium text-white bg-accent hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent transition-all duration-200 hover:shadow-xl\">\n                                <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\"></path>\n                                </svg>\n                                Create Your Account\n                            </button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n\n            <!-- Footer Links -->\n            <div class=\"text-center mt-12 space-y-4\">\n                <p class=\"text-gray-600\">\n                    Already have an account? \n                    <a href=\"login.php\" class=\"text-accent hover:text-blue-600 font-semibold\">\n                        Sign in here\n                    </a>\n                </p>\n                <p>\n                    <a href=\"index.php\" class=\"text-sm text-gray-500 hover:text-accent font-medium\">\n                        ‚Üê Back to <?php echo SITE_NAME; ?>\n                    </a>\n                </p>\n            </div>\n        </div>\n    </div>\n</body>\n</html>","size_bytes":18539},"replit.md":{"content":"# Overview\n\nThis is Market Nest, a professional e-commerce marketplace built with PHP and SQLite. The application features a complete e-commerce platform with user management, vendor system, product catalog, shopping cart, order management, and advanced shipment tracking capabilities. The project has been successfully rebranded and redesigned with modern, Amazon-level UI and is running on port 5000.\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\nUI Design Preference: Professional, modern design comparable to Amazon with clean layouts and excellent user experience.\n\n# System Architecture\n\n## Backend Architecture\n- **Framework**: PHP 8.2 with native server capabilities\n- **Database**: SQLite for development with complete e-commerce schema\n- **Authentication**: Session-based authentication with role-based access control\n- **File Structure**: Modular PHP classes for database operations and business logic\n\n## Database Design\n- **Users Management**: Complete user registration, authentication, and role management\n- **Product Catalog**: Categories, products, inventory, and vendor management\n- **Order System**: Shopping cart, orders, order items, and payment tracking\n- **Shipping & Tracking**: Advanced shipment tracking with history and real-time updates\n- **Additional Features**: Wishlist, reviews, notifications, coupons, and badges\n\n## Key Components\n- **Authentication System**: User registration, login, role-based access (customer, vendor, admin)\n- **Product Management**: Category-based product organization with vendor support\n- **Shopping Cart**: Session-based cart management with real-time updates\n- **Order Processing**: Complete order lifecycle from cart to delivery\n- **Tracking System**: Advanced shipment tracking with multiple service levels\n- **Vendor Portal**: Vendor application system and product management dashboard\n- **Admin Panel**: Complete administrative interface for user, vendor, and order management\n\n## Recent Setup Changes\n- **Date**: September 8, 2025\n- **Database Migration**: Converted from MySQL to SQLite for Replit compatibility\n- **Path Corrections**: Fixed all include/require path references to use __DIR__ for consistency\n- **SQL Compatibility**: Updated INSERT IGNORE to INSERT OR IGNORE for SQLite\n- **Environment Configuration**: Configured for Replit hosting with proper domain handling\n- **Sample Data**: Initialized with categories and admin user for immediate testing\n\n## Recent Design Updates\n- **Date**: September 8, 2025\n- **Complete Rebranding**: Transformed from \"OrangeCart\" to \"Market Nest\" with professional branding\n- **UI Overhaul**: Implemented Amazon-style modern design with:\n  - Professional color scheme (slate/blue instead of orange)\n  - Modern typography using Inter font family\n  - Enhanced homepage with hero section and improved layouts\n  - Professional login/signup pages with split-screen design\n  - Improved navigation with better search functionality\n  - Consistent branding with \"MN\" logo throughout\n- **User Experience**: Enhanced forms, better spacing, hover effects, and responsive design\n- **Color Palette**: Primary (#0f172a), Secondary (#1e293b), Accent (#3b82f6), Warning (#f59e0b), Success (#10b981)\n\n# External Dependencies\n\n## Core Requirements\n- **PHP**: Version 8.2 with PDO SQLite support\n- **Database**: SQLite database with foreign key constraints enabled\n- **Web Server**: PHP built-in development server configured for port 5000\n\n## Styling and UI\n- **Tailwind CSS**: CDN-based utility-first CSS framework for responsive design\n- **Typography**: Inter font family for professional appearance\n- **Color Scheme**: Professional blue/slate theme with Market Nest branding\n  - Primary: Deep slate (#0f172a) for headers and text\n  - Secondary: Slate (#1e293b) for navigation elements  \n  - Accent: Blue (#3b82f6) for buttons and highlights\n  - Supporting colors: Warning (#f59e0b), Success (#10b981)\n- **Design Language**: Modern, clean, Amazon-inspired professional interface","size_bytes":4006},"track.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/tracking.php';\n\n$tracking_manager = new TrackingManager();\n$tracking_number = $_GET['tracking'] ?? $_POST['tracking_number'] ?? '';\n$shipment = null;\n$error = '';\n$message = '';\n\n// Handle tracking lookup\nif ($tracking_number) {\n    $user_id = is_logged_in() ? $_SESSION['user_id'] : null;\n    $shipment = $tracking_manager->get_shipment_by_tracking($tracking_number, $user_id);\n    \n    if (!$shipment) {\n        $error = 'Tracking number not found. Please check and try again.';\n    } else {\n        // Increment free tracking usage for logged-in users\n        if ($user_id && $user_id == $shipment['user_id'] && $shipment['free_trackings_used'] < FREE_TRACKING_LIMIT) {\n            $tracking_manager->increment_free_tracking_usage($user_id);\n        }\n    }\n}\n\n// Handle advanced tracking purchase\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['purchase_tracking'])) {\n    if (!is_logged_in()) {\n        redirect('login.php');\n    }\n    \n    $tracking_level = $_POST['tracking_level'];\n    $amount = $tracking_level === 'standard' ? STANDARD_TRACKING_PRICE : PREMIUM_TRACKING_PRICE;\n    \n    $result = $tracking_manager->purchase_advanced_tracking($_SESSION['user_id'], $shipment['id'], $tracking_level, $amount);\n    $message = $result['message'];\n    \n    if ($result['success']) {\n        // Refresh shipment data\n        $shipment = $tracking_manager->get_shipment_by_tracking($tracking_number, $_SESSION['user_id']);\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Track Your Shipment - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    },\n                    fontFamily: {\n                        'sans': ['Inter', 'system-ui', 'sans-serif'],\n                    }\n                }\n            }\n        }\n    </script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n    <style>\n        .video-background {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            z-index: -1;\n            object-fit: cover;\n        }\n        \n        .overlay {\n            background: rgba(59, 130, 246, 0.1);\n            backdrop-filter: blur(1px);\n        }\n        \n        .content-overlay {\n            background: rgba(255, 255, 255, 0.95);\n            backdrop-filter: blur(10px);\n        }\n        \n        .progress-bar {\n            transition: width 1s ease-in-out;\n        }\n        \n        .tracking-step {\n            transition: all 0.3s ease;\n        }\n        \n        .tracking-step.completed {\n            transform: scale(1.1);\n        }\n        \n        @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.5; }\n        }\n        \n        .pulse-animation {\n            animation: pulse 2s infinite;\n        }\n    </style>\n</head>\n<body class=\"min-h-screen\">\n    <!-- 3D Video Background -->\n    <video autoplay muted loop class=\"video-background\">\n        <source src=\"https://cdn.durable.co/getty-videos/11YFphDEbcgMokFBstfj1wUNbEiH67ztyxxEKzGe05GR5HPPHbhh2IegZrfKys3a.mov\" type=\"video/mp4\">\n        Your browser does not support the video tag.\n    </video>\n    \n    <!-- Overlay -->\n    <div class=\"overlay min-h-screen\">\n        <!-- Header -->\n        <header class=\"content-overlay border-b border-white/20\">\n            <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                <div class=\"flex justify-between items-center h-16\">\n                    <div class=\"flex items-center space-x-4\">\n                        <a href=\"index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                        <span class=\"text-gray-400\">|</span>\n                        <span class=\"text-gray-700\">Track Shipment</span>\n                    </div>\n                    \n                    <nav class=\"flex items-center space-x-4\">\n                        <a href=\"products.php\" class=\"text-gray-700 hover:text-accent\">Shop</a>\n                        <?php if (is_logged_in()): ?>\n                            <a href=\"order-history.php\" class=\"text-gray-700 hover:text-accent\">Orders</a>\n                            <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                            <a href=\"logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                        <?php else: ?>\n                            <a href=\"login.php\" class=\"text-accent hover:text-blue-600\">Login</a>\n                        <?php endif; ?>\n                    </nav>\n                </div>\n            </div>\n        </header>\n\n        <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n            <!-- Tracking Form -->\n            <div class=\"text-center mb-12\">\n                <h1 class=\"text-4xl font-bold text-white mb-4 drop-shadow-lg\">Track Your Shipment</h1>\n                <p class=\"text-xl text-white/90 mb-8 drop-shadow\">Enter your tracking number to get real-time updates</p>\n                \n                <form method=\"POST\" class=\"max-w-md mx-auto\">\n                    <div class=\"flex\">\n                        <input type=\"text\" name=\"tracking_number\" value=\"<?php echo htmlspecialchars($tracking_number); ?>\" \n                               placeholder=\"Enter tracking number...\" required\n                               class=\"flex-1 px-4 py-3 rounded-l-lg border-0 focus:outline-none focus:ring-2 focus:ring-accent text-lg\">\n                        <button type=\"submit\" \n                                class=\"px-6 py-3 bg-accent text-white rounded-r-lg hover:bg-blue-600 transition duration-200 font-medium text-lg\">\n                            Track\n                        </button>\n                    </div>\n                </form>\n            </div>\n            \n            <?php if ($error): ?>\n                <div class=\"content-overlay rounded-lg p-6 mb-8 border border-red-200\">\n                    <div class=\"text-center\">\n                        <div class=\"text-red-500 text-6xl mb-4\">‚ùå</div>\n                        <h3 class=\"text-xl font-semibold text-red-700 mb-2\">Tracking Number Not Found</h3>\n                        <p class=\"text-red-600\"><?php echo $error; ?></p>\n                    </div>\n                </div>\n            <?php endif; ?>\n            \n            <?php if ($message): ?>\n                <div class=\"content-overlay rounded-lg p-4 mb-8 border border-blue-200\">\n                    <p class=\"text-blue-700 text-center\"><?php echo $message; ?></p>\n                </div>\n            <?php endif; ?>\n            \n            <?php if ($shipment): ?>\n                <!-- Shipment Info -->\n                <div class=\"content-overlay rounded-lg p-6 mb-8 border border-white/20\">\n                    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n                        <div class=\"text-center\">\n                            <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Tracking Number</h3>\n                            <p class=\"text-lg font-semibold text-gray-900\"><?php echo $shipment['tracking_number']; ?></p>\n                        </div>\n                        <div class=\"text-center\">\n                            <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Order Number</h3>\n                            <p class=\"text-lg font-semibold text-gray-900\"><?php echo $shipment['order_number']; ?></p>\n                        </div>\n                        <div class=\"text-center\">\n                            <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Carrier</h3>\n                            <p class=\"text-lg font-semibold text-gray-900\"><?php echo $shipment['carrier']; ?></p>\n                        </div>\n                    </div>\n                    \n                    <!-- Progress Bar -->\n                    <div class=\"mb-8\">\n                        <div class=\"flex justify-between text-sm text-gray-600 mb-2\">\n                            <span>Order Placed</span>\n                            <span>Delivered</span>\n                        </div>\n                        <div class=\"w-full bg-gray-200 rounded-full h-3\">\n                            <div class=\"bg-gradient-to-r from-accent to-blue-600 h-3 rounded-full progress-bar\" \n                                 style=\"width: <?php echo $tracking_manager->get_tracking_progress_percentage($shipment['status']); ?>%\"></div>\n                        </div>\n                        <div class=\"text-center mt-2\">\n                            <span class=\"inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-blue-100 text-blue-800\">\n                                <?php echo ucfirst(str_replace('_', ' ', $shipment['status'])); ?>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Tracking Level Info -->\n                <div class=\"content-overlay rounded-lg p-6 mb-8 border border-white/20\">\n                    <div class=\"flex items-center justify-between mb-4\">\n                        <h2 class=\"text-xl font-semibold text-gray-900\">Tracking Details</h2>\n                        <span class=\"px-3 py-1 text-sm font-semibold rounded-full \n                                   <?php echo $shipment['tracking_level'] === 'basic' ? 'bg-gray-100 text-gray-800' : \n                                             ($shipment['tracking_level'] === 'standard' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'); ?>\">\n                            <?php echo ucfirst($shipment['tracking_level']); ?> Tracking\n                        </span>\n                    </div>\n                    \n                    <?php if ($shipment['tracking_level'] === 'basic'): ?>\n                        <!-- Basic Tracking -->\n                        <div class=\"space-y-4\">\n                            <div class=\"text-center py-8\">\n                                <div class=\"text-4xl mb-4\">üì¶</div>\n                                <h3 class=\"text-lg font-medium text-gray-900 mb-2\">Basic Tracking</h3>\n                                <p class=\"text-gray-600 mb-4\">Current Status: <strong><?php echo ucfirst(str_replace('_', ' ', $shipment['status'])); ?></strong></p>\n                                \n                                <?php if (is_logged_in() && $_SESSION['user_id'] == $shipment['user_id'] && $shipment['free_trackings_used'] >= FREE_TRACKING_LIMIT): ?>\n                                    <div class=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4\">\n                                        <p class=\"text-yellow-800 text-sm\">\n                                            You've used your <?php echo FREE_TRACKING_LIMIT; ?> free trackings. Upgrade for detailed location and ETA information.\n                                        </p>\n                                    </div>\n                                    \n                                    <!-- Upgrade Options -->\n                                    <form method=\"POST\" class=\"space-y-4\">\n                                        <input type=\"hidden\" name=\"tracking_number\" value=\"<?php echo $tracking_number; ?>\">\n                                        \n                                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                            <div class=\"border border-blue-200 rounded-lg p-4 hover:bg-blue-50 transition duration-200\">\n                                                <label class=\"cursor-pointer\">\n                                                    <input type=\"radio\" name=\"tracking_level\" value=\"standard\" required class=\"sr-only\">\n                                                    <div class=\"text-center\">\n                                                        <h4 class=\"font-semibold text-blue-800 mb-2\">Standard Tracking</h4>\n                                                        <p class=\"text-2xl font-bold text-blue-600 mb-2\">$<?php echo number_format(STANDARD_TRACKING_PRICE, 2); ?></p>\n                                                        <ul class=\"text-sm text-blue-700 space-y-1\">\n                                                            <li>‚úì Current status</li>\n                                                            <li>‚úì Current city</li>\n                                                            <li>‚úì Estimated delivery</li>\n                                                        </ul>\n                                                    </div>\n                                                </label>\n                                            </div>\n                                            \n                                            <div class=\"border border-purple-200 rounded-lg p-4 hover:bg-purple-50 transition duration-200\">\n                                                <label class=\"cursor-pointer\">\n                                                    <input type=\"radio\" name=\"tracking_level\" value=\"premium\" required class=\"sr-only\">\n                                                    <div class=\"text-center\">\n                                                        <h4 class=\"font-semibold text-purple-800 mb-2\">Premium Tracking</h4>\n                                                        <p class=\"text-2xl font-bold text-purple-600 mb-2\">$<?php echo number_format(PREMIUM_TRACKING_PRICE, 2); ?></p>\n                                                        <ul class=\"text-sm text-purple-700 space-y-1\">\n                                                            <li>‚úì Everything in Standard</li>\n                                                            <li>‚úì Exact location</li>\n                                                            <li>‚úì Live updates</li>\n                                                            <li>‚úì SMS notifications</li>\n                                                        </ul>\n                                                    </div>\n                                                </label>\n                                            </div>\n                                        </div>\n                                        \n                                        <button type=\"submit\" name=\"purchase_tracking\" \n                                                class=\"w-full bg-accent text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-600 transition duration-200\">\n                                            Upgrade Tracking\n                                        </button>\n                                    </form>\n                                <?php endif; ?>\n                            </div>\n                        </div>\n                    <?php else: ?>\n                        <!-- Advanced Tracking -->\n                        <div class=\"space-y-6\">\n                            <!-- Current Location -->\n                            <?php if ($shipment['current_location']): ?>\n                                <div class=\"text-center py-4\">\n                                    <div class=\"text-4xl mb-2 pulse-animation\">üìç</div>\n                                    <h3 class=\"text-lg font-medium text-gray-900\">Current Location</h3>\n                                    <p class=\"text-xl font-semibold text-accent\"><?php echo htmlspecialchars($shipment['current_location']); ?></p>\n                                </div>\n                            <?php endif; ?>\n                            \n                            <!-- Estimated Delivery -->\n                            <?php if ($shipment['estimated_delivery']): ?>\n                                <div class=\"bg-green-50 border border-green-200 rounded-lg p-4 text-center\">\n                                    <h4 class=\"font-medium text-green-800 mb-1\">Estimated Delivery</h4>\n                                    <p class=\"text-lg font-semibold text-green-700\">\n                                        <?php echo date('M j, Y g:i A', strtotime($shipment['estimated_delivery'])); ?>\n                                    </p>\n                                </div>\n                            <?php endif; ?>\n                        </div>\n                    <?php endif; ?>\n                </div>\n                \n                <!-- Tracking History -->\n                <div class=\"content-overlay rounded-lg p-6 border border-white/20\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-6\">Tracking History</h2>\n                    \n                    <div class=\"space-y-4\">\n                        <?php foreach (array_reverse($shipment['history']) as $index => $event): ?>\n                            <div class=\"flex items-start space-x-4 tracking-step <?php echo $index === 0 ? 'completed' : ''; ?>\">\n                                <div class=\"flex-shrink-0 w-8 h-8 bg-accent rounded-full flex items-center justify-center\">\n                                    <span class=\"text-white text-sm font-bold\"><?php echo $index + 1; ?></span>\n                                </div>\n                                \n                                <div class=\"flex-1\">\n                                    <div class=\"flex items-center justify-between\">\n                                        <h3 class=\"font-medium text-gray-900\"><?php echo htmlspecialchars($event['status']); ?></h3>\n                                        <span class=\"text-sm text-gray-500\"><?php echo date('M j, Y g:i A', strtotime($event['timestamp'])); ?></span>\n                                    </div>\n                                    \n                                    <?php if ($event['location'] && $shipment['tracking_level'] !== 'basic'): ?>\n                                        <p class=\"text-sm text-gray-600 mt-1\">üìç <?php echo htmlspecialchars($event['location']); ?></p>\n                                    <?php endif; ?>\n                                    \n                                    <?php if ($event['description']): ?>\n                                        <p class=\"text-sm text-gray-600 mt-1\"><?php echo htmlspecialchars($event['description']); ?></p>\n                                    <?php endif; ?>\n                                </div>\n                            </div>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n    \n    <script>\n        // Add interactive effects\n        document.addEventListener('DOMContentLoaded', function() {\n            // Animate progress bar on load\n            const progressBar = document.querySelector('.progress-bar');\n            if (progressBar) {\n                setTimeout(() => {\n                    progressBar.style.width = progressBar.style.width;\n                }, 500);\n            }\n            \n            // Handle tracking level selection\n            const trackingOptions = document.querySelectorAll('input[name=\"tracking_level\"]');\n            trackingOptions.forEach(option => {\n                option.addEventListener('change', function() {\n                    // Remove selection from all options\n                    document.querySelectorAll('input[name=\"tracking_level\"]').forEach(opt => {\n                        opt.closest('.border').classList.remove('ring-2', 'ring-blue-500', 'ring-purple-500');\n                    });\n                    \n                    // Add selection to chosen option\n                    const color = this.value === 'standard' ? 'ring-blue-500' : 'ring-purple-500';\n                    this.closest('.border').classList.add('ring-2', color);\n                });\n            });\n        });\n    </script>\n</body>\n</html>\n","size_bytes":20410},"vendor-application.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/vendor.php';\n\n$vendor_manager = new VendorManager();\n$error = '';\n$success = '';\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $name = sanitize_input($_POST['name']);\n    $email = sanitize_input($_POST['email']);\n    $business_name = sanitize_input($_POST['business_name']);\n    $description = sanitize_input($_POST['description']);\n    \n    $logo_path = null;\n    \n    // Handle logo upload\n    if (isset($_FILES['logo']) && $_FILES['logo']['error'] == 0) {\n        $allowed_types = ['image/jpeg', 'image/png', 'image/gif'];\n        $file_type = $_FILES['logo']['type'];\n        \n        if (in_array($file_type, $allowed_types) && $_FILES['logo']['size'] <= MAX_FILE_SIZE) {\n            $upload_dir = UPLOAD_PATH . 'vendor_logos/';\n            if (!file_exists($upload_dir)) {\n                mkdir($upload_dir, 0777, true);\n            }\n            \n            $file_extension = pathinfo($_FILES['logo']['name'], PATHINFO_EXTENSION);\n            $filename = uniqid() . '.' . $file_extension;\n            $logo_path = $upload_dir . $filename;\n            \n            if (!move_uploaded_file($_FILES['logo']['tmp_name'], $logo_path)) {\n                $logo_path = null;\n            }\n        }\n    }\n    \n    $result = $vendor_manager->submit_application($name, $email, $business_name, $description, $logo_path);\n    \n    if ($result['success']) {\n        $success = $result['message'];\n    } else {\n        $error = $result['message'];\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Become a Vendor - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-gray-700 hover:text-accent\">Home</a>\n                    <a href=\"login.php\" class=\"text-accent hover:text-blue-600\">Login</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-3xl mx-auto py-12 px-4 sm:px-6 lg:px-8\">\n        <div class=\"text-center mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Become a Vendor</h1>\n            <p class=\"mt-4 text-lg text-gray-600\">Join our marketplace and start selling your products to thousands of customers</p>\n        </div>\n        \n        <?php if ($error): ?>\n            <div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\">\n                <?php echo $error; ?>\n            </div>\n        <?php endif; ?>\n        \n        <?php if ($success): ?>\n            <div class=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6\">\n                <?php echo $success; ?>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"bg-white shadow-lg rounded-lg p-8\">\n            <form method=\"POST\" enctype=\"multipart/form-data\" class=\"space-y-6\">\n                <div>\n                    <label for=\"name\" class=\"block text-sm font-medium text-gray-700\">Full Name *</label>\n                    <input id=\"name\" name=\"name\" type=\"text\" required \n                           class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-accent focus:border-accent\">\n                </div>\n                \n                <div>\n                    <label for=\"email\" class=\"block text-sm font-medium text-gray-700\">Email Address *</label>\n                    <input id=\"email\" name=\"email\" type=\"email\" required \n                           class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-accent focus:border-accent\">\n                </div>\n                \n                <div>\n                    <label for=\"business_name\" class=\"block text-sm font-medium text-gray-700\">Business Name *</label>\n                    <input id=\"business_name\" name=\"business_name\" type=\"text\" required \n                           class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-accent focus:border-accent\">\n                </div>\n                \n                <div>\n                    <label for=\"description\" class=\"block text-sm font-medium text-gray-700\">Business Description *</label>\n                    <textarea id=\"description\" name=\"description\" rows=\"4\" required \n                              placeholder=\"Tell us about your business, what products you sell, and why you'd be a great addition to our marketplace...\"\n                              class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-accent focus:border-accent\"></textarea>\n                </div>\n                \n                <div>\n                    <label for=\"logo\" class=\"block text-sm font-medium text-gray-700\">Business Logo (Optional)</label>\n                    <input id=\"logo\" name=\"logo\" type=\"file\" accept=\"image/*\" \n                           class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-accent focus:border-accent\">\n                    <p class=\"mt-1 text-sm text-gray-500\">Upload your business logo (JPG, PNG, GIF - Max 5MB)</p>\n                </div>\n                \n                <div class=\"bg-blue-50 border border-blue-200 rounded-md p-4\">\n                    <h3 class=\"text-lg font-medium text-blue-800 mb-2\">What happens next?</h3>\n                    <ul class=\"text-sm text-blue-700 space-y-1\">\n                        <li>‚Ä¢ We'll review your application within 24-48 hours</li>\n                        <li>‚Ä¢ If approved, you'll receive login credentials via notification</li>\n                        <li>‚Ä¢ You can then access your vendor dashboard to start adding products</li>\n                        <li>‚Ä¢ Verified vendors get priority placement in search results</li>\n                    </ul>\n                </div>\n                \n                <div class=\"pt-4\">\n                    <button type=\"submit\" \n                            class=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-accent hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent transition duration-200\">\n                        Submit Application\n                    </button>\n                </div>\n            </form>\n        </div>\n        \n        <div class=\"mt-8 text-center\">\n            <a href=\"index.php\" class=\"text-accent hover:text-blue-600\">‚Üê Back to Home</a>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":7610},"admin/dashboard.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/vendor.php';\nrequire_once '../includes/order.php';\n\nrequire_admin();\n\n$vendor_manager = new VendorManager();\n$orderManager = new OrderManager();\n$pending_applications = $vendor_manager->get_pending_applications();\n$all_vendors = $vendor_manager->get_all_vendors();\n\n// Get comprehensive stats\n$database = new Database();\n$db = $database->getConnection();\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as total_users FROM users WHERE role = 'customer'\");\n$stmt->execute();\n$total_customers = $stmt->fetch(PDO::FETCH_ASSOC)['total_users'];\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as total_users FROM users\");\n$stmt->execute();\n$total_users = $stmt->fetch(PDO::FETCH_ASSOC)['total_users'];\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as total_products FROM products WHERE status = 'active'\");\n$stmt->execute();\n$total_products = $stmt->fetch(PDO::FETCH_ASSOC)['total_products'];\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as total_orders FROM orders\");\n$stmt->execute();\n$total_orders = $stmt->fetch(PDO::FETCH_ASSOC)['total_orders'];\n\n$stmt = $db->prepare(\"SELECT SUM(total_amount) as total_revenue FROM orders WHERE status != 'cancelled'\");\n$stmt->execute();\n$total_revenue = $stmt->fetch(PDO::FETCH_ASSOC)['total_revenue'] ?: 0;\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as pending_orders FROM orders WHERE status = 'pending'\");\n$stmt->execute();\n$pending_orders = $stmt->fetch(PDO::FETCH_ASSOC)['pending_orders'];\n\n// Recent activity\n$stmt = $db->prepare(\"\n    SELECT u.first_name, u.last_name, u.email, u.created_at, 'user' as type\n    FROM users u \n    WHERE u.role = 'customer' \n    ORDER BY u.created_at DESC \n    LIMIT 5\n\");\n$stmt->execute();\n$recent_users = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n$stmt = $db->prepare(\"\n    SELECT o.order_number, o.total_amount, o.created_at, u.first_name, u.last_name, 'order' as type\n    FROM orders o \n    JOIN users u ON o.user_id = u.id \n    ORDER BY o.created_at DESC \n    LIMIT 5\n\");\n$stmt->execute();\n$recent_orders = $stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Admin Dashboard - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-primary\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700 font-medium\">Admin Dashboard</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <span class=\"text-gray-700\">Welcome, <?php echo $_SESSION['first_name']; ?>!</span>\n                    <a href=\"../logout.php\" class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Admin Dashboard</h1>\n            <p class=\"mt-2 text-gray-600\">Comprehensive platform management and analytics</p>\n        </div>\n        \n        <!-- Enhanced stats grid with revenue and pending orders -->\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8\">\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-blue-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-2.25\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Users</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo number_format($total_users); ?></p>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-primary/10 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Vendors</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo number_format(count($all_vendors)); ?></p>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-green-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Active Products</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo number_format($total_products); ?></p>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-purple-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo number_format($total_orders); ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-emerald-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-emerald-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Revenue</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\">$<?php echo number_format($total_revenue, 2); ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-yellow-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Pending Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo number_format($pending_orders); ?></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Enhanced layout with analytics and recent activity -->\n        <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8\">\n            <!-- Pending Applications -->\n            <div class=\"bg-white rounded-lg shadow\">\n                <div class=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n                    <h2 class=\"text-lg font-semibold text-gray-900\">\n                        Pending Applications\n                        <?php if (count($pending_applications) > 0): ?>\n                            <span class=\"bg-red-100 text-red-800 text-sm font-medium px-2.5 py-0.5 rounded-full ml-2\">\n                                <?php echo count($pending_applications); ?>\n                            </span>\n                        <?php endif; ?>\n                    </h2>\n                    <a href=\"vendor-applications.php\" class=\"text-primary hover:text-blue-600 text-sm font-medium\">View All</a>\n                </div>\n                \n                <div class=\"p-6\">\n                    <?php if (empty($pending_applications)): ?>\n                        <p class=\"text-gray-500 text-center py-4\">No pending applications</p>\n                    <?php else: ?>\n                        <div class=\"space-y-4\">\n                            <?php foreach (array_slice($pending_applications, 0, 3) as $app): ?>\n                                <div class=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                                    <div class=\"flex items-center space-x-3\">\n                                        <?php if ($app['logo_path']): ?>\n                                            <img src=\"../<?php echo $app['logo_path']; ?>\" alt=\"Logo\" class=\"w-8 h-8 rounded-full object-cover\">\n                                        <?php else: ?>\n                                            <div class=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center\">\n                                                <span class=\"text-primary text-xs font-medium\"><?php echo substr($app['business_name'], 0, 1); ?></span>\n                                            </div>\n                                        <?php endif; ?>\n                                        <div>\n                                            <p class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($app['business_name']); ?></p>\n                                            <p class=\"text-xs text-gray-500\"><?php echo htmlspecialchars($app['name']); ?></p>\n                                        </div>\n                                    </div>\n                                    <span class=\"text-xs text-gray-500\"><?php echo date('M j', strtotime($app['applied_at'])); ?></span>\n                                </div>\n                            <?php endforeach; ?>\n                        </div>\n                    <?php endif; ?>\n                </div>\n            </div>\n\n            <!-- Recent Users -->\n            <div class=\"bg-white rounded-lg shadow\">\n                <div class=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n                    <h2 class=\"text-lg font-semibold text-gray-900\">Recent Users</h2>\n                    <a href=\"users.php\" class=\"text-primary hover:text-blue-600 text-sm font-medium\">View All</a>\n                </div>\n                <div class=\"p-6\">\n                    <div class=\"space-y-4\">\n                        <?php foreach ($recent_users as $user): ?>\n                            <div class=\"flex items-center space-x-3\">\n                                <div class=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                                    <span class=\"text-blue-600 text-xs font-medium\"><?php echo substr($user['first_name'], 0, 1); ?></span>\n                                </div>\n                                <div class=\"flex-1\">\n                                    <p class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($user['first_name'] . ' ' . $user['last_name']); ?></p>\n                                    <p class=\"text-xs text-gray-500\"><?php echo htmlspecialchars($user['email']); ?></p>\n                                </div>\n                                <span class=\"text-xs text-gray-500\"><?php echo date('M j', strtotime($user['created_at'])); ?></span>\n                            </div>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Recent Orders -->\n            <div class=\"bg-white rounded-lg shadow\">\n                <div class=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n                    <h2 class=\"text-lg font-semibold text-gray-900\">Recent Orders</h2>\n                    <a href=\"orders.php\" class=\"text-primary hover:text-blue-600 text-sm font-medium\">View All</a>\n                </div>\n                <div class=\"p-6\">\n                    <div class=\"space-y-4\">\n                        <?php foreach ($recent_orders as $order): ?>\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"text-sm font-medium text-gray-900\">#<?php echo $order['order_number']; ?></p>\n                                    <p class=\"text-xs text-gray-500\"><?php echo htmlspecialchars($order['first_name'] . ' ' . $order['last_name']); ?></p>\n                                </div>\n                                <div class=\"text-right\">\n                                    <p class=\"text-sm font-medium text-gray-900\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                                    <p class=\"text-xs text-gray-500\"><?php echo date('M j', strtotime($order['created_at'])); ?></p>\n                                </div>\n                            </div>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            </div>\n        </div>\n            \n        <!-- Enhanced quick actions grid with more management options -->\n        <div class=\"bg-white rounded-lg shadow\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-lg font-semibold text-gray-900\">Management Tools</h2>\n            </div>\n            \n            <div class=\"p-6\">\n                <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                    <a href=\"vendor-applications.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Review Applications</p>\n                            <p class=\"text-xs text-gray-500\">Approve vendor applications</p>\n                        </div>\n                    </a>\n                    \n                    <a href=\"vendor-management.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Manage Vendors</p>\n                            <p class=\"text-xs text-gray-500\">Vendor accounts & badges</p>\n                        </div>\n                    </a>\n                    \n                    <a href=\"users.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-2.25\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Manage Users</p>\n                            <p class=\"text-xs text-gray-500\">User accounts & roles</p>\n                        </div>\n                    </a>\n                    \n                    <a href=\"products.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Manage Products</p>\n                            <p class=\"text-xs text-gray-500\">Product listings & reviews</p>\n                        </div>\n                    </a>\n\n                    <a href=\"orders.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Manage Orders</p>\n                            <p class=\"text-xs text-gray-500\">Order processing & status</p>\n                        </div>\n                    </a>\n                    \n                    <a href=\"shipment-management.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-indigo-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Manage Shipments</p>\n                            <p class=\"text-xs text-gray-500\">Tracking & delivery status</p>\n                        </div>\n                    </a>\n\n                    <a href=\"analytics.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-pink-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-pink-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Analytics</p>\n                            <p class=\"text-xs text-gray-500\">Sales & performance data</p>\n                        </div>\n                    </a>\n\n                    <a href=\"settings.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"></path>\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">System Settings</p>\n                            <p class=\"text-xs text-gray-500\">Platform configuration</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":23964},"admin/shipment-management.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/tracking.php';\n\nrequire_admin();\n\n$tracking_manager = new TrackingManager();\n$message = '';\n\n// Handle status updates\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['update_status'])) {\n    $shipment_id = $_POST['shipment_id'];\n    $status = $_POST['status'];\n    $location = sanitize_input($_POST['location']);\n    $description = sanitize_input($_POST['description']);\n    \n    $result = $tracking_manager->update_shipment_status($shipment_id, $status, $location, $description);\n    $message = $result['message'];\n}\n\n$page = max(1, $_GET['page'] ?? 1);\n$limit = 20;\n$offset = ($page - 1) * $limit;\n\n$shipments = $tracking_manager->get_all_shipments($limit, $offset);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Shipment Management - Admin Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Shipment Management</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Dashboard</a>\n                    <a href=\"../logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Shipment Management</h1>\n            <p class=\"mt-2 text-gray-600\">Track and update shipment statuses</p>\n        </div>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"bg-white shadow rounded-lg overflow-hidden\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-lg font-semibold text-gray-900\">All Shipments</h2>\n            </div>\n            \n            <?php if (empty($shipments)): ?>\n                <div class=\"px-6 py-8 text-center text-gray-500\">\n                    No shipments found\n                </div>\n            <?php else: ?>\n                <div class=\"overflow-x-auto\">\n                    <table class=\"min-w-full divide-y divide-gray-200\">\n                        <thead class=\"bg-gray-50\">\n                            <tr>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Tracking Number</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Order</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Customer</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Location</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody class=\"bg-white divide-y divide-gray-200\">\n                            <?php foreach ($shipments as $shipment): ?>\n                                <tr>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm font-medium text-gray-900\"><?php echo $shipment['tracking_number']; ?></div>\n                                        <div class=\"text-sm text-gray-500\"><?php echo $shipment['carrier']; ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm text-gray-900\"><?php echo $shipment['order_number']; ?></div>\n                                        <div class=\"text-sm text-gray-500\"><?php echo date('M j, Y', strtotime($shipment['created_at'])); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm text-gray-900\"><?php echo htmlspecialchars($shipment['first_name'] . ' ' . $shipment['last_name']); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <?php\n                                        $status_colors = [\n                                            'pending' => 'bg-yellow-100 text-yellow-800',\n                                            'picked_up' => 'bg-blue-100 text-blue-800',\n                                            'in_transit' => 'bg-purple-100 text-purple-800',\n                                            'out_for_delivery' => 'bg-blue-100 text-blue-800',\n                                            'delivered' => 'bg-green-100 text-green-800'\n                                        ];\n                                        ?>\n                                        <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full <?php echo $status_colors[$shipment['status']]; ?>\">\n                                            <?php echo ucfirst(str_replace('_', ' ', $shipment['status'])); ?>\n                                        </span>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                        <?php echo htmlspecialchars($shipment['current_location'] ?: 'Not specified'); ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                                        <button onclick=\"openUpdateModal(<?php echo htmlspecialchars(json_encode($shipment)); ?>)\" \n                                                class=\"text-accent hover:text-blue-600\">\n                                            Update\n                                        </button>\n                                    </td>\n                                </tr>\n                            <?php endforeach; ?>\n                        </tbody>\n                    </table>\n                </div>\n            <?php endif; ?>\n        </div>\n        \n        <!-- Pagination -->\n        <div class=\"mt-8 flex justify-center\">\n            <div class=\"flex space-x-2\">\n                <?php if ($page > 1): ?>\n                    <a href=\"?page=<?php echo $page - 1; ?>\" \n                       class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Previous</a>\n                <?php endif; ?>\n                \n                <?php if (count($shipments) == $limit): ?>\n                    <a href=\"?page=<?php echo $page + 1; ?>\" \n                       class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Next</a>\n                <?php endif; ?>\n            </div>\n        </div>\n    </div>\n    \n    <!-- Update Modal - Professional Market Nest Styling -->\n    <div id=\"updateModal\" class=\"fixed inset-0 bg-black bg-opacity-60 hidden backdrop-blur-sm transition-all duration-300 z-50\">\n        <div class=\"flex items-center justify-center min-h-screen p-4\">\n            <div class=\"bg-white rounded-xl shadow-2xl max-w-md w-full border border-gray-100 transform transition-all duration-300\">\n                <form method=\"POST\">\n                    <div class=\"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-accent to-blue-600 rounded-t-xl\">\n                        <h3 class=\"text-lg font-semibold text-white flex items-center\">\n                            <span class=\"w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center mr-3\">\n                                <span class=\"text-white font-bold text-sm\">MN</span>\n                            </span>\n                            Update Shipment Status\n                        </h3>\n                    </div>\n                    \n                    <div class=\"px-6 py-4 space-y-4\">\n                        <input type=\"hidden\" name=\"shipment_id\" id=\"modal_shipment_id\">\n                        \n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Tracking Number</label>\n                            <p id=\"modal_tracking_number\" class=\"text-sm text-gray-900 font-medium\"></p>\n                        </div>\n                        \n                        <div>\n                            <label for=\"modal_status\" class=\"block text-sm font-medium text-gray-700 mb-1\">Status</label>\n                            <select name=\"status\" id=\"modal_status\" required \n                                    class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\">\n                                <option value=\"pending\">Pending</option>\n                                <option value=\"picked_up\">Picked Up</option>\n                                <option value=\"in_transit\">In Transit</option>\n                                <option value=\"out_for_delivery\">Out for Delivery</option>\n                                <option value=\"delivered\">Delivered</option>\n                            </select>\n                        </div>\n                        \n                        <div>\n                            <label for=\"modal_location\" class=\"block text-sm font-medium text-gray-700 mb-1\">Current Location</label>\n                            <input type=\"text\" name=\"location\" id=\"modal_location\" \n                                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\">\n                        </div>\n                        \n                        <div>\n                            <label for=\"modal_description\" class=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                            <textarea name=\"description\" id=\"modal_description\" rows=\"3\" \n                                      class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-\n","size_bytes":11556},"admin/users.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/auth.php';\n\nrequire_admin();\n\n$database = new Database();\n$db = $database->getConnection();\n\n// Handle user actions\nif ($_POST['action'] ?? '' === 'update_status') {\n    $user_id = $_POST['user_id'];\n    $status = $_POST['status'];\n    \n    $stmt = $db->prepare(\"UPDATE users SET status = ? WHERE id = ?\");\n    $stmt->execute([$status, $user_id]);\n    \n    header('Location: users.php?updated=1');\n    exit();\n}\n\n// Get users with pagination\n$page = max(1, $_GET['page'] ?? 1);\n$limit = 20;\n$offset = ($page - 1) * $limit;\n\n$search = $_GET['search'] ?? '';\n$role_filter = $_GET['role'] ?? '';\n\n$where_conditions = [];\n$params = [];\n\nif ($search) {\n    $where_conditions[] = \"(first_name LIKE ? OR last_name LIKE ? OR email LIKE ?)\";\n    $params[] = \"%$search%\";\n    $params[] = \"%$search%\";\n    $params[] = \"%$search%\";\n}\n\nif ($role_filter) {\n    $where_conditions[] = \"role = ?\";\n    $params[] = $role_filter;\n}\n\n$where_clause = $where_conditions ? 'WHERE ' . implode(' AND ', $where_conditions) : '';\n\n$stmt = $db->prepare(\"SELECT * FROM users $where_clause ORDER BY created_at DESC LIMIT $limit OFFSET $offset\");\n$stmt->execute($params);\n$users = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as total FROM users $where_clause\");\n$stmt->execute($params);\n$total_users = $stmt->fetch(PDO::FETCH_ASSOC)['total'];\n$total_pages = ceil($total_users / $limit);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>User Management - Admin</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\">E-Commerce</a>\n                    <span class=\"text-gray-400\">|</span>\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Admin</a>\n                    <span class=\"text-gray-400\">></span>\n                    <span class=\"text-gray-700 font-medium\">Users</span>\n                </div>\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Dashboard</a>\n                    <a href=\"../logout.php\" class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\">Logout</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">User Management</h1>\n            <p class=\"text-gray-600 mt-2\">Manage user accounts and permissions</p>\n        </div>\n\n        <!-- Filters -->\n        <div class=\"bg-white rounded-lg shadow mb-6\">\n            <div class=\"p-6\">\n                <form method=\"GET\" class=\"flex flex-wrap gap-4\">\n                    <div class=\"flex-1 min-w-64\">\n                        <input type=\"text\" name=\"search\" value=\"<?php echo htmlspecialchars($search); ?>\" \n                               placeholder=\"Search users...\" \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                    </div>\n                    <div>\n                        <select name=\"role\" class=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                            <option value=\"\">All Roles</option>\n                            <option value=\"customer\" <?php echo $role_filter === 'customer' ? 'selected' : ''; ?>>Customer</option>\n                            <option value=\"vendor\" <?php echo $role_filter === 'vendor' ? 'selected' : ''; ?>>Vendor</option>\n                            <option value=\"admin\" <?php echo $role_filter === 'admin' ? 'selected' : ''; ?>>Admin</option>\n                        </select>\n                    </div>\n                    <button type=\"submit\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition\">\n                        Search\n                    </button>\n                </form>\n            </div>\n        </div>\n\n        <!-- Users Table -->\n        <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-lg font-semibold text-gray-900\">Users (<?php echo number_format($total_users); ?>)</h2>\n            </div>\n            \n            <div class=\"overflow-x-auto\">\n                <table class=\"min-w-full divide-y divide-gray-200\">\n                    <thead class=\"bg-gray-50\">\n                        <tr>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">User</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Role</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Joined</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody class=\"bg-white divide-y divide-gray-200\">\n                        <?php foreach ($users as $user): ?>\n                            <tr>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <div class=\"flex items-center\">\n                                        <div class=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center\">\n                                            <span class=\"text-primary font-medium\"><?php echo substr($user['first_name'], 0, 1); ?></span>\n                                        </div>\n                                        <div class=\"ml-4\">\n                                            <div class=\"text-sm font-medium text-gray-900\">\n                                                <?php echo htmlspecialchars($user['first_name'] . ' ' . $user['last_name']); ?>\n                                            </div>\n                                            <div class=\"text-sm text-gray-500\"><?php echo htmlspecialchars($user['email']); ?></div>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \n                                        <?php echo $user['role'] === 'admin' ? 'bg-red-100 text-red-800' : \n                                            ($user['role'] === 'vendor' ? 'bg-primary/10 text-primary' : 'bg-blue-100 text-blue-800'); ?>\">\n                                        <?php echo ucfirst($user['role']); ?>\n                                    </span>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \n                                        <?php echo $user['status'] === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'; ?>\">\n                                        <?php echo ucfirst($user['status']); ?>\n                                    </span>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                    <?php echo date('M j, Y', strtotime($user['created_at'])); ?>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                                    <?php if ($user['role'] !== 'admin'): ?>\n                                        <form method=\"POST\" class=\"inline\">\n                                            <input type=\"hidden\" name=\"action\" value=\"update_status\">\n                                            <input type=\"hidden\" name=\"user_id\" value=\"<?php echo $user['id']; ?>\">\n                                            <input type=\"hidden\" name=\"status\" value=\"<?php echo $user['status'] === 'active' ? 'inactive' : 'active'; ?>\">\n                                            <button type=\"submit\" class=\"text-primary hover:text-blue-600\">\n                                                <?php echo $user['status'] === 'active' ? 'Deactivate' : 'Activate'; ?>\n                                            </button>\n                                        </form>\n                                    <?php endif; ?>\n                                </td>\n                            </tr>\n                        <?php endforeach; ?>\n                    </tbody>\n                </table>\n            </div>\n\n            <!-- Pagination -->\n            <?php if ($total_pages > 1): ?>\n                <div class=\"px-6 py-4 border-t border-gray-200\">\n                    <div class=\"flex justify-between items-center\">\n                        <div class=\"text-sm text-gray-700\">\n                            Showing <?php echo ($offset + 1); ?> to <?php echo min($offset + $limit, $total_users); ?> of <?php echo $total_users; ?> users\n                        </div>\n                        <div class=\"flex space-x-2\">\n                            <?php if ($page > 1): ?>\n                                <a href=\"?page=<?php echo $page - 1; ?>&search=<?php echo urlencode($search); ?>&role=<?php echo urlencode($role_filter); ?>\" \n                                   class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50\">Previous</a>\n                            <?php endif; ?>\n                            \n                            <?php for ($i = max(1, $page - 2); $i <= min($total_pages, $page + 2); $i++): ?>\n                                <a href=\"?page=<?php echo $i; ?>&search=<?php echo urlencode($search); ?>&role=<?php echo urlencode($role_filter); ?>\" \n                                   class=\"px-3 py-2 border rounded-lg text-sm <?php echo $i === $page ? 'bg-primary text-white border-primary' : 'border-gray-300 hover:bg-gray-50'; ?>\">\n                                    <?php echo $i; ?>\n                                </a>\n                            <?php endfor; ?>\n                            \n                            <?php if ($page < $total_pages): ?>\n                                <a href=\"?page=<?php echo $page + 1; ?>&search=<?php echo urlencode($search); ?>&role=<?php echo urlencode($role_filter); ?>\" \n                                   class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50\">Next</a>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":11895},"admin/vendor-applications.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/vendor.php';\n\nrequire_admin();\n\n$vendor_manager = new VendorManager();\n$message = '';\n\n// Handle actions\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $action = $_POST['action'];\n    $application_id = $_POST['application_id'];\n    \n    if ($action == 'approve') {\n        $result = $vendor_manager->approve_application($application_id, $_SESSION['user_id']);\n        $message = $result['message'];\n        if ($result['success']) {\n            $message .= \" Login credentials: Username: \" . $result['credentials']['username'] . \", Password: \" . $result['credentials']['password'];\n        }\n    } elseif ($action == 'reject') {\n        $result = $vendor_manager->reject_application($application_id, $_SESSION['user_id']);\n        $message = $result['message'];\n    }\n}\n\n$pending_applications = $vendor_manager->get_pending_applications();\n$all_applications = $vendor_manager->get_all_applications();\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Vendor Applications - Admin Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Admin Dashboard</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Dashboard</a>\n                    <a href=\"../logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Vendor Applications</h1>\n            <p class=\"mt-2 text-gray-600\">Review and manage vendor applications</p>\n        </div>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <!-- Pending Applications -->\n        <div class=\"bg-white shadow rounded-lg mb-8\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-xl font-semibold text-gray-900\">\n                    Pending Applications \n                    <span class=\"bg-blue-100 text-blue-800 text-sm font-medium px-2.5 py-0.5 rounded-full ml-2\">\n                        <?php echo count($pending_applications); ?>\n                    </span>\n                </h2>\n            </div>\n            \n            <?php if (empty($pending_applications)): ?>\n                <div class=\"px-6 py-8 text-center text-gray-500\">\n                    No pending applications\n                </div>\n            <?php else: ?>\n                <div class=\"divide-y divide-gray-200\">\n                    <?php foreach ($pending_applications as $app): ?>\n                        <div class=\"px-6 py-6\">\n                            <div class=\"flex items-start justify-between\">\n                                <div class=\"flex-1\">\n                                    <div class=\"flex items-center space-x-4 mb-4\">\n                                        <?php if ($app['logo_path']): ?>\n                                            <img src=\"../<?php echo $app['logo_path']; ?>\" alt=\"Logo\" class=\"w-12 h-12 rounded-full object-cover\">\n                                        <?php else: ?>\n                                            <div class=\"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center\">\n                                                <span class=\"text-accent font-medium\"><?php echo substr($app['business_name'], 0, 1); ?></span>\n                                            </div>\n                                        <?php endif; ?>\n                                        <div>\n                                            <h3 class=\"text-lg font-medium text-gray-900\"><?php echo htmlspecialchars($app['business_name']); ?></h3>\n                                            <p class=\"text-sm text-gray-500\">by <?php echo htmlspecialchars($app['name']); ?></p>\n                                        </div>\n                                    </div>\n                                    \n                                    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                                        <div>\n                                            <span class=\"text-sm font-medium text-gray-500\">Email:</span>\n                                            <p class=\"text-sm text-gray-900\"><?php echo htmlspecialchars($app['email']); ?></p>\n                                        </div>\n                                        <div>\n                                            <span class=\"text-sm font-medium text-gray-500\">Applied:</span>\n                                            <p class=\"text-sm text-gray-900\"><?php echo date('M j, Y g:i A', strtotime($app['applied_at'])); ?></p>\n                                        </div>\n                                    </div>\n                                    \n                                    <div class=\"mb-4\">\n                                        <span class=\"text-sm font-medium text-gray-500\">Description:</span>\n                                        <p class=\"text-sm text-gray-900 mt-1\"><?php echo nl2br(htmlspecialchars($app['description'])); ?></p>\n                                    </div>\n                                </div>\n                                \n                                <div class=\"flex space-x-2 ml-4\">\n                                    <form method=\"POST\" class=\"inline\">\n                                        <input type=\"hidden\" name=\"action\" value=\"approve\">\n                                        <input type=\"hidden\" name=\"application_id\" value=\"<?php echo $app['id']; ?>\">\n                                        <button type=\"submit\" \n                                                onclick=\"return confirm('Are you sure you want to approve this application?')\"\n                                                class=\"bg-green-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-600 transition duration-200\">\n                                            Approve\n                                        </button>\n                                    </form>\n                                    \n                                    <form method=\"POST\" class=\"inline\">\n                                        <input type=\"hidden\" name=\"action\" value=\"reject\">\n                                        <input type=\"hidden\" name=\"application_id\" value=\"<?php echo $app['id']; ?>\">\n                                        <button type=\"submit\" \n                                                onclick=\"return confirm('Are you sure you want to reject this application?')\"\n                                                class=\"bg-red-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-600 transition duration-200\">\n                                            Reject\n                                        </button>\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                    <?php endforeach; ?>\n                </div>\n            <?php endif; ?>\n        </div>\n        \n        <!-- All Applications History -->\n        <div class=\"bg-white shadow rounded-lg\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-xl font-semibold text-gray-900\">Application History</h2>\n            </div>\n            \n            <div class=\"overflow-x-auto\">\n                <table class=\"min-w-full divide-y divide-gray-200\">\n                    <thead class=\"bg-gray-50\">\n                        <tr>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Business</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Applicant</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Applied</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Reviewed By</th>\n                        </tr>\n                    </thead>\n                    <tbody class=\"bg-white divide-y divide-gray-200\">\n                        <?php foreach ($all_applications as $app): ?>\n                            <tr>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <div class=\"flex items-center\">\n                                        <?php if ($app['logo_path']): ?>\n                                            <img src=\"../<?php echo $app['logo_path']; ?>\" alt=\"Logo\" class=\"w-8 h-8 rounded-full object-cover mr-3\">\n                                        <?php else: ?>\n                                            <div class=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3\">\n                                                <span class=\"text-accent text-xs font-medium\"><?php echo substr($app['business_name'], 0, 1); ?></span>\n                                            </div>\n                                        <?php endif; ?>\n                                        <span class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($app['business_name']); ?></span>\n                                    </div>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <div class=\"text-sm text-gray-900\"><?php echo htmlspecialchars($app['name']); ?></div>\n                                    <div class=\"text-sm text-gray-500\"><?php echo htmlspecialchars($app['email']); ?></div>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                    <?php echo date('M j, Y', strtotime($app['applied_at'])); ?>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <?php\n                                    $status_colors = [\n                                        'pending' => 'bg-yellow-100 text-yellow-800',\n                                        'approved' => 'bg-green-100 text-green-800',\n                                        'rejected' => 'bg-red-100 text-red-800'\n                                    ];\n                                    ?>\n                                    <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full <?php echo $status_colors[$app['status']]; ?>\">\n                                        <?php echo ucfirst($app['status']); ?>\n                                    </span>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                    <?php echo $app['reviewed_by_username'] ?? '-'; ?>\n                                </td>\n                            </tr>\n                        <?php endforeach; ?>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":12645},"admin/vendor-management.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/vendor.php';\n\nrequire_admin();\n\n$vendor_manager = new VendorManager();\n$message = '';\n\n// Generate CSRF token\n$csrf_token = generate_csrf_token();\n\n// Handle badge assignment\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['assign_badge'])) {\n    if (!verify_csrf_token($_POST['csrf_token'] ?? '')) {\n        $message = 'Invalid security token. Please try again.';\n    } else {\n        $vendor_id = (int)$_POST['vendor_id'];\n        $badge_name = sanitize_input($_POST['badge_name']);\n        \n        $result = $vendor_manager->assign_badge($vendor_id, $badge_name);\n        $message = $result['message'];\n    }\n}\n\n// Handle add vendor\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['add_vendor'])) {\n    if (!verify_csrf_token($_POST['csrf_token'] ?? '')) {\n        $message = 'Invalid security token. Please try again.';\n    } else {\n        $name = sanitize_input($_POST['name']);\n        $email = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL);\n        $business_name = sanitize_input($_POST['business_name']);\n        $description = sanitize_input($_POST['description']);\n        \n        if (!$email) {\n            $message = 'Please provide a valid email address.';\n        } elseif (empty($name) || empty($business_name) || empty($description)) {\n            $message = 'All fields are required.';\n        } else {\n            $result = $vendor_manager->create_vendor_directly($name, $email, $business_name, $description);\n            $message = $result['message'];\n        }\n    }\n}\n\n// Handle delete vendor\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['delete_vendor'])) {\n    if (!verify_csrf_token($_POST['csrf_token'] ?? '')) {\n        $message = 'Invalid security token. Please try again.';\n    } else {\n        $vendor_id = (int)$_POST['vendor_id'];\n        \n        $result = $vendor_manager->delete_vendor($vendor_id);\n        $message = $result['message'];\n    }\n}\n\n$vendors = $vendor_manager->get_all_vendors();\n\n// Get available badges\n$database = new Database();\n$db = $database->getConnection();\n$stmt = $db->prepare(\"SELECT * FROM badges ORDER BY name\");\n$stmt->execute();\n$badges = $stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Vendor Management - Admin Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Admin Dashboard</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Dashboard</a>\n                    <a href=\"vendor-applications.php\" class=\"text-gray-700 hover:text-accent\">Applications</a>\n                    <a href=\"../logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"flex justify-between items-center mb-8\">\n            <div>\n                <h1 class=\"text-3xl font-bold text-gray-900\">Vendor Management</h1>\n                <p class=\"mt-2 text-gray-600\">Manage existing vendors and assign verification badges</p>\n            </div>\n            <button onclick=\"document.getElementById('addVendorModal').classList.remove('hidden')\" \n                    class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\">\n                Add New Vendor\n            </button>\n        </div>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo htmlspecialchars($message); ?>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"bg-white shadow rounded-lg\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-xl font-semibold text-gray-900\">\n                    All Vendors \n                    <span class=\"bg-blue-100 text-blue-800 text-sm font-medium px-2.5 py-0.5 rounded-full ml-2\">\n                        <?php echo count($vendors); ?>\n                    </span>\n                </h2>\n            </div>\n            \n            <?php if (empty($vendors)): ?>\n                <div class=\"px-6 py-8 text-center text-gray-500\">\n                    No vendors found\n                </div>\n            <?php else: ?>\n                <div class=\"overflow-x-auto\">\n                    <table class=\"min-w-full divide-y divide-gray-200\">\n                        <thead class=\"bg-gray-50\">\n                            <tr>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Vendor</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Contact</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Badge</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody class=\"bg-white divide-y divide-gray-200\">\n                            <?php foreach ($vendors as $vendor): ?>\n                                <tr>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"flex items-center\">\n                                            <?php if ($vendor['logo_path']): ?>\n                                                <img src=\"../<?php echo $vendor['logo_path']; ?>\" alt=\"Logo\" class=\"w-10 h-10 rounded-full object-cover mr-4\">\n                                            <?php else: ?>\n                                                <div class=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center mr-4\">\n                                                    <span class=\"text-accent font-medium\"><?php echo substr($vendor['business_name'], 0, 1); ?></span>\n                                                </div>\n                                            <?php endif; ?>\n                                            <div>\n                                                <div class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($vendor['business_name']); ?></div>\n                                                <div class=\"text-sm text-gray-500\">@<?php echo htmlspecialchars($vendor['username']); ?></div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm text-gray-900\"><?php echo htmlspecialchars($vendor['first_name'] . ' ' . $vendor['last_name']); ?></div>\n                                        <div class=\"text-sm text-gray-500\"><?php echo htmlspecialchars($vendor['email']); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <?php if ($vendor['is_verified']): ?>\n                                            <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\n                                                Verified\n                                            </span>\n                                        <?php else: ?>\n                                            <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800\">\n                                                Unverified\n                                            </span>\n                                        <?php endif; ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <?php if ($vendor['verification_badge']): ?>\n                                            <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800\">\n                                                <?php echo htmlspecialchars($vendor['verification_badge']); ?>\n                                            </span>\n                                        <?php else: ?>\n                                            <span class=\"text-sm text-gray-500\">No badge</span>\n                                        <?php endif; ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"flex items-center space-x-2\">\n                                            <form method=\"POST\" class=\"flex items-center space-x-2\">\n                                                <input type=\"hidden\" name=\"csrf_token\" value=\"<?php echo $csrf_token; ?>\">\n                                                <input type=\"hidden\" name=\"vendor_id\" value=\"<?php echo $vendor['id']; ?>\">\n                                                <select name=\"badge_name\" class=\"text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-accent focus:border-accent\">\n                                                    <option value=\"\">Select Badge</option>\n                                                    <?php foreach ($badges as $badge): ?>\n                                                        <option value=\"<?php echo $badge['name']; ?>\" <?php echo ($vendor['verification_badge'] == $badge['name']) ? 'selected' : ''; ?>>\n                                                            <?php echo htmlspecialchars($badge['name']); ?>\n                                                        </option>\n                                                    <?php endforeach; ?>\n                                                </select>\n                                                <button type=\"submit\" name=\"assign_badge\" \n                                                        class=\"bg-accent text-white px-3 py-1 rounded-md text-sm font-medium hover:bg-blue-600 transition duration-200\">\n                                                    Assign\n                                                </button>\n                                            </form>\n                                            <form method=\"POST\" class=\"inline\" onsubmit=\"return confirm('Are you sure you want to delete this vendor? This will also deactivate all their products.')\">\n                                                <input type=\"hidden\" name=\"csrf_token\" value=\"<?php echo $csrf_token; ?>\">\n                                                <input type=\"hidden\" name=\"vendor_id\" value=\"<?php echo $vendor['id']; ?>\">\n                                                <button type=\"submit\" name=\"delete_vendor\" \n                                                        class=\"bg-red-500 text-white px-3 py-1 rounded-md text-sm font-medium hover:bg-red-600 transition duration-200\">\n                                                    Delete\n                                                </button>\n                                            </form>\n                                        </div>\n                                    </td>\n                                </tr>\n                            <?php endforeach; ?>\n                        </tbody>\n                    </table>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n\n    <!-- Add Vendor Modal -->\n    <div id=\"addVendorModal\" class=\"hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n        <div class=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\n            <div class=\"mt-3 text-center\">\n                <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Add New Vendor</h3>\n                <form method=\"POST\" class=\"space-y-4\">\n                    <input type=\"hidden\" name=\"csrf_token\" value=\"<?php echo $csrf_token; ?>\">\n                    <div class=\"text-left\">\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Contact Name</label>\n                        <input type=\"text\" name=\"name\" required \n                               class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\">\n                    </div>\n                    <div class=\"text-left\">\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n                        <input type=\"email\" name=\"email\" required \n                               class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\">\n                    </div>\n                    <div class=\"text-left\">\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Business Name</label>\n                        <input type=\"text\" name=\"business_name\" required \n                               class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\">\n                    </div>\n                    <div class=\"text-left\">\n                        <label class=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                        <textarea name=\"description\" rows=\"3\" required \n                                  class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\"></textarea>\n                    </div>\n                    <div class=\"flex space-x-3 pt-3\">\n                        <button type=\"submit\" name=\"add_vendor\" \n                                class=\"flex-1 bg-accent text-white px-4 py-2 rounded-md hover:bg-blue-600 transition\">\n                            Create Vendor\n                        </button>\n                        <button type=\"button\" onclick=\"document.getElementById('addVendorModal').classList.add('hidden')\" \n                                class=\"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400 transition\">\n                            Cancel\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":15714},"api/cart-count.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/cart.php';\n\nheader('Content-Type: application/json');\n\nif (!is_logged_in()) {\n    echo json_encode(['count' => 0]);\n    exit;\n}\n\n$cart_manager = new CartManager();\n$count = $cart_manager->get_cart_count($_SESSION['user_id']);\n\necho json_encode(['count' => $count]);\n?>\n","size_bytes":338},"config/config.php":{"content":"<?php\n// Session configuration must be first, before any output\nini_set('session.cookie_httponly', 1);\nini_set('session.use_only_cookies', 1);\nini_set('session.cookie_secure', 0); // Set to 1 for HTTPS\n\nsession_start();\n\n// Site configuration\ndefine('SITE_NAME', 'Market Nest');\ndefine('SITE_URL', 'https://' . ($_SERVER['HTTP_HOST'] ?? 'localhost:5000'));\ndefine('UPLOAD_PATH', 'uploads/');\ndefine('MAX_FILE_SIZE', 5 * 1024 * 1024); // 5MB\n\n// Tracking pricing\ndefine('FREE_TRACKING_LIMIT', 2);\ndefine('STANDARD_TRACKING_PRICE', 5.99);\ndefine('PREMIUM_TRACKING_PRICE', 9.99);\n\n// Include database connection\nrequire_once 'database.php';\n\n// Helper functions\nfunction sanitize_input($data) {\n    return htmlspecialchars(strip_tags(trim($data)));\n}\n\nfunction redirect($url) {\n    header(\"Location: \" . $url);\n    exit();\n}\n\nfunction is_logged_in() {\n    return isset($_SESSION['user_id']);\n}\n\nfunction get_user_role() {\n    return $_SESSION['user_role'] ?? 'customer';\n}\n\nfunction require_login() {\n    if (!is_logged_in()) {\n        redirect('login.php');\n    }\n}\n\nfunction require_admin() {\n    require_login();\n    if (get_user_role() !== 'admin') {\n        redirect('index.php');\n    }\n}\n\nfunction require_vendor() {\n    require_login();\n    if (!in_array(get_user_role(), ['vendor', 'admin'])) {\n        redirect('index.php');\n    }\n}\n\n// CSRF Protection functions\nfunction generate_csrf_token() {\n    if (!isset($_SESSION['csrf_token'])) {\n        $_SESSION['csrf_token'] = bin2hex(random_bytes(32));\n    }\n    return $_SESSION['csrf_token'];\n}\n\nfunction verify_csrf_token($token) {\n    return isset($_SESSION['csrf_token']) && hash_equals($_SESSION['csrf_token'], $token);\n}\n\n// Additional auth helper functions\nfunction isLoggedIn() {\n    return is_logged_in();\n}\n\nfunction getCurrentUser() {\n    if (!is_logged_in()) {\n        return null;\n    }\n    \n    $database = new Database();\n    $db = $database->getConnection();\n    \n    try {\n        $stmt = $db->prepare(\"\n            SELECT u.*, ur.role \n            FROM users u \n            LEFT JOIN user_roles ur ON u.id = ur.user_id \n            WHERE u.id = ?\n        \");\n        $stmt->execute([$_SESSION['user_id']]);\n        \n        return $stmt->fetch(PDO::FETCH_ASSOC);\n        \n    } catch (PDOException $e) {\n        return null;\n    }\n}\n?>\n","size_bytes":2308},"config/database.php":{"content":"<?php\nclass Database {\n    private $host = 'localhost';\n    private $db_name = 'ecommerce_db';\n    private $username = 'root';\n    private $password = '';\n    private $conn;\n\n    public function getConnection() {\n        $this->conn = null;\n        \n        // Try MySQL first, fallback to SQLite if MySQL is not available\n        try {\n            $this->conn = new PDO(\n                \"mysql:host=\" . $this->host . \";dbname=\" . $this->db_name . \";charset=utf8mb4\",\n                $this->username,\n                $this->password,\n                array(\n                    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,\n                    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,\n                    PDO::MYSQL_ATTR_INIT_COMMAND => \"SET NAMES utf8mb4\"\n                )\n            );\n            \n        } catch(PDOException $mysql_exception) {\n            // Fallback to SQLite if MySQL is not available\n            try {\n                $sqlite_path = __DIR__ . '/../database/ecommerce.db';\n                \n                // Create database directory if it doesn't exist\n                $db_dir = dirname($sqlite_path);\n                if (!is_dir($db_dir)) {\n                    mkdir($db_dir, 0755, true);\n                }\n                \n                $this->conn = new PDO(\n                    \"sqlite:\" . $sqlite_path,\n                    null,\n                    null,\n                    array(\n                        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,\n                        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,\n                        PDO::ATTR_EMULATE_PREPARES => false\n                    )\n                );\n                \n                // Enable foreign key constraints for SQLite\n                $this->conn->exec(\"PRAGMA foreign_keys = ON\");\n                \n                // Initialize SQLite database if it's empty\n                $this->initializeSQLiteIfEmpty();\n                \n            } catch(PDOException $sqlite_exception) {\n                echo \"Database connection error: \" . $mysql_exception->getMessage() . \" (MySQL), \" . $sqlite_exception->getMessage() . \" (SQLite)\";\n            }\n        }\n        \n        return $this->conn;\n    }\n    \n    private function initializeSQLiteIfEmpty() {\n        try {\n            // Check if tables exist\n            $result = $this->conn->query(\"SELECT name FROM sqlite_master WHERE type='table' AND name='users'\");\n            if ($result->rowCount() == 0) {\n                // Database is empty, initialize it directly here to avoid recursion\n                $schema = file_get_contents(__DIR__ . '/../database/schema_sqlite.sql');\n                $statements = explode(';', $schema);\n                \n                foreach ($statements as $statement) {\n                    $statement = trim($statement);\n                    if (!empty($statement)) {\n                        $this->conn->exec($statement);\n                    }\n                }\n                \n                // Insert basic sample data\n                $this->insertSampleData();\n            }\n        } catch (Exception $e) {\n            // Ignore initialization errors\n        }\n    }\n    \n    private function insertSampleData() {\n        try {\n            // Check if categories already exist\n            $result = $this->conn->query(\"SELECT COUNT(*) as count FROM categories\");\n            $categoryCount = $result->fetch(PDO::FETCH_ASSOC)['count'];\n            \n            if ($categoryCount == 0) {\n                // Insert sample categories only if none exist\n                $categories = [\n                    ['Electronics', 'Electronic gadgets and devices', 'üì±'],\n                    ['Clothing', 'Fashion and apparel', 'üëï'],\n                    ['Home & Garden', 'Home improvement and garden items', 'üè†'],\n                    ['Books', 'Books and educational materials', 'üìö'],\n                    ['Sports', 'Sports and outdoor equipment', '‚öΩ'],\n                    ['Beauty', 'Beauty and personal care products', 'üíÑ']\n                ];\n                \n                $stmt = $this->conn->prepare(\"INSERT INTO categories (name, description, icon) VALUES (?, ?, ?)\");\n                foreach ($categories as $category) {\n                    $stmt->execute([$category[0], $category[1], $category[2]]);\n                }\n            }\n            \n            // Create a default admin user\n            $admin_password = password_hash('admin123', PASSWORD_DEFAULT);\n            $stmt = $this->conn->prepare(\"INSERT OR IGNORE INTO users (username, email, password, first_name, last_name, role) VALUES (?, ?, ?, ?, ?, ?)\");\n            $stmt->execute(['admin', 'admin@marketnest.com', $admin_password, 'Admin', 'User', 'admin']);\n        } catch (Exception $e) {\n            // Ignore sample data errors\n        }\n    }\n}\n?>","size_bytes":4852},"database/init.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/database.php';\n\nfunction initializeDatabase() {\n    try {\n        $database = new Database();\n        $conn = $database->getConnection();\n        \n        if ($conn) {\n            echo \"Database connection established successfully.\\n\";\n            \n            // Read and execute the schema\n            $schema = file_get_contents(__DIR__ . '/schema_sqlite.sql');\n            $statements = explode(';', $schema);\n            \n            foreach ($statements as $statement) {\n                $statement = trim($statement);\n                if (!empty($statement)) {\n                    $conn->exec($statement);\n                }\n            }\n            \n            echo \"Database schema created successfully.\\n\";\n            \n            // Insert sample categories\n            insertSampleData($conn);\n            \n            return true;\n        } else {\n            echo \"Failed to connect to database.\\n\";\n            return false;\n        }\n    } catch (Exception $e) {\n        echo \"Error initializing database: \" . $e->getMessage() . \"\\n\";\n        return false;\n    }\n}\n\nfunction insertSampleData($conn) {\n    // Insert sample categories\n    $categories = [\n        ['Electronics', 'Electronic gadgets and devices', 'üì±'],\n        ['Clothing', 'Fashion and apparel', 'üëï'],\n        ['Home & Garden', 'Home improvement and garden items', 'üè†'],\n        ['Books', 'Books and educational materials', 'üìö'],\n        ['Sports', 'Sports and outdoor equipment', '‚öΩ'],\n        ['Beauty', 'Beauty and personal care products', 'üíÑ']\n    ];\n    \n    $stmt = $conn->prepare(\"INSERT OR IGNORE INTO categories (name, description, icon) VALUES (?, ?, ?)\");\n    foreach ($categories as $category) {\n        $stmt->execute([$category[0], $category[1], $category[2]]);\n    }\n    \n    // Create a default admin user\n    $admin_password = password_hash('admin123', PASSWORD_DEFAULT);\n    $stmt = $conn->prepare(\"INSERT OR IGNORE INTO users (username, email, password, first_name, last_name, role) VALUES (?, ?, ?, ?, ?, ?)\");\n    $stmt->execute(['admin', 'admin@orangecart.com', $admin_password, 'Admin', 'User', 'admin']);\n    \n    $admin_id = $conn->lastInsertId();\n    if ($admin_id) {\n        $stmt = $conn->prepare(\"INSERT OR IGNORE INTO user_roles (user_id, role) VALUES (?, ?)\");\n        $stmt->execute([$admin_id, 'admin']);\n    }\n    \n    echo \"Sample data inserted successfully.\\n\";\n}\n\n// Run initialization if called directly\nif (basename(__FILE__) == basename($_SERVER[\"SCRIPT_NAME\"])) {\n    initializeDatabase();\n}\n?>","size_bytes":2574},"database/init_mysql.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/database.php';\n\nfunction initializeMySQLDatabase() {\n    try {\n        // First, connect without specifying database to create it\n        $host = 'localhost';\n        $username = 'root';\n        $password = '';\n        \n        $pdo = new PDO(\"mysql:host=$host;charset=utf8mb4\", $username, $password, [\n            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,\n            PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,\n            PDO::MYSQL_ATTR_INIT_COMMAND => \"SET NAMES utf8mb4\"\n        ]);\n        \n        echo \"Connected to MySQL server successfully.\\n\";\n        \n        // Create database if it doesn't exist\n        $pdo->exec(\"CREATE DATABASE IF NOT EXISTS ecommerce_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci\");\n        echo \"Database 'ecommerce_db' created/verified successfully.\\n\";\n        \n        // Use the database\n        $pdo->exec(\"USE ecommerce_db\");\n        \n        // Read and execute the original MySQL schema\n        $schema = file_get_contents(__DIR__ . '/schema.sql');\n        \n        // Remove the first few lines that create/use database\n        $schema = preg_replace('/^-- E-commerce Database Schema\\s*\\n/', '', $schema);\n        $schema = preg_replace('/^CREATE DATABASE.*?\\n/', '', $schema);\n        $schema = preg_replace('/^USE.*?\\n/', '', $schema);\n        \n        // Add tracking_payments table to the schema\n        $schema .= \"\n\n-- Tracking payments table\nCREATE TABLE IF NOT EXISTS tracking_payments (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    user_id INT NOT NULL,\n    shipment_id INT NOT NULL,\n    tracking_level ENUM('standard', 'premium') NOT NULL,\n    amount DECIMAL(10,2) NOT NULL,\n    status ENUM('pending', 'completed', 'failed') DEFAULT 'pending',\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (user_id) REFERENCES users(id),\n    FOREIGN KEY (shipment_id) REFERENCES shipments(id)\n);\";\n        \n        // Split into individual statements and execute\n        $statements = array_filter(array_map('trim', explode(';', $schema)));\n        \n        foreach ($statements as $statement) {\n            if (!empty($statement)) {\n                $pdo->exec($statement);\n            }\n        }\n        \n        echo \"Database schema created successfully.\\n\";\n        \n        // Insert sample data\n        insertMySQLSampleData($pdo);\n        \n        return true;\n    } catch (Exception $e) {\n        echo \"Error initializing MySQL database: \" . $e->getMessage() . \"\\n\";\n        return false;\n    }\n}\n\nfunction insertMySQLSampleData($pdo) {\n    // Insert sample categories\n    $categories = [\n        ['Electronics', 'Electronic gadgets and devices'],\n        ['Clothing', 'Fashion and apparel'],\n        ['Home & Garden', 'Home improvement and garden items'],\n        ['Books', 'Books and educational materials'],\n        ['Sports', 'Sports and outdoor equipment'],\n        ['Beauty', 'Beauty and personal care products']\n    ];\n    \n    $stmt = $pdo->prepare(\"INSERT IGNORE INTO categories (name, description) VALUES (?, ?)\");\n    foreach ($categories as $category) {\n        $stmt->execute([$category[0], $category[1]]);\n    }\n    \n    // Create a default admin user\n    $admin_password = password_hash('admin123', PASSWORD_DEFAULT);\n    $stmt = $pdo->prepare(\"INSERT IGNORE INTO users (username, email, password, first_name, last_name) VALUES (?, ?, ?, ?, ?)\");\n    $stmt->execute(['admin', 'admin@marketnest.com', $admin_password, 'Admin', 'User']);\n    \n    $admin_id = $pdo->lastInsertId();\n    if ($admin_id) {\n        $stmt = $pdo->prepare(\"UPDATE users SET role = 'admin' WHERE id = ?\");\n        $stmt->execute([$admin_id]);\n        \n        $stmt = $pdo->prepare(\"INSERT IGNORE INTO user_roles (user_id, role) VALUES (?, ?)\");\n        $stmt->execute([$admin_id, 'admin']);\n    }\n    \n    echo \"Sample data inserted successfully.\\n\";\n    echo \"Admin login - Username: admin, Password: admin123\\n\";\n}\n\n// Run initialization if called directly\nif (basename(__FILE__) == basename($_SERVER[\"SCRIPT_NAME\"])) {\n    initializeMySQLDatabase();\n}\n?>","size_bytes":4073},"includes/auth.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass Auth {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function register($username, $email, $password, $first_name, $last_name, $phone = '', $address = '', $city = '', $state = '', $zip_code = '') {\n        try {\n            // Check if user already exists\n            $stmt = $this->db->prepare(\"SELECT id FROM users WHERE username = ? OR email = ?\");\n            $stmt->execute([$username, $email]);\n            \n            if ($stmt->rowCount() > 0) {\n                return ['success' => false, 'message' => 'Username or email already exists'];\n            }\n            \n            // Hash password\n            $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n            \n            // Insert user\n            $stmt = $this->db->prepare(\"\n                INSERT INTO users (username, email, password, first_name, last_name, phone, address, city, state, zip_code) \n                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n            \");\n            \n            $stmt->execute([$username, $email, $hashed_password, $first_name, $last_name, $phone, $address, $city, $state, $zip_code]);\n            $user_id = $this->db->lastInsertId();\n            \n            // Add customer role\n            $stmt = $this->db->prepare(\"INSERT INTO user_roles (user_id, role) VALUES (?, 'customer')\");\n            $stmt->execute([$user_id]);\n            \n            return ['success' => true, 'message' => 'Registration successful'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Registration failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function login($username, $password) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT u.*, ur.role \n                FROM users u \n                LEFT JOIN user_roles ur ON u.id = ur.user_id \n                WHERE u.username = ? OR u.email = ?\n            \");\n            $stmt->execute([$username, $username]);\n            \n            if ($stmt->rowCount() == 1) {\n                $user = $stmt->fetch(PDO::FETCH_ASSOC);\n                \n                if (password_verify($password, $user['password'])) {\n                    // Set session variables\n                    $_SESSION['user_id'] = $user['id'];\n                    $_SESSION['username'] = $user['username'];\n                    $_SESSION['user_role'] = $user['role'] ?? 'customer';\n                    $_SESSION['first_name'] = $user['first_name'];\n                    $_SESSION['last_name'] = $user['last_name'];\n                    \n                    return ['success' => true, 'message' => 'Login successful'];\n                }\n            }\n            \n            return ['success' => false, 'message' => 'Invalid username or password'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Login failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function logout() {\n        session_destroy();\n        return ['success' => true, 'message' => 'Logged out successfully'];\n    }\n    \n    public function get_user_info($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT u.*, ur.role \n                FROM users u \n                LEFT JOIN user_roles ur ON u.id = ur.user_id \n                WHERE u.id = ?\n            \");\n            $stmt->execute([$user_id]);\n            \n            return $stmt->fetch(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return false;\n        }\n    }\n}\n?>\n","size_bytes":3722},"includes/cart.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass CartManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function add_to_cart($user_id, $product_id, $quantity = 1) {\n        try {\n            // Check if product exists and is active\n            $stmt = $this->db->prepare(\"SELECT stock_quantity FROM products WHERE id = ? AND status = 'active'\");\n            $stmt->execute([$product_id]);\n            $product = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if (!$product) {\n                return ['success' => false, 'message' => 'Product not found'];\n            }\n            \n            // Check if item already in cart\n            $stmt = $this->db->prepare(\"SELECT quantity FROM cart WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$user_id, $product_id]);\n            $existing = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($existing) {\n                $new_quantity = $existing['quantity'] + $quantity;\n                \n                if ($new_quantity > $product['stock_quantity']) {\n                    return ['success' => false, 'message' => 'Not enough stock available'];\n                }\n                \n                $stmt = $this->db->prepare(\"UPDATE cart SET quantity = ?, updated_at = NOW() WHERE user_id = ? AND product_id = ?\");\n                $stmt->execute([$new_quantity, $user_id, $product_id]);\n            } else {\n                if ($quantity > $product['stock_quantity']) {\n                    return ['success' => false, 'message' => 'Not enough stock available'];\n                }\n                \n                $stmt = $this->db->prepare(\"INSERT INTO cart (user_id, product_id, quantity) VALUES (?, ?, ?)\");\n                $stmt->execute([$user_id, $product_id, $quantity]);\n            }\n            \n            return ['success' => true, 'message' => 'Item added to cart'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to add to cart: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_cart_items($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT c.*, p.name, p.price, p.sale_price, p.images, p.stock_quantity, v.business_name\n                FROM cart c\n                JOIN products p ON c.product_id = p.id\n                JOIN vendors v ON p.vendor_id = v.id\n                WHERE c.user_id = ? AND p.status = 'active'\n                ORDER BY c.updated_at DESC\n            \");\n            \n            $stmt->execute([$user_id]);\n            $items = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            foreach ($items as &$item) {\n                $item['images'] = json_decode($item['images'], true) ?: [];\n                $item['current_price'] = $item['sale_price'] ?: $item['price'];\n                $item['total_price'] = $item['current_price'] * $item['quantity'];\n            }\n            \n            return $items;\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function update_cart_quantity($user_id, $product_id, $quantity) {\n        try {\n            if ($quantity <= 0) {\n                return $this->remove_from_cart($user_id, $product_id);\n            }\n            \n            // Check stock\n            $stmt = $this->db->prepare(\"SELECT stock_quantity FROM products WHERE id = ?\");\n            $stmt->execute([$product_id]);\n            $product = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($quantity > $product['stock_quantity']) {\n                return ['success' => false, 'message' => 'Not enough stock available'];\n            }\n            \n            $stmt = $this->db->prepare(\"UPDATE cart SET quantity = ?, updated_at = NOW() WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$quantity, $user_id, $product_id]);\n            \n            return ['success' => true, 'message' => 'Cart updated'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to update cart: ' . $e->getMessage()];\n        }\n    }\n    \n    public function remove_from_cart($user_id, $product_id) {\n        try {\n            $stmt = $this->db->prepare(\"DELETE FROM cart WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            return ['success' => true, 'message' => 'Item removed from cart'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to remove from cart: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_cart_count($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT SUM(quantity) as total FROM cart WHERE user_id = ?\");\n            $stmt->execute([$user_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            return $result['total'] ?: 0;\n            \n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function get_cart_total($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT SUM(c.quantity * COALESCE(p.sale_price, p.price)) as total\n                FROM cart c\n                JOIN products p ON c.product_id = p.id\n                WHERE c.user_id = ? AND p.status = 'active'\n            \");\n            \n            $stmt->execute([$user_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            return $result['total'] ?: 0;\n            \n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function clear_cart($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"DELETE FROM cart WHERE user_id = ?\");\n            $stmt->execute([$user_id]);\n            \n            return ['success' => true, 'message' => 'Cart cleared'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to clear cart'];\n        }\n    }\n}\n?>\n","size_bytes":6152},"includes/order.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass OrderManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function create_order($user_id, $cart_items, $shipping_address, $billing_address, $payment_method, $coupon_code = null) {\n        try {\n            $this->db->beginTransaction();\n            \n            // Calculate totals\n            $subtotal = 0;\n            foreach ($cart_items as $item) {\n                $subtotal += $item['current_price'] * $item['quantity'];\n            }\n            \n            $discount_amount = 0;\n            $coupon_id = null;\n            \n            // Apply coupon if provided\n            if ($coupon_code) {\n                $coupon_result = $this->apply_coupon($coupon_code, $subtotal);\n                if ($coupon_result['success']) {\n                    $discount_amount = $coupon_result['discount'];\n                    $coupon_id = $coupon_result['coupon_id'];\n                }\n            }\n            \n            $tax_amount = ($subtotal - $discount_amount) * 0.08; // 8% tax\n            $shipping_amount = 0; // Free shipping\n            $total_amount = $subtotal + $tax_amount + $shipping_amount - $discount_amount;\n            \n            // Generate order number\n            $order_number = 'ORD-' . date('Y') . '-' . str_pad(rand(1, 999999), 6, '0', STR_PAD_LEFT);\n            \n            // Set payment status based on payment method\n            $payment_status = ($payment_method == 'mobile_money_cameroon') ? 'pending' : 'completed';\n            \n            // Create order\n            $stmt = $this->db->prepare(\"\n                INSERT INTO orders (user_id, order_number, total_amount, tax_amount, shipping_amount, discount_amount, shipping_address, billing_address, payment_method, payment_status) \n                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n            \");\n            \n            $stmt->execute([\n                $user_id, $order_number, $total_amount, $tax_amount, \n                $shipping_amount, $discount_amount, $shipping_address, $billing_address, $payment_method, $payment_status\n            ]);\n            \n            $order_id = $this->db->lastInsertId();\n            \n            // Create order items\n            foreach ($cart_items as $item) {\n                $stmt = $this->db->prepare(\"\n                    INSERT INTO order_items (order_id, product_id, vendor_id, quantity, price, total) \n                    VALUES (?, ?, ?, ?, ?, ?)\n                \");\n                \n                $item_total = $item['current_price'] * $item['quantity'];\n                \n                // Get vendor_id from product\n                $stmt2 = $this->db->prepare(\"SELECT vendor_id FROM products WHERE id = ?\");\n                $stmt2->execute([$item['product_id']]);\n                $vendor_id = $stmt2->fetch(PDO::FETCH_ASSOC)['vendor_id'];\n                \n                $stmt->execute([\n                    $order_id, $item['product_id'], $vendor_id, \n                    $item['quantity'], $item['current_price'], $item_total\n                ]);\n                \n                // Update product stock\n                $stmt = $this->db->prepare(\"UPDATE products SET stock_quantity = stock_quantity - ? WHERE id = ?\");\n                $stmt->execute([$item['quantity'], $item['product_id']]);\n            }\n            \n            // Create payment record\n            $stmt = $this->db->prepare(\"\n                INSERT INTO payments (order_id, user_id, amount, payment_method, status) \n                VALUES (?, ?, ?, ?, 'completed')\n            \");\n            $stmt->execute([$order_id, $user_id, $total_amount, $payment_method]);\n            \n            // Update order payment status\n            $stmt = $this->db->prepare(\"UPDATE orders SET payment_status = 'paid', status = 'processing' WHERE id = ?\");\n            $stmt->execute([$order_id]);\n            \n            // Update coupon usage if applied\n            if ($coupon_id) {\n                $stmt = $this->db->prepare(\"UPDATE coupons SET used_count = used_count + 1 WHERE id = ?\");\n                $stmt->execute([$coupon_id]);\n            }\n            \n            // Create shipment record\n            $tracking_number = 'TRK-' . date('Ymd') . '-' . str_pad(rand(1, 99999), 5, '0', STR_PAD_LEFT);\n            $stmt = $this->db->prepare(\"\n                INSERT INTO shipments (order_id, tracking_number, carrier, status) \n                VALUES (?, ?, 'Standard Shipping', 'pending')\n            \");\n            $stmt->execute([$order_id, $tracking_number]);\n            \n            $shipment_id = $this->db->lastInsertId();\n            \n            // Add initial tracking history\n            $stmt = $this->db->prepare(\"\n                INSERT INTO tracking_history (shipment_id, status, description) \n                VALUES (?, 'Order Placed', 'Your order has been placed and is being processed')\n            \");\n            $stmt->execute([$shipment_id]);\n            \n            // Clear cart\n            $stmt = $this->db->prepare(\"DELETE FROM cart WHERE user_id = ?\");\n            $stmt->execute([$user_id]);\n            \n            $this->db->commit();\n            \n            return [\n                'success' => true, \n                'message' => 'Order placed successfully',\n                'order_id' => $order_id,\n                'order_number' => $order_number,\n                'tracking_number' => $tracking_number\n            ];\n            \n        } catch (Exception $e) {\n            $this->db->rollBack();\n            return ['success' => false, 'message' => 'Order failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_order_by_id($order_id, $user_id = null) {\n        try {\n            $where_clause = \"o.id = ?\";\n            $params = [$order_id];\n            \n            if ($user_id) {\n                $where_clause .= \" AND o.user_id = ?\";\n                $params[] = $user_id;\n            }\n            \n            $stmt = $this->db->prepare(\"\n                SELECT o.*, u.first_name, u.last_name, u.email, s.tracking_number, s.status as shipment_status\n                FROM orders o\n                JOIN users u ON o.user_id = u.id\n                LEFT JOIN shipments s ON o.id = s.order_id\n                WHERE $where_clause\n            \");\n            \n            $stmt->execute($params);\n            $order = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($order) {\n                // Get order items\n                $stmt = $this->db->prepare(\"\n                    SELECT oi.*, p.name, p.images, v.business_name\n                    FROM order_items oi\n                    JOIN products p ON oi.product_id = p.id\n                    JOIN vendors v ON oi.vendor_id = v.id\n                    WHERE oi.order_id = ?\n                \");\n                $stmt->execute([$order_id]);\n                $order['items'] = $stmt->fetchAll(PDO::FETCH_ASSOC);\n                \n                // Decode images for each item\n                foreach ($order['items'] as &$item) {\n                    $item['images'] = json_decode($item['images'], true) ?: [];\n                }\n            }\n            \n            return $order;\n            \n        } catch (PDOException $e) {\n            return false;\n        }\n    }\n    \n    public function get_user_orders($user_id, $limit = 20, $offset = 0) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT o.*, s.tracking_number, s.status as shipment_status\n                FROM orders o\n                LEFT JOIN shipments s ON o.id = s.order_id\n                WHERE o.user_id = ?\n                ORDER BY o.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $stmt->execute([$user_id, $limit, $offset]);\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_vendor_orders($vendor_id, $limit = 20, $offset = 0) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT DISTINCT o.*, u.first_name, u.last_name, s.tracking_number, s.status as shipment_status\n                FROM orders o\n                JOIN order_items oi ON o.id = oi.order_id\n                JOIN users u ON o.user_id = u.id\n                LEFT JOIN shipments s ON o.id = s.order_id\n                WHERE oi.vendor_id = ?\n                ORDER BY o.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $stmt->execute([$vendor_id, $limit, $offset]);\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function update_order_status($order_id, $status) {\n        try {\n            $stmt = $this->db->prepare(\"UPDATE orders SET status = ?, updated_at = ? WHERE id = ?\");\n            $stmt->execute([$status, date('Y-m-d H:i:s'), $order_id]);\n            \n            return ['success' => true, 'message' => 'Order status updated'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to update order status'];\n        }\n    }\n    \n    private function apply_coupon($coupon_code, $subtotal) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT * FROM coupons \n                WHERE code = ? AND is_active = 1 \n                AND (expires_at IS NULL OR expires_at > ?)\n                AND (usage_limit IS NULL OR used_count < usage_limit)\n                AND minimum_amount <= ?\n            \");\n            \n            $stmt->execute([$coupon_code, $subtotal, date('Y-m-d H:i:s')]);\n            $coupon = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if (!$coupon) {\n                return ['success' => false, 'message' => 'Invalid or expired coupon'];\n            }\n            \n            $discount = 0;\n            if ($coupon['type'] === 'percentage') {\n                $discount = ($subtotal * $coupon['value']) / 100;\n            } else {\n                $discount = $coupon['value'];\n            }\n            \n            return [\n                'success' => true,\n                'discount' => $discount,\n                'coupon_id' => $coupon['id']\n            ];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Coupon validation failed'];\n        }\n    }\n    \n    public function validate_coupon($coupon_code, $subtotal) {\n        return $this->apply_coupon($coupon_code, $subtotal);\n    }\n    \n    // Additional vendor-specific methods needed by dashboards\n    public function getVendorOrderCount($vendor_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT COUNT(DISTINCT o.id) as count \n                FROM orders o\n                JOIN order_items oi ON o.id = oi.order_id\n                WHERE oi.vendor_id = ?\n            \");\n            $stmt->execute([$vendor_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['count'];\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function getVendorEarnings($vendor_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT SUM(oi.total) as earnings \n                FROM order_items oi\n                JOIN orders o ON oi.order_id = o.id\n                WHERE oi.vendor_id = ? AND o.status != 'cancelled'\n            \");\n            $stmt->execute([$vendor_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['earnings'] ?: 0;\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function getVendorPendingOrders($vendor_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT DISTINCT o.*, u.first_name, u.last_name, s.tracking_number, s.status as shipment_status\n                FROM orders o\n                JOIN order_items oi ON o.id = oi.order_id\n                JOIN users u ON o.user_id = u.id\n                LEFT JOIN shipments s ON o.id = s.order_id\n                WHERE oi.vendor_id = ? AND o.status = 'pending'\n                ORDER BY o.created_at DESC\n            \");\n            $stmt->execute([$vendor_id]);\n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function getUserOrders($user_id, $limit = 20, $offset = 0) {\n        return $this->get_user_orders($user_id, $limit, $offset);\n    }\n    \n    public function getUserOrderCount($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT COUNT(*) as count FROM orders WHERE user_id = ?\");\n            $stmt->execute([$user_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['count'];\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function getUserTotalSpent($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT SUM(total_amount) as total FROM orders WHERE user_id = ? AND status != 'cancelled'\");\n            $stmt->execute([$user_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['total'] ?: 0;\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function get_all_pending_orders() {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT DISTINCT o.*, u.first_name, u.last_name, u.email as customer_email,\n                       v.business_name as vendor_name, v.id as vendor_id,\n                       GROUP_CONCAT(p.name, ', ') as products\n                FROM orders o\n                JOIN order_items oi ON o.id = oi.order_id\n                JOIN users u ON o.user_id = u.id\n                JOIN vendors v ON oi.vendor_id = v.id\n                JOIN products p ON oi.product_id = p.id\n                WHERE o.status = 'pending'\n                GROUP BY o.id, v.id\n                ORDER BY o.created_at DESC\n            \");\n            $stmt->execute();\n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function notify_vendor_delivery($order_id, $vendor_id, $admin_id) {\n        try {\n            // Get order details\n            $stmt = $this->db->prepare(\"\n                SELECT o.*, v.business_name, vu.email as vendor_email, vu.id as vendor_user_id\n                FROM orders o\n                JOIN order_items oi ON o.id = oi.order_id\n                JOIN vendors v ON oi.vendor_id = v.id\n                JOIN users vu ON v.user_id = vu.id\n                WHERE o.id = ? AND oi.vendor_id = ?\n                LIMIT 1\n            \");\n            $stmt->execute([$order_id, $vendor_id]);\n            $order = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if (!$order) {\n                return ['success' => false, 'message' => 'Order or vendor not found'];\n            }\n            \n            // Send notification to vendor\n            $title = \"Urgent: Complete Delivery for Order #{$order['order_number']}\";\n            $message = \"Please complete the delivery for order #{$order['order_number']} as soon as possible. Customer is waiting for their order.\";\n            \n            $stmt = $this->db->prepare(\"\n                INSERT INTO notifications (user_id, type, title, message) \n                VALUES (?, 'delivery_reminder', ?, ?)\n            \");\n            $stmt->execute([$order['vendor_user_id'], $title, $message]);\n            \n            return ['success' => true, 'message' => \"Delivery reminder sent to {$order['business_name']}\"];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to send notification: ' . $e->getMessage()];\n        }\n    }\n    \n    public function admin_update_order_status($order_id, $status) {\n        try {\n            // Validate status\n            $allowed_statuses = ['pending', 'processing', 'shipped', 'delivered', 'cancelled'];\n            if (!in_array($status, $allowed_statuses)) {\n                return ['success' => false, 'message' => 'Invalid status value'];\n            }\n            \n            $stmt = $this->db->prepare(\"UPDATE orders SET status = ?, updated_at = ? WHERE id = ?\");\n            $stmt->execute([$status, date('Y-m-d H:i:s'), $order_id]);\n            \n            return ['success' => true, 'message' => 'Order status updated successfully'];\n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to update order status: ' . $e->getMessage()];\n        }\n    }\n}\n?>\n","size_bytes":16841},"includes/product.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass ProductManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function add_product($vendor_id, $category_id, $name, $description, $price, $sale_price, $stock_quantity, $sku, $images, $is_featured = false, $is_flash_deal = false, $flash_deal_end = null) {\n        try {\n            $stmt = $this->db->prepare(\"\n                INSERT INTO products (vendor_id, category_id, name, description, price, sale_price, stock_quantity, sku, images, is_featured, is_flash_deal, flash_deal_end, admin_approved) \n                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n            \");\n            \n            $images_json = json_encode($images);\n            \n            // Admin adds products (auto-approved), vendors need approval\n            $admin_approved = ($vendor_id == 0) ? 1 : 0;\n            \n            $stmt->execute([\n                $vendor_id, $category_id, $name, $description, $price, \n                $sale_price, $stock_quantity, $sku, $images_json, \n                $is_featured, $is_flash_deal, $flash_deal_end, $admin_approved\n            ]);\n            \n            return ['success' => true, 'message' => 'Product added successfully', 'product_id' => $this->db->lastInsertId()];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to add product: ' . $e->getMessage()];\n        }\n    }\n    \n    // Admin-specific methods for product management\n    public function get_pending_products($limit = 50, $offset = 0) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, c.name as category_name, v.business_name, v.email as vendor_email\n                FROM products p \n                LEFT JOIN categories c ON p.category_id = c.id \n                LEFT JOIN vendors v ON p.vendor_id = v.id \n                WHERE p.admin_approved = 0 AND p.status = 'active'\n                ORDER BY p.created_at ASC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $stmt->execute([$limit, $offset]);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            // Decode images JSON for each product\n            foreach ($products as &$product) {\n                $product['images'] = $product['images'] ? json_decode($product['images'], true) ?: [] : [];\n            }\n            \n            return $products;\n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function approve_product($product_id, $admin_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                UPDATE products \n                SET admin_approved = 1, updated_at = ?\n                WHERE id = ? AND admin_approved = 0\n            \");\n            \n            $result = $stmt->execute([date('Y-m-d H:i:s'), $product_id]);\n            \n            if ($result && $stmt->rowCount() > 0) {\n                return ['success' => true, 'message' => 'Product approved successfully'];\n            } else {\n                return ['success' => false, 'message' => 'Product not found or already approved'];\n            }\n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to approve product: ' . $e->getMessage()];\n        }\n    }\n    \n    public function reject_product($product_id, $admin_id, $reason = '') {\n        try {\n            $stmt = $this->db->prepare(\"\n                UPDATE products \n                SET status = 'inactive', updated_at = ?\n                WHERE id = ? AND admin_approved = 0\n            \");\n            \n            $result = $stmt->execute([date('Y-m-d H:i:s'), $product_id]);\n            \n            if ($result && $stmt->rowCount() > 0) {\n                return ['success' => true, 'message' => 'Product rejected successfully'];\n            } else {\n                return ['success' => false, 'message' => 'Product not found or already processed'];\n            }\n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to reject product: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_all_products_admin($limit = 50, $offset = 0, $filter = 'all') {\n        try {\n            $where_conditions = [];\n            $params = [];\n            \n            switch ($filter) {\n                case 'pending':\n                    $where_conditions[] = \"p.admin_approved = 0 AND p.status = 'active'\";\n                    break;\n                case 'approved':\n                    $where_conditions[] = \"p.admin_approved = 1 AND p.status = 'active'\";\n                    break;\n                case 'rejected':\n                    $where_conditions[] = \"p.status = 'inactive'\";\n                    break;\n                default:\n                    // All products\n                    break;\n            }\n            \n            $where_clause = !empty($where_conditions) ? \"WHERE \" . implode(\" AND \", $where_conditions) : \"\";\n            \n            $stmt = $this->db->prepare(\"\n                SELECT p.*, c.name as category_name, v.business_name, v.email as vendor_email,\n                       AVG(r.rating) as avg_rating, COUNT(r.id) as review_count\n                FROM products p \n                LEFT JOIN categories c ON p.category_id = c.id \n                LEFT JOIN vendors v ON p.vendor_id = v.id \n                LEFT JOIN reviews r ON p.id = r.product_id\n                $where_clause\n                GROUP BY p.id\n                ORDER BY p.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $params[] = $limit;\n            $params[] = $offset;\n            \n            $stmt->execute($params);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            // Decode images JSON for each product\n            foreach ($products as &$product) {\n                $product['images'] = $product['images'] ? json_decode($product['images'], true) ?: [] : [];\n                $product['avg_rating'] = $product['avg_rating'] ? round($product['avg_rating'], 1) : 0;\n            }\n            \n            return $products;\n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_products($limit = 20, $offset = 0, $category_id = null, $search = null, $vendor_id = null, $featured_only = false) {\n        try {\n            $where_conditions = [\"p.status = 'active'\", \"p.admin_approved = 1\"];\n            $params = [];\n            \n            if ($category_id) {\n                $where_conditions[] = \"p.category_id = ?\";\n                $params[] = $category_id;\n            }\n            \n            if ($search) {\n                $where_conditions[] = \"(p.name LIKE ? OR p.description LIKE ?)\";\n                $params[] = \"%$search%\";\n                $params[] = \"%$search%\";\n            }\n            \n            if ($vendor_id) {\n                $where_conditions[] = \"p.vendor_id = ?\";\n                $params[] = $vendor_id;\n            }\n            \n            if ($featured_only) {\n                $where_conditions[] = \"p.is_featured = 1\";\n            }\n            \n            $where_clause = implode(\" AND \", $where_conditions);\n            \n            $stmt = $this->db->prepare(\"\n                SELECT p.*, c.name as category_name, v.business_name, v.is_verified, v.verification_badge,\n                       AVG(r.rating) as avg_rating, COUNT(r.id) as review_count\n                FROM products p \n                LEFT JOIN categories c ON p.category_id = c.id \n                LEFT JOIN vendors v ON p.vendor_id = v.id \n                LEFT JOIN reviews r ON p.id = r.product_id\n                WHERE $where_clause\n                GROUP BY p.id\n                ORDER BY v.is_verified DESC, p.is_featured DESC, p.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $params[] = $limit;\n            $params[] = $offset;\n            \n            $stmt->execute($params);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            // Decode images JSON for each product\n            foreach ($products as &$product) {\n                $product['images'] = $product['images'] ? json_decode($product['images'], true) ?: [] : [];\n                $product['avg_rating'] = $product['avg_rating'] ? round($product['avg_rating'], 1) : 0;\n            }\n            \n            return $products;\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_product_by_id($product_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, c.name as category_name, v.business_name, v.is_verified, v.verification_badge, v.logo_path as vendor_logo,\n                       AVG(r.rating) as avg_rating, COUNT(r.id) as review_count\n                FROM products p \n                LEFT JOIN categories c ON p.category_id = c.id \n                LEFT JOIN vendors v ON p.vendor_id = v.id \n                LEFT JOIN reviews r ON p.id = r.product_id\n                WHERE p.id = ? AND p.status = 'active'\n                GROUP BY p.id\n            \");\n            \n            $stmt->execute([$product_id]);\n            $product = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($product) {\n                $product['images'] = $product['images'] ? json_decode($product['images'], true) ?: [] : [];\n                $product['avg_rating'] = $product['avg_rating'] ? round($product['avg_rating'], 1) : 0;\n            }\n            \n            return $product;\n            \n        } catch (PDOException $e) {\n            return false;\n        }\n    }\n    \n    public function get_categories() {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT c.*, COUNT(p.id) as product_count \n                FROM categories c \n                LEFT JOIN products p ON c.id = p.category_id AND p.status = 'active'\n                GROUP BY c.id \n                ORDER BY c.name\n            \");\n            $stmt->execute();\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_flash_deals($limit = 10) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, c.name as category_name, v.business_name, v.is_verified,\n                       AVG(r.rating) as avg_rating, COUNT(r.id) as review_count\n                FROM products p \n                LEFT JOIN categories c ON p.category_id = c.id \n                LEFT JOIN vendors v ON p.vendor_id = v.id \n                LEFT JOIN reviews r ON p.id = r.product_id\n                WHERE p.is_flash_deal = 1 AND p.flash_deal_end > NOW() AND p.status = 'active'\n                GROUP BY p.id\n                ORDER BY p.flash_deal_end ASC\n                LIMIT ?\n            \");\n            \n            $stmt->execute([$limit]);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            foreach ($products as &$product) {\n                $product['images'] = json_decode($product['images'], true) ?: [];\n                $product['avg_rating'] = $product['avg_rating'] ? round($product['avg_rating'], 1) : 0;\n            }\n            \n            return $products;\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function add_to_recently_viewed($user_id, $product_id) {\n        if (!$user_id) return;\n        \n        try {\n            // Remove if already exists\n            $stmt = $this->db->prepare(\"DELETE FROM recently_viewed WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            // Add new entry\n            $stmt = $this->db->prepare(\"INSERT INTO recently_viewed (user_id, product_id) VALUES (?, ?)\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            // Keep only last 10 items\n            $stmt = $this->db->prepare(\"\n                DELETE FROM recently_viewed \n                WHERE user_id = ? AND id NOT IN (\n                    SELECT id FROM (\n                        SELECT id FROM recently_viewed \n                        WHERE user_id = ? \n                        ORDER BY viewed_at DESC \n                        LIMIT 10\n                    ) as temp\n                )\n            \");\n            $stmt->execute([$user_id, $user_id]);\n            \n        } catch (PDOException $e) {\n            // Ignore errors for recently viewed\n        }\n    }\n    \n    public function get_recently_viewed($user_id, $limit = 10) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, rv.viewed_at\n                FROM recently_viewed rv\n                JOIN products p ON rv.product_id = p.id\n                WHERE rv.user_id = ? AND p.status = 'active'\n                ORDER BY rv.viewed_at DESC\n                LIMIT ?\n            \");\n            \n            $stmt->execute([$user_id, $limit]);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            foreach ($products as &$product) {\n                $product['images'] = json_decode($product['images'], true) ?: [];\n            }\n            \n            return $products;\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function add_review($user_id, $product_id, $order_id, $rating, $title, $comment) {\n        try {\n            $stmt = $this->db->prepare(\"\n                INSERT INTO reviews (user_id, product_id, order_id, rating, title, comment) \n                VALUES (?, ?, ?, ?, ?, ?)\n            \");\n            \n            $stmt->execute([$user_id, $product_id, $order_id, $rating, $title, $comment]);\n            \n            return ['success' => true, 'message' => 'Review added successfully'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to add review: ' . $e->getMessage()];\n        }\n    }\n    \n    public function getFeaturedProducts($limit = 10) {\n        return $this->get_products($limit, 0, null, null, null, true);\n    }\n    \n    public function getCategories() {\n        return $this->get_categories();\n    }\n    \n    public function getFlashDeals($limit = 10) {\n        return $this->get_flash_deals($limit);\n    }\n    \n    public function get_product_reviews($product_id, $limit = 10, $offset = 0) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT r.*, u.first_name, u.last_name, u.username\n                FROM reviews r\n                JOIN users u ON r.user_id = u.id\n                WHERE r.product_id = ?\n                ORDER BY r.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $stmt->execute([$product_id, $limit, $offset]);\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    // Additional vendor-specific methods needed by dashboards\n    public function getVendorProducts($vendor_id, $limit = 20, $offset = 0) {\n        return $this->get_products($limit, $offset, null, null, $vendor_id);\n    }\n    \n    public function getVendorProductCount($vendor_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT COUNT(*) as count FROM products WHERE vendor_id = ? AND status = 'active'\");\n            $stmt->execute([$vendor_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['count'];\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function getVendorTopProducts($vendor_id, $limit = 5) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, SUM(oi.quantity) as total_sold,\n                       AVG(r.rating) as avg_rating, COUNT(r.id) as review_count\n                FROM products p\n                LEFT JOIN order_items oi ON p.id = oi.product_id\n                LEFT JOIN reviews r ON p.id = r.product_id\n                WHERE p.vendor_id = ? AND p.status = 'active'\n                GROUP BY p.id\n                ORDER BY total_sold DESC, p.created_at DESC\n                LIMIT ?\n            \");\n            $stmt->execute([$vendor_id, $limit]);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            // Decode images for each product\n            foreach ($products as &$product) {\n                $product['images'] = json_decode($product['images'], true) ?: [];\n                $product['total_sold'] = $product['total_sold'] ?: 0;\n                $product['avg_rating'] = $product['avg_rating'] ? round($product['avg_rating'], 1) : 0;\n            }\n            \n            return $products;\n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function getWishlistCount($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT COUNT(*) as count FROM wishlist WHERE user_id = ?\");\n            $stmt->execute([$user_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['count'];\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n}\n?>\n","size_bytes":17399},"includes/tracking.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass TrackingManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function get_shipment_by_tracking($tracking_number, $user_id = null) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT s.*, o.order_number, o.user_id, o.total_amount,\n                       u.first_name, u.last_name, u.free_trackings_used\n                FROM shipments s\n                JOIN orders o ON s.order_id = o.id\n                JOIN users u ON o.user_id = u.id\n                WHERE s.tracking_number = ?\n            \");\n            \n            $stmt->execute([$tracking_number]);\n            $shipment = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($shipment) {\n                // Get tracking history\n                $stmt = $this->db->prepare(\"\n                    SELECT * FROM tracking_history \n                    WHERE shipment_id = ? \n                    ORDER BY timestamp ASC\n                \");\n                $stmt->execute([$shipment['id']]);\n                $shipment['history'] = $stmt->fetchAll(PDO::FETCH_ASSOC);\n                \n                // Determine tracking level based on user and payment\n                $shipment['tracking_level'] = $this->get_tracking_level($shipment, $user_id);\n            }\n            \n            return $shipment;\n            \n        } catch (PDOException $e) {\n            return false;\n        }\n    }\n    \n    public function get_tracking_level($shipment, $user_id = null) {\n        // If user is not logged in, only basic tracking\n        if (!$user_id) {\n            return 'basic';\n        }\n        \n        // If it's the shipment owner, check their free tracking usage\n        if ($user_id == $shipment['user_id']) {\n            if ($shipment['free_trackings_used'] < FREE_TRACKING_LIMIT) {\n                return 'basic';\n            }\n        }\n        \n        // Check if user has paid for advanced tracking for this shipment\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT tracking_level FROM tracking_payments \n                WHERE user_id = ? AND shipment_id = ? AND status = 'completed'\n                ORDER BY created_at DESC LIMIT 1\n            \");\n            $stmt->execute([$user_id, $shipment['id']]);\n            $payment = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($payment) {\n                return $payment['tracking_level'];\n            }\n            \n            return 'basic';\n            \n        } catch (PDOException $e) {\n            return 'basic';\n        }\n    }\n    \n    public function increment_free_tracking_usage($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                UPDATE users \n                SET free_trackings_used = free_trackings_used + 1 \n                WHERE id = ?\n            \");\n            $stmt->execute([$user_id]);\n            \n        } catch (PDOException $e) {\n            // Ignore errors\n        }\n    }\n    \n    public function purchase_advanced_tracking($user_id, $shipment_id, $tracking_level, $amount) {\n        try {\n            $this->db->beginTransaction();\n            \n            // Create tracking payment record\n            $stmt = $this->db->prepare(\"\n                INSERT INTO tracking_payments (user_id, shipment_id, tracking_level, amount, status) \n                VALUES (?, ?, ?, ?, 'completed')\n            \");\n            $stmt->execute([$user_id, $shipment_id, $tracking_level, $amount]);\n            \n            $this->db->commit();\n            \n            return ['success' => true, 'message' => 'Advanced tracking purchased successfully'];\n            \n        } catch (Exception $e) {\n            $this->db->rollBack();\n            return ['success' => false, 'message' => 'Payment failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function update_shipment_status($shipment_id, $status, $location = null, $description = null) {\n        try {\n            $this->db->beginTransaction();\n            \n            // Update shipment (compatible with both MySQL and SQLite)\n            $stmt = $this->db->prepare(\"\n                UPDATE shipments \n                SET status = ?, current_location = ?, updated_at = CURRENT_TIMESTAMP \n                WHERE id = ?\n            \");\n            $stmt->execute([$status, $location, $shipment_id]);\n            \n            // Add tracking history\n            $stmt = $this->db->prepare(\"\n                INSERT INTO tracking_history (shipment_id, status, location, description) \n                VALUES (?, ?, ?, ?)\n            \");\n            $stmt->execute([$shipment_id, $status, $location, $description]);\n            \n            // Update order status if delivered\n            if ($status === 'delivered') {\n                $stmt = $this->db->prepare(\"\n                    UPDATE orders o\n                    JOIN shipments s ON o.id = s.order_id\n                    SET o.status = 'delivered'\n                    WHERE s.id = ?\n                \");\n                $stmt->execute([$shipment_id]);\n                \n                $stmt = $this->db->prepare(\"\n                    UPDATE shipments \n                    SET delivered_at = CURRENT_TIMESTAMP \n                    WHERE id = ?\n                \");\n                $stmt->execute([$shipment_id]);\n            }\n            \n            $this->db->commit();\n            \n            return ['success' => true, 'message' => 'Shipment status updated'];\n            \n        } catch (Exception $e) {\n            $this->db->rollBack();\n            return ['success' => false, 'message' => 'Update failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_all_shipments($limit = 50, $offset = 0) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT s.*, o.order_number, u.first_name, u.last_name\n                FROM shipments s\n                JOIN orders o ON s.order_id = o.id\n                JOIN users u ON o.user_id = u.id\n                ORDER BY s.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $stmt->execute([$limit, $offset]);\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_tracking_progress_percentage($status) {\n        $progress_map = [\n            'pending' => 10,\n            'picked_up' => 25,\n            'in_transit' => 50,\n            'out_for_delivery' => 75,\n            'delivered' => 100\n        ];\n        \n        return $progress_map[$status] ?? 0;\n    }\n}\n\n// Note: tracking_payments table should be created through the main schema initialization\n?>\n","size_bytes":6847},"includes/vendor.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass VendorManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function submit_application($name, $email, $business_name, $description, $logo_path = null) {\n        try {\n            // Check if email already has an application\n            $stmt = $this->db->prepare(\"SELECT id FROM vendor_applications WHERE email = ? AND status = 'pending'\");\n            $stmt->execute([$email]);\n            \n            if ($stmt->rowCount() > 0) {\n                return ['success' => false, 'message' => 'You already have a pending application'];\n            }\n            \n            // Check if email is already a vendor\n            $stmt = $this->db->prepare(\"\n                SELECT v.id FROM vendors v \n                JOIN users u ON v.user_id = u.id \n                WHERE u.email = ?\n            \");\n            $stmt->execute([$email]);\n            \n            if ($stmt->rowCount() > 0) {\n                return ['success' => false, 'message' => 'This email is already associated with a vendor account'];\n            }\n            \n            // Insert application\n            $stmt = $this->db->prepare(\"\n                INSERT INTO vendor_applications (name, email, business_name, description, logo_path) \n                VALUES (?, ?, ?, ?, ?)\n            \");\n            \n            $stmt->execute([$name, $email, $business_name, $description, $logo_path]);\n            \n            return ['success' => true, 'message' => 'Application submitted successfully! We will review it within 24-48 hours.'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Application failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_pending_applications() {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT * FROM vendor_applications \n                WHERE status = 'pending' \n                ORDER BY applied_at DESC\n            \");\n            $stmt->execute();\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_all_applications() {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT va.*, u.username as reviewed_by_username \n                FROM vendor_applications va \n                LEFT JOIN users u ON va.reviewed_by = u.id \n                ORDER BY va.applied_at DESC\n            \");\n            $stmt->execute();\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function approve_application($application_id, $admin_id) {\n        try {\n            $this->db->beginTransaction();\n            \n            // Get application details\n            $stmt = $this->db->prepare(\"SELECT * FROM vendor_applications WHERE id = ?\");\n            $stmt->execute([$application_id]);\n            $application = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if (!$application) {\n                throw new Exception('Application not found');\n            }\n            \n            // Create user account for vendor\n            $username = $this->generate_unique_username($application['business_name']);\n            $temp_password = bin2hex(random_bytes(8));\n            $hashed_password = password_hash($temp_password, PASSWORD_DEFAULT);\n            \n            $stmt = $this->db->prepare(\"\n                INSERT INTO users (username, email, password, first_name, last_name) \n                VALUES (?, ?, ?, ?, ?)\n            \");\n            $stmt->execute([\n                $username, \n                $application['email'], \n                $hashed_password, \n                $application['name'], \n                'Vendor'\n            ]);\n            \n            $user_id = $this->db->lastInsertId();\n            \n            // Add vendor role\n            $stmt = $this->db->prepare(\"INSERT INTO user_roles (user_id, role) VALUES (?, 'vendor')\");\n            $stmt->execute([$user_id]);\n            \n            // Create vendor record\n            $stmt = $this->db->prepare(\"\n                INSERT INTO vendors (user_id, business_name, description, logo_path) \n                VALUES (?, ?, ?, ?)\n            \");\n            $stmt->execute([\n                $user_id, \n                $application['business_name'], \n                $application['description'], \n                $application['logo_path']\n            ]);\n            \n            // Update application status\n            $stmt = $this->db->prepare(\"\n                UPDATE vendor_applications \n                SET status = 'approved', reviewed_at = NOW(), reviewed_by = ? \n                WHERE id = ?\n            \");\n            $stmt->execute([$admin_id, $application_id]);\n            \n            // Send notification to vendor\n            $this->send_notification($user_id, 'vendor_approved', 'Vendor Application Approved', \n                \"Congratulations! Your vendor application has been approved. Your login credentials: Username: {$username}, Temporary Password: {$temp_password}. Please change your password after first login.\");\n            \n            $this->db->commit();\n            \n            return ['success' => true, 'message' => 'Vendor application approved successfully', 'credentials' => ['username' => $username, 'password' => $temp_password]];\n            \n        } catch (Exception $e) {\n            $this->db->rollBack();\n            return ['success' => false, 'message' => 'Approval failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function reject_application($application_id, $admin_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                UPDATE vendor_applications \n                SET status = 'rejected', reviewed_at = NOW(), reviewed_by = ? \n                WHERE id = ?\n            \");\n            $stmt->execute([$admin_id, $application_id]);\n            \n            return ['success' => true, 'message' => 'Application rejected'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Rejection failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function assign_badge($vendor_id, $badge_name) {\n        try {\n            $stmt = $this->db->prepare(\"\n                UPDATE vendors \n                SET verification_badge = ?, is_verified = TRUE \n                WHERE id = ?\n            \");\n            $stmt->execute([$badge_name, $vendor_id]);\n            \n            return ['success' => true, 'message' => 'Badge assigned successfully'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Badge assignment failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_all_vendors() {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT v.*, u.username, u.email, u.first_name, u.last_name \n                FROM vendors v \n                JOIN users u ON v.user_id = u.id \n                ORDER BY v.is_verified DESC, v.created_at DESC\n            \");\n            $stmt->execute();\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function create_vendor_directly($name, $email, $business_name, $description) {\n        try {\n            $this->db->beginTransaction();\n            \n            // Check if email already exists\n            $stmt = $this->db->prepare(\"SELECT id FROM users WHERE email = ?\");\n            $stmt->execute([$email]);\n            \n            if ($stmt->rowCount() > 0) {\n                throw new Exception('User with this email already exists');\n            }\n            \n            // Create user account for vendor\n            $username = $this->generate_unique_username($business_name);\n            $temp_password = bin2hex(random_bytes(8));\n            $hashed_password = password_hash($temp_password, PASSWORD_DEFAULT);\n            \n            $stmt = $this->db->prepare(\"\n                INSERT INTO users (username, email, password, first_name, last_name) \n                VALUES (?, ?, ?, ?, ?)\n            \");\n            $stmt->execute([\n                $username, \n                $email, \n                $hashed_password, \n                $name, \n                'Vendor'\n            ]);\n            \n            $user_id = $this->db->lastInsertId();\n            \n            // Add vendor role\n            $stmt = $this->db->prepare(\"INSERT INTO user_roles (user_id, role) VALUES (?, 'vendor')\");\n            $stmt->execute([$user_id]);\n            \n            // Create vendor record\n            $stmt = $this->db->prepare(\"\n                INSERT INTO vendors (user_id, business_name, description) \n                VALUES (?, ?, ?)\n            \");\n            $stmt->execute([\n                $user_id, \n                $business_name, \n                $description\n            ]);\n            \n            $this->db->commit();\n            \n            return ['success' => true, 'message' => \"Vendor '{$business_name}' created successfully. Login: {$username} / {$temp_password}\"];\n            \n        } catch (Exception $e) {\n            $this->db->rollBack();\n            return ['success' => false, 'message' => 'Failed to create vendor: ' . $e->getMessage()];\n        }\n    }\n    \n    public function delete_vendor($vendor_id) {\n        try {\n            $this->db->beginTransaction();\n            \n            // Get vendor details first\n            $stmt = $this->db->prepare(\"\n                SELECT v.*, u.username, u.email \n                FROM vendors v \n                JOIN users u ON v.user_id = u.id \n                WHERE v.id = ?\n            \");\n            $stmt->execute([$vendor_id]);\n            $vendor = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if (!$vendor) {\n                throw new Exception('Vendor not found');\n            }\n            \n            // Deactivate products from this vendor\n            $stmt = $this->db->prepare(\"UPDATE products SET status = 'inactive' WHERE vendor_id = ?\");\n            $stmt->execute([$vendor_id]);\n            \n            // Delete vendor record\n            $stmt = $this->db->prepare(\"DELETE FROM vendors WHERE id = ?\");\n            $stmt->execute([$vendor_id]);\n            \n            // Delete user roles\n            $stmt = $this->db->prepare(\"DELETE FROM user_roles WHERE user_id = ?\");\n            $stmt->execute([$vendor['user_id']]);\n            \n            // Delete user account\n            $stmt = $this->db->prepare(\"DELETE FROM users WHERE id = ?\");\n            $stmt->execute([$vendor['user_id']]);\n            \n            $this->db->commit();\n            \n            return ['success' => true, 'message' => \"Vendor '{$vendor['business_name']}' deleted successfully\"];\n            \n        } catch (Exception $e) {\n            $this->db->rollBack();\n            return ['success' => false, 'message' => 'Failed to delete vendor: ' . $e->getMessage()];\n        }\n    }\n\n    private function generate_unique_username($base_name, $max_attempts = 10) {\n        $base_username = strtolower(str_replace(' ', '_', $base_name));\n        \n        for ($attempt = 1; $attempt <= $max_attempts; $attempt++) {\n            $username = $base_username . '_' . random_int(1000, 9999);\n            \n            // Check if username already exists\n            $stmt = $this->db->prepare(\"SELECT id FROM users WHERE username = ?\");\n            $stmt->execute([$username]);\n            \n            if ($stmt->rowCount() === 0) {\n                return $username; // Username is unique\n            }\n        }\n        \n        // If we couldn't generate a unique username after max attempts, \n        // use timestamp to ensure uniqueness\n        return $base_username . '_' . time() . '_' . random_int(100, 999);\n    }\n\n    private function send_notification($user_id, $type, $title, $message) {\n        try {\n            $stmt = $this->db->prepare(\"\n                INSERT INTO notifications (user_id, type, title, message) \n                VALUES (?, ?, ?, ?)\n            \");\n            $stmt->execute([$user_id, $type, $title, $message]);\n            \n        } catch (PDOException $e) {\n            // Log error but don't fail the main operation\n            error_log(\"Notification failed: \" . $e->getMessage());\n        }\n    }\n}\n?>\n","size_bytes":12661},"includes/wishlist.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass WishlistManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function add_to_wishlist($user_id, $product_id) {\n        try {\n            // Use INSERT OR IGNORE for SQLite compatibility, but will work with MySQL too\n            $stmt = $this->db->prepare(\"INSERT OR IGNORE INTO wishlist (user_id, product_id) VALUES (?, ?)\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            return ['success' => true, 'message' => 'Added to wishlist'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to add to wishlist'];\n        }\n    }\n    \n    public function remove_from_wishlist($user_id, $product_id) {\n        try {\n            $stmt = $this->db->prepare(\"DELETE FROM wishlist WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            return ['success' => true, 'message' => 'Removed from wishlist'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to remove from wishlist'];\n        }\n    }\n    \n    public function get_wishlist($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, w.created_at as added_at\n                FROM wishlist w\n                JOIN products p ON w.product_id = p.id\n                WHERE w.user_id = ? AND p.status = 'active'\n                ORDER BY w.created_at DESC\n            \");\n            \n            $stmt->execute([$user_id]);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            foreach ($products as &$product) {\n                $product['images'] = $product['images'] ? json_decode($product['images'], true) ?: [] : [];\n            }\n            \n            return $products;\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function is_in_wishlist($user_id, $product_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT id FROM wishlist WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            return $stmt->rowCount() > 0;\n            \n        } catch (PDOException $e) {\n            return false;\n        }\n    }\n}\n?>\n","size_bytes":2455},"user/dashboard.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/auth.php';\nrequire_once '../includes/order.php';\nrequire_once '../includes/product.php';\n\n// Check if user is logged in\nif (!isLoggedIn()) {\n    header('Location: ../login.php');\n    exit();\n}\n\n$user = getCurrentUser();\nif ($user['role'] !== 'customer') {\n    header('Location: ../index.php');\n    exit();\n}\n\n$orderManager = new OrderManager();\n$productManager = new ProductManager();\n\n// Get user statistics\n$recentOrders = $orderManager->getUserOrders($user['id'], 5);\n$totalOrders = $orderManager->getUserOrderCount($user['id']);\n$totalSpent = $orderManager->getUserTotalSpent($user['id']);\n$wishlistCount = $productManager->getWishlistCount($user['id']);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>My Dashboard - E-Commerce</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between h-16\">\n                <div class=\"flex items-center\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\">E-Commerce</a>\n                </div>\n                <div class=\"flex items-center space-x-4\">\n                    <span class=\"text-gray-700\">Welcome, <?php echo htmlspecialchars($user['first_name']); ?>!</span>\n                    <a href=\"../logout.php\" class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\">Logout</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <!-- Dashboard Header -->\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">My Dashboard</h1>\n            <p class=\"text-gray-600 mt-2\">Manage your orders, profile, and preferences</p>\n        </div>\n\n        <!-- Stats Cards -->\n        <div class=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-accent/10 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $totalOrders; ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-green-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Spent</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\">$<?php echo number_format($totalSpent, 2); ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-red-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Wishlist Items</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $wishlistCount; ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-blue-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Addresses</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\">2</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <!-- Recent Orders -->\n            <div class=\"lg:col-span-2\">\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Recent Orders</h2>\n                    </div>\n                    <div class=\"p-6\">\n                        <?php if (empty($recentOrders)): ?>\n                            <p class=\"text-gray-500 text-center py-8\">No orders yet. <a href=\"../products.php\" class=\"text-primary hover:underline\">Start shopping!</a></p>\n                        <?php else: ?>\n                            <div class=\"space-y-4\">\n                                <?php foreach ($recentOrders as $order): ?>\n                                    <div class=\"border border-gray-200 rounded-lg p-4\">\n                                        <div class=\"flex justify-between items-start\">\n                                            <div>\n                                                <p class=\"font-semibold text-gray-900\">Order #<?php echo $order['order_number']; ?></p>\n                                                <p class=\"text-sm text-gray-600\"><?php echo date('M j, Y', strtotime($order['created_at'])); ?></p>\n                                                <p class=\"text-sm text-gray-600\"><?php echo $order['item_count']; ?> items</p>\n                                            </div>\n                                            <div class=\"text-right\">\n                                                <p class=\"font-semibold text-gray-900\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                                                <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \n                                                    <?php echo $order['status'] === 'delivered' ? 'bg-green-100 text-green-800' : \n                                                        ($order['status'] === 'shipped' ? 'bg-blue-100 text-blue-800' : \n                                                        ($order['status'] === 'processing' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800')); ?>\">\n                                                    <?php echo ucfirst($order['status']); ?>\n                                                </span>\n                                            </div>\n                                        </div>\n                                        <div class=\"mt-3 flex space-x-3\">\n                                            <a href=\"../order-detail.php?id=<?php echo $order['id']; ?>\" class=\"text-primary hover:underline text-sm\">View Details</a>\n                                            <?php if ($order['tracking_number']): ?>\n                                                <a href=\"../track.php?tracking=<?php echo $order['tracking_number']; ?>\" class=\"text-primary hover:underline text-sm\">Track Package</a>\n                                            <?php endif; ?>\n                                        </div>\n                                    </div>\n                                <?php endforeach; ?>\n                            </div>\n                            <div class=\"mt-6 text-center\">\n                                <a href=\"../order-history.php\" class=\"text-primary hover:underline\">View All Orders</a>\n                            </div>\n                        <?php endif; ?>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Quick Actions -->\n            <div class=\"space-y-6\">\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Quick Actions</h2>\n                    </div>\n                    <div class=\"p-6 space-y-4\">\n                        <a href=\"../products.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">Browse Products</span>\n                        </a>\n                        \n                        <a href=\"../cart.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v5a2 2 0 01-2 2H9a2 2 0 01-2-2v-5m6-5V6a2 2 0 00-2-2H9a2 2 0 00-2 2v3\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">View Cart</span>\n                        </a>\n                        \n                        <a href=\"wishlist.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">My Wishlist</span>\n                        </a>\n                        \n                        <a href=\"profile.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">Edit Profile</span>\n                        </a>\n                        \n                        <a href=\"../track.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">Track Shipment</span>\n                        </a>\n                    </div>\n                </div>\n\n                <!-- Account Info -->\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Account Info</h2>\n                    </div>\n                    <div class=\"p-6\">\n                        <div class=\"space-y-3\">\n                            <div>\n                                <p class=\"text-sm text-gray-600\">Name</p>\n                                <p class=\"font-medium\"><?php echo htmlspecialchars($user['first_name'] . ' ' . $user['last_name']); ?></p>\n                            </div>\n                            <div>\n                                <p class=\"text-sm text-gray-600\">Email</p>\n                                <p class=\"font-medium\"><?php echo htmlspecialchars($user['email']); ?></p>\n                            </div>\n                            <div>\n                                <p class=\"text-sm text-gray-600\">Member Since</p>\n                                <p class=\"font-medium\"><?php echo date('M Y', strtotime($user['created_at'])); ?></p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":14509},"vendor/add-product.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/auth.php';\nrequire_once '../includes/product.php';\n\n// Check if user is logged in and is a vendor\nif (!isLoggedIn()) {\n    header('Location: ../login.php');\n    exit();\n}\n\n$user = getCurrentUser();\nif ($user['role'] !== 'vendor') {\n    header('Location: ../index.php');\n    exit();\n}\n\n$productManager = new ProductManager();\n$categories = $productManager->getCategories();\n\n$success = false;\n$error = '';\n\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    $name = trim($_POST['name']);\n    $description = trim($_POST['description']);\n    $price = floatval($_POST['price']);\n    $category_id = intval($_POST['category_id']);\n    $stock_quantity = intval($_POST['stock_quantity']);\n    $sku = trim($_POST['sku']);\n    $weight = floatval($_POST['weight']);\n    $dimensions = trim($_POST['dimensions']);\n    \n    // Handle image upload\n    $image_url = '';\n    if (isset($_FILES['image']) && $_FILES['image']['error'] === UPLOAD_ERR_OK) {\n        $upload_dir = '../uploads/products/';\n        if (!file_exists($upload_dir)) {\n            mkdir($upload_dir, 0777, true);\n        }\n        \n        $file_extension = pathinfo($_FILES['image']['name'], PATHINFO_EXTENSION);\n        $filename = uniqid() . '.' . $file_extension;\n        $upload_path = $upload_dir . $filename;\n        \n        if (move_uploaded_file($_FILES['image']['tmp_name'], $upload_path)) {\n            $image_url = 'uploads/products/' . $filename;\n        }\n    }\n    \n    if ($name && $description && $price > 0 && $category_id && $stock_quantity >= 0) {\n        $product_id = $productManager->addProduct([\n            'vendor_id' => $user['id'],\n            'name' => $name,\n            'description' => $description,\n            'price' => $price,\n            'category_id' => $category_id,\n            'stock_quantity' => $stock_quantity,\n            'sku' => $sku,\n            'weight' => $weight,\n            'dimensions' => $dimensions,\n            'image_url' => $image_url,\n            'status' => 'active'\n        ]);\n        \n        if ($product_id) {\n            $success = true;\n        } else {\n            $error = 'Failed to add product. Please try again.';\n        }\n    } else {\n        $error = 'Please fill in all required fields.';\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Add Product - Vendor Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\">E-Commerce</a>\n                    <span class=\"text-gray-400\">|</span>\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Vendor</a>\n                    <span class=\"text-gray-400\">></span>\n                    <span class=\"text-gray-700 font-medium\">Add Product</span>\n                </div>\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Dashboard</a>\n                    <a href=\"../logout.php\" class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\">Logout</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Add New Product</h1>\n            <p class=\"text-gray-600 mt-2\">Create a new product listing for your store</p>\n        </div>\n\n        <?php if ($success): ?>\n            <div class=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6\">\n                Product added successfully! <a href=\"products.php\" class=\"underline\">View your products</a>\n            </div>\n        <?php endif; ?>\n\n        <?php if ($error): ?>\n            <div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\">\n                <?php echo htmlspecialchars($error); ?>\n            </div>\n        <?php endif; ?>\n\n        <div class=\"bg-white rounded-lg shadow\">\n            <form method=\"POST\" enctype=\"multipart/form-data\" class=\"p-6 space-y-6\">\n                <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                        <label for=\"name\" class=\"block text-sm font-medium text-gray-700 mb-2\">Product Name *</label>\n                        <input type=\"text\" id=\"name\" name=\"name\" required \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['name'] ?? ''); ?>\">\n                    </div>\n\n                    <div>\n                        <label for=\"sku\" class=\"block text-sm font-medium text-gray-700 mb-2\">SKU</label>\n                        <input type=\"text\" id=\"sku\" name=\"sku\" \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['sku'] ?? ''); ?>\">\n                    </div>\n                </div>\n\n                <div>\n                    <label for=\"description\" class=\"block text-sm font-medium text-gray-700 mb-2\">Description *</label>\n                    <textarea id=\"description\" name=\"description\" rows=\"4\" required \n                              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\"><?php echo htmlspecialchars($_POST['description'] ?? ''); ?></textarea>\n                </div>\n\n                <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div>\n                        <label for=\"price\" class=\"block text-sm font-medium text-gray-700 mb-2\">Price ($) *</label>\n                        <input type=\"number\" id=\"price\" name=\"price\" step=\"0.01\" min=\"0\" required \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['price'] ?? ''); ?>\">\n                    </div>\n\n                    <div>\n                        <label for=\"category_id\" class=\"block text-sm font-medium text-gray-700 mb-2\">Category *</label>\n                        <select id=\"category_id\" name=\"category_id\" required \n                                class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\">\n                            <option value=\"\">Select Category</option>\n                            <?php foreach ($categories as $category): ?>\n                                <option value=\"<?php echo $category['id']; ?>\" \n                                        <?php echo ($_POST['category_id'] ?? '') == $category['id'] ? 'selected' : ''; ?>>\n                                    <?php echo htmlspecialchars($category['name']); ?>\n                                </option>\n                            <?php endforeach; ?>\n                        </select>\n                    </div>\n\n                    <div>\n                        <label for=\"stock_quantity\" class=\"block text-sm font-medium text-gray-700 mb-2\">Stock Quantity *</label>\n                        <input type=\"number\" id=\"stock_quantity\" name=\"stock_quantity\" min=\"0\" required \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['stock_quantity'] ?? ''); ?>\">\n                    </div>\n                </div>\n\n                <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                        <label for=\"weight\" class=\"block text-sm font-medium text-gray-700 mb-2\">Weight (lbs)</label>\n                        <input type=\"number\" id=\"weight\" name=\"weight\" step=\"0.01\" min=\"0\" \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['weight'] ?? ''); ?>\">\n                    </div>\n\n                    <div>\n                        <label for=\"dimensions\" class=\"block text-sm font-medium text-gray-700 mb-2\">Dimensions (L x W x H)</label>\n                        <input type=\"text\" id=\"dimensions\" name=\"dimensions\" placeholder=\"e.g., 10 x 8 x 6 inches\"\n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['dimensions'] ?? ''); ?>\">\n                    </div>\n                </div>\n\n                <div>\n                    <label for=\"image\" class=\"block text-sm font-medium text-gray-700 mb-2\">Product Image</label>\n                    <input type=\"file\" id=\"image\" name=\"image\" accept=\"image/*\" \n                           class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent\">\n                    <p class=\"text-sm text-gray-500 mt-1\">Upload a high-quality image of your product (JPG, PNG, GIF)</p>\n                </div>\n\n                <div class=\"flex justify-end space-x-4\">\n                    <a href=\"dashboard.php\" class=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition\">\n                        Cancel\n                    </a>\n                    <button type=\"submit\" class=\"bg-accent text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition\">\n                        Add Product\n                    </button>\n                </div>\n            </form>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":10706},"vendor/dashboard.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/auth.php';\nrequire_once '../includes/product.php';\nrequire_once '../includes/order.php';\n\n// Check if user is logged in and is a vendor\nif (!isLoggedIn()) {\n    header('Location: ../login.php');\n    exit();\n}\n\n$user = getCurrentUser();\nif ($user['role'] !== 'vendor') {\n    header('Location: ../index.php');\n    exit();\n}\n\n$productManager = new ProductManager();\n$orderManager = new OrderManager();\n\n// Get vendor statistics\n$totalProducts = $productManager->getVendorProductCount($user['id']);\n$totalOrders = $orderManager->getVendorOrderCount($user['id']);\n$totalEarnings = $orderManager->getVendorEarnings($user['id']);\n$pendingOrders = $orderManager->getVendorPendingOrders($user['id']);\n$recentOrders = $orderManager->getVendorOrders($user['id'], 5);\n$topProducts = $productManager->getVendorTopProducts($user['id'], 5);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Vendor Dashboard - E-Commerce</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between h-16\">\n                <div class=\"flex items-center\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\">E-Commerce</a>\n                    <span class=\"ml-4 px-3 py-1 bg-accent/10 text-accent text-sm font-medium rounded-full\">Vendor</span>\n                </div>\n                <div class=\"flex items-center space-x-4\">\n                    <span class=\"text-gray-700\">Welcome, <?php echo htmlspecialchars($user['first_name']); ?>!</span>\n                    <a href=\"../logout.php\" class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\">Logout</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <!-- Dashboard Header -->\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Vendor Dashboard</h1>\n            <p class=\"text-gray-600 mt-2\">Manage your products, orders, and business analytics</p>\n        </div>\n\n        <!-- Stats Cards -->\n        <div class=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-accent/10 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Products</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $totalProducts; ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-blue-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $totalOrders; ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-green-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Earnings</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\">$<?php echo number_format($totalEarnings, 2); ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-yellow-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Pending Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo count($pendingOrders); ?></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <!-- Recent Orders -->\n            <div class=\"lg:col-span-2 space-y-6\">\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Recent Orders</h2>\n                        <a href=\"orders.php\" class=\"text-primary hover:underline text-sm\">View All</a>\n                    </div>\n                    <div class=\"p-6\">\n                        <?php if (empty($recentOrders)): ?>\n                            <p class=\"text-gray-500 text-center py-8\">No orders yet.</p>\n                        <?php else: ?>\n                            <div class=\"space-y-4\">\n                                <?php foreach ($recentOrders as $order): ?>\n                                    <div class=\"border border-gray-200 rounded-lg p-4\">\n                                        <div class=\"flex justify-between items-start\">\n                                            <div>\n                                                <p class=\"font-semibold text-gray-900\">Order #<?php echo $order['order_number']; ?></p>\n                                                <p class=\"text-sm text-gray-600\">Customer: <?php echo htmlspecialchars($order['customer_name']); ?></p>\n                                                <p class=\"text-sm text-gray-600\"><?php echo date('M j, Y', strtotime($order['created_at'])); ?></p>\n                                            </div>\n                                            <div class=\"text-right\">\n                                                <p class=\"font-semibold text-gray-900\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                                                <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \n                                                    <?php echo $order['status'] === 'delivered' ? 'bg-green-100 text-green-800' : \n                                                        ($order['status'] === 'shipped' ? 'bg-blue-100 text-blue-800' : \n                                                        ($order['status'] === 'processing' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800')); ?>\">\n                                                    <?php echo ucfirst($order['status']); ?>\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                <?php endforeach; ?>\n                            </div>\n                        <?php endif; ?>\n                    </div>\n                </div>\n\n                <!-- Top Products -->\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Top Selling Products</h2>\n                    </div>\n                    <div class=\"p-6\">\n                        <?php if (empty($topProducts)): ?>\n                            <p class=\"text-gray-500 text-center py-8\">No sales data yet.</p>\n                        <?php else: ?>\n                            <div class=\"space-y-4\">\n                                <?php foreach ($topProducts as $product): ?>\n                                    <div class=\"flex items-center space-x-4\">\n                                        <img src=\"<?php echo htmlspecialchars($product['image_url'] ?: '/placeholder.svg?height=50&width=50'); ?>\" \n                                             alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                                             class=\"w-12 h-12 object-cover rounded-lg\">\n                                        <div class=\"flex-1\">\n                                            <p class=\"font-medium text-gray-900\"><?php echo htmlspecialchars($product['name']); ?></p>\n                                            <p class=\"text-sm text-gray-600\"><?php echo $product['sales_count']; ?> sold</p>\n                                        </div>\n                                        <p class=\"font-semibold text-gray-900\">$<?php echo number_format($product['price'], 2); ?></p>\n                                    </div>\n                                <?php endforeach; ?>\n                            </div>\n                        <?php endif; ?>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Quick Actions & Analytics -->\n            <div class=\"space-y-6\">\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Quick Actions</h2>\n                    </div>\n                    <div class=\"p-6 space-y-4\">\n                        <a href=\"add-product.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">Add New Product</span>\n                        </a>\n                        \n                        <a href=\"products.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">Manage Products</span>\n                        </a>\n                        \n                        <a href=\"orders.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">View Orders</span>\n                        </a>\n                        \n                        <a href=\"analytics.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">View Analytics</span>\n                        </a>\n                    </div>\n                </div>\n\n                <!-- Earnings Chart -->\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Monthly Earnings</h2>\n                    </div>\n                    <div class=\"p-6\">\n                        <canvas id=\"earningsChart\" width=\"400\" height=\"200\"></canvas>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        // Sample earnings chart\n        const ctx = document.getElementById('earningsChart').getContext('2d');\n        new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],\n                datasets: [{\n                    label: 'Earnings ($)',\n                    data: [1200, 1900, 3000, 2500, 2200, 3000],\n                    borderColor: '#f97316',\n                    backgroundColor: 'rgba(249, 115, 22, 0.1)',\n                    tension: 0.4\n                }]\n            },\n            options: {\n                responsive: true,\n                plugins: {\n                    legend: {\n                        display: false\n                    }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true\n                    }\n                }\n            }\n        });\n    </script>\n</body>\n</html>\n","size_bytes":15247},"vendor/products.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/auth.php';\nrequire_once '../includes/product.php';\n\n// Check if user is logged in and is a vendor\nif (!isLoggedIn()) {\n    header('Location: ../login.php');\n    exit();\n}\n\n$user = getCurrentUser();\nif ($user['role'] !== 'vendor') {\n    header('Location: ../index.php');\n    exit();\n}\n\n$productManager = new ProductManager();\n\n// Handle product actions\nif ($_POST['action'] ?? '' === 'update_status') {\n    $product_id = $_POST['product_id'];\n    $status = $_POST['status'];\n    \n    $productManager->updateProductStatus($product_id, $status, $user['id']);\n    header('Location: products.php?updated=1');\n    exit();\n}\n\n// Get vendor's products\n$products = $productManager->getVendorProducts($user['id']);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>My Products - Vendor Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\">E-Commerce</a>\n                    <span class=\"text-gray-400\">|</span>\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Vendor</a>\n                    <span class=\"text-gray-400\">></span>\n                    <span class=\"text-gray-700 font-medium\">Products</span>\n                </div>\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Dashboard</a>\n                    <a href=\"../logout.php\" class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\">Logout</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div class=\"flex justify-between items-center mb-8\">\n            <div>\n                <h1 class=\"text-3xl font-bold text-gray-900\">My Products</h1>\n                <p class=\"text-gray-600 mt-2\">Manage your product listings</p>\n            </div>\n            <a href=\"add-product.php\" class=\"bg-accent text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition\">\n                Add New Product\n            </a>\n        </div>\n\n        <?php if (isset($_GET['updated'])): ?>\n            <div class=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6\">\n                Product updated successfully!\n            </div>\n        <?php endif; ?>\n\n        <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n            <?php if (empty($products)): ?>\n                <div class=\"text-center py-12\">\n                    <svg class=\"w-16 h-16 text-gray-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path>\n                    </svg>\n                    <h3 class=\"text-lg font-medium text-gray-900 mb-2\">No products yet</h3>\n                    <p class=\"text-gray-600 mb-4\">Start by adding your first product to your store.</p>\n                    <a href=\"add-product.php\" class=\"bg-accent text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition\">\n                        Add Your First Product\n                    </a>\n                </div>\n            <?php else: ?>\n                <div class=\"overflow-x-auto\">\n                    <table class=\"min-w-full divide-y divide-gray-200\">\n                        <thead class=\"bg-gray-50\">\n                            <tr>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Product</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Price</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Stock</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Created</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody class=\"bg-white divide-y divide-gray-200\">\n                            <?php foreach ($products as $product): ?>\n                                <tr>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"flex items-center\">\n                                            <img src=\"../<?php echo htmlspecialchars($product['image_url'] ?: 'placeholder.svg?height=50&width=50'); ?>\" \n                                                 alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                                                 class=\"w-12 h-12 object-cover rounded-lg\">\n                                            <div class=\"ml-4\">\n                                                <div class=\"text-sm font-medium text-gray-900\">\n                                                    <?php echo htmlspecialchars($product['name']); ?>\n                                                </div>\n                                                <div class=\"text-sm text-gray-500\">\n                                                    SKU: <?php echo htmlspecialchars($product['sku'] ?: 'N/A'); ?>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                                        $<?php echo number_format($product['price'], 2); ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                                        <?php echo $product['stock_quantity']; ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \n                                            <?php echo $product['status'] === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'; ?>\">\n                                            <?php echo ucfirst($product['status']); ?>\n                                        </span>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                        <?php echo date('M j, Y', strtotime($product['created_at'])); ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2\">\n                                        <a href=\"../product-detail.php?id=<?php echo $product['id']; ?>\" \n                                           class=\"text-primary hover:text-blue-600\">View</a>\n                                        <form method=\"POST\" class=\"inline\">\n                                            <input type=\"hidden\" name=\"action\" value=\"update_status\">\n                                            <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $product['id']; ?>\">\n                                            <input type=\"hidden\" name=\"status\" value=\"<?php echo $product['status'] === 'active' ? 'inactive' : 'active'; ?>\">\n                                            <button type=\"submit\" class=\"text-primary hover:text-blue-600\">\n                                                <?php echo $product['status'] === 'active' ? 'Deactivate' : 'Activate'; ?>\n                                            </button>\n                                        </form>\n                                    </td>\n                                </tr>\n                            <?php endforeach; ?>\n                        </tbody>\n                    </table>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":9218},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"twilio>=9.8.0\",\n]\n","size_bytes":165},"send_email.php":{"content":"<?php\n// Email functionality for order confirmations\n// Simple email implementation - in production you'd use a proper email service\n\nfunction send_order_confirmation_email($user_email, $order_data) {\n    $subject = \"Order Confirmation - Market Nest - Order #\" . $order_data['order_number'];\n    \n    $message = \"\n    <html>\n    <head>\n        <title>Order Confirmation</title>\n        <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .header { background: #0f172a; color: white; padding: 20px; text-align: center; }\n            .content { background: #f9f9f9; padding: 20px; }\n            .footer { background: #e5e7eb; padding: 10px; text-align: center; font-size: 12px; }\n            .highlight { background: #10b981; color: white; padding: 10px; border-radius: 5px; }\n        </style>\n    </head>\n    <body>\n        <div class='container'>\n            <div class='header'>\n                <h1>Market Nest</h1>\n                <h2>Order Confirmation</h2>\n            </div>\n            <div class='content'>\n                <h3>Thank you for your order!</h3>\n                <p><strong>Order Number:</strong> \" . $order_data['order_number'] . \"</p>\n                <p><strong>Total Amount:</strong> \" . number_format($order_data['total_amount'], 2) . \" FCFA</p>\n                <p><strong>Payment Method:</strong> \" . ucwords(str_replace('_', ' ', $order_data['payment_method'])) . \"</p>\n                \n                \" . ($order_data['payment_method'] == 'mobile_money_cameroon' ? \n                \"<div class='highlight'>\n                    <h4>Mobile Money Payment Instructions</h4>\n                    <p>Please send <strong>\" . number_format($order_data['total_amount'], 2) . \" FCFA</strong> to <strong>679871130</strong></p>\n                    <p>Include your order number <strong>\" . $order_data['order_number'] . \"</strong> in the transaction message.</p>\n                </div>\" : \"\") . \"\n                \n                <p>We'll process your order and send you tracking information once it ships.</p>\n                <p>Thank you for choosing Market Nest!</p>\n            </div>\n            <div class='footer'>\n                <p>&copy; \" . date('Y') . \" Market Nest. All rights reserved.</p>\n            </div>\n        </div>\n    </body>\n    </html>\";\n    \n    $headers = \"MIME-Version: 1.0\" . \"\\r\\n\";\n    $headers .= \"Content-type:text/html;charset=UTF-8\" . \"\\r\\n\";\n    $headers .= \"From: noreply@marketnest.com\" . \"\\r\\n\";\n    \n    // For development, log the email instead of sending\n    error_log(\"Email to \" . $user_email . \" - Subject: \" . $subject);\n    error_log(\"Email content: \" . strip_tags($message));\n    \n    // In production, uncomment this line:\n    // mail($user_email, $subject, $message, $headers);\n    \n    return ['success' => true, 'message' => 'Email confirmation sent'];\n}\n\nfunction send_payment_confirmation_email($user_email, $payment_data) {\n    $subject = \"Payment Confirmed - Market Nest - Order #\" . $payment_data['order_number'];\n    \n    $message = \"\n    <html>\n    <head>\n        <title>Payment Confirmation</title>\n        <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .header { background: #10b981; color: white; padding: 20px; text-align: center; }\n            .content { background: #f9f9f9; padding: 20px; }\n        </style>\n    </head>\n    <body>\n        <div class='container'>\n            <div class='header'>\n                <h1>Payment Confirmed!</h1>\n            </div>\n            <div class='content'>\n                <h3>Your payment has been received!</h3>\n                <p><strong>Order Number:</strong> \" . $payment_data['order_number'] . \"</p>\n                <p><strong>Amount Received:</strong> \" . number_format($payment_data['amount'], 2) . \" FCFA</p>\n                <p>Your order is now being processed and will ship soon!</p>\n            </div>\n        </div>\n    </body>\n    </html>\";\n    \n    $headers = \"MIME-Version: 1.0\" . \"\\r\\n\";\n    $headers .= \"Content-type:text/html;charset=UTF-8\" . \"\\r\\n\";\n    $headers .= \"From: noreply@marketnest.com\" . \"\\r\\n\";\n    \n    // Log for development\n    error_log(\"Payment email to \" . $user_email . \" - Subject: \" . $subject);\n    \n    return ['success' => true, 'message' => 'Payment email sent'];\n}\n?>","size_bytes":4489},"send_sms.php":{"content":"<?php\n// SMS functionality using Twilio integration for order confirmations\n// Based on Twilio integration blueprint\n\nfunction send_order_confirmation_sms($phone_number, $order_data) {\n    // For now, we'll use a simple approach - in production you'd use the Python Twilio script\n    // This is a placeholder for mobile money and SMS integration\n    \n    $message = \"Market Nest Order Confirmation\\n\";\n    $message .= \"Order #\" . $order_data['order_number'] . \"\\n\";\n    $message .= \"Total: \" . number_format($order_data['total_amount'], 2) . \" FCFA\\n\";\n    $message .= \"Payment: Mobile Money\\n\";\n    $message .= \"Thank you for shopping with Market Nest!\";\n    \n    // Log SMS for now - in production this would call the Twilio service\n    error_log(\"SMS to \" . $phone_number . \": \" . $message);\n    \n    return ['success' => true, 'message' => 'SMS confirmation sent'];\n}\n\nfunction send_payment_confirmation_sms($phone_number, $payment_data) {\n    $message = \"Market Nest Payment Confirmation\\n\";\n    $message .= \"Payment received: \" . number_format($payment_data['amount'], 2) . \" FCFA\\n\";\n    $message .= \"Mobile Money: 679871130\\n\";\n    $message .= \"Your order will be processed shortly.\";\n    \n    // Log SMS for now\n    error_log(\"Payment SMS to \" . $phone_number . \": \" . $message);\n    \n    return ['success' => true, 'message' => 'Payment SMS sent'];\n}\n?>","size_bytes":1363},"debug_products.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/product.php';\n\necho \"=== Product Debug Script ===\\n\";\n\n$product_manager = new ProductManager();\n\n// Test basic product retrieval\necho \"1. Testing get_products():\\n\";\n$products = $product_manager->get_products(5, 0);\necho \"Found \" . count($products) . \" products\\n\";\n\nforeach ($products as $product) {\n    echo \"- ID: {$product['id']}, Name: {$product['name']}, Status: {$product['status']}\\n\";\n    echo \"  Category: {$product['category_name']}, Vendor: {$product['business_name']}\\n\";\n    echo \"  Images: \" . print_r($product['images'], true) . \"\\n\";\n    echo \"\\n\";\n}\n\n// Test categories\necho \"2. Testing get_categories():\\n\";\n$categories = $product_manager->get_categories();\necho \"Found \" . count($categories) . \" categories\\n\";\n\nforeach (array_slice($categories, 0, 10) as $category) {\n    echo \"- ID: {$category['id']}, Name: {$category['name']}, Product Count: {$category['product_count']}\\n\";\n}\n\n// Test specific category (Sports)\necho \"\\n3. Testing Sports category products:\\n\";\n$sports_category = null;\nforeach ($categories as $cat) {\n    if ($cat['name'] === 'Sports') {\n        $sports_category = $cat;\n        break;\n    }\n}\n\nif ($sports_category) {\n    echo \"Sports category ID: {$sports_category['id']}\\n\";\n    $sports_products = $product_manager->get_products(10, 0, $sports_category['id']);\n    echo \"Found \" . count($sports_products) . \" sports products\\n\";\n    \n    foreach ($sports_products as $product) {\n        echo \"- {$product['name']}\\n\";\n    }\n} else {\n    echo \"Sports category not found!\\n\";\n}\n\necho \"\\n=== Debug Complete ===\\n\";\n?>","size_bytes":1626},"admin/orders.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/order.php';\n\nrequire_admin();\n\n$orderManager = new OrderManager();\n$message = '';\n\n// Generate CSRF token if not set\nif (!isset($_SESSION['csrf_token'])) {\n    $_SESSION['csrf_token'] = generate_csrf_token();\n}\n\n// Handle vendor notification\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['notify_vendor'])) {\n    if (verify_csrf_token($_POST['csrf_token'])) {\n        $order_id = (int)$_POST['order_id'];\n        $vendor_id = (int)$_POST['vendor_id'];\n        $admin_id = $_SESSION['user_id'];\n        \n        $result = $orderManager->notify_vendor_delivery($order_id, $vendor_id, $admin_id);\n        $message = $result['message'];\n    } else {\n        $message = 'Invalid security token. Please try again.';\n    }\n}\n\n// Handle order status update\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['update_status'])) {\n    if (verify_csrf_token($_POST['csrf_token'])) {\n        $order_id = (int)$_POST['order_id'];\n        $status = sanitize_input($_POST['status']);\n        \n        $result = $orderManager->admin_update_order_status($order_id, $status);\n        $message = $result['message'];\n    } else {\n        $message = 'Invalid security token. Please try again.';\n    }\n}\n\n$pending_orders = $orderManager->get_all_pending_orders();\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Order Management - Admin Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Admin Dashboard</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Dashboard</a>\n                    <a href=\"vendor-management.php\" class=\"text-gray-700 hover:text-accent\">Vendors</a>\n                    <a href=\"../logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Order Management</h1>\n            <p class=\"mt-2 text-gray-600\">Monitor pending orders and notify vendors about delivery completion</p>\n        </div>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo htmlspecialchars($message); ?>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"bg-white shadow rounded-lg\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-xl font-semibold text-gray-900\">\n                    Pending Orders \n                    <span class=\"bg-red-100 text-red-800 text-sm font-medium px-2.5 py-0.5 rounded-full ml-2\">\n                        <?php echo count($pending_orders); ?>\n                    </span>\n                </h2>\n            </div>\n            \n            <?php if (empty($pending_orders)): ?>\n                <div class=\"px-6 py-8 text-center text-gray-500\">\n                    <div class=\"text-6xl mb-4\">üì¶</div>\n                    <h3 class=\"text-lg font-medium text-gray-900 mb-2\">No Pending Orders</h3>\n                    <p>All orders have been completed or are in progress.</p>\n                </div>\n            <?php else: ?>\n                <div class=\"overflow-x-auto\">\n                    <table class=\"min-w-full divide-y divide-gray-200\">\n                        <thead class=\"bg-gray-50\">\n                            <tr>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Order</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Customer</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Vendor</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Products</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Amount</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody class=\"bg-white divide-y divide-gray-200\">\n                            <?php foreach ($pending_orders as $order): ?>\n                                <tr>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm font-medium text-gray-900\">#<?php echo htmlspecialchars($order['order_number']); ?></div>\n                                        <div class=\"text-sm text-gray-500\">ID: <?php echo $order['id']; ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($order['first_name'] . ' ' . $order['last_name']); ?></div>\n                                        <div class=\"text-sm text-gray-500\"><?php echo htmlspecialchars($order['customer_email']); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($order['vendor_name']); ?></div>\n                                        <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800\">\n                                            Pending Delivery\n                                        </span>\n                                    </td>\n                                    <td class=\"px-6 py-4\">\n                                        <div class=\"text-sm text-gray-900 max-w-xs truncate\" title=\"<?php echo htmlspecialchars($order['products']); ?>\">\n                                            <?php echo htmlspecialchars($order['products']); ?>\n                                        </div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm font-medium text-gray-900\">$<?php echo number_format($order['total_amount'], 2); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm text-gray-900\"><?php echo date('M j, Y', strtotime($order['created_at'])); ?></div>\n                                        <div class=\"text-sm text-gray-500\"><?php echo date('g:i A', strtotime($order['created_at'])); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"flex flex-col space-y-2\">\n                                            <!-- Notify Vendor Button -->\n                                            <form method=\"POST\" class=\"inline\">\n                                                <input type=\"hidden\" name=\"csrf_token\" value=\"<?php echo htmlspecialchars($_SESSION['csrf_token']); ?>\">\n                                                <input type=\"hidden\" name=\"order_id\" value=\"<?php echo $order['id']; ?>\">\n                                                <input type=\"hidden\" name=\"vendor_id\" value=\"<?php echo $order['vendor_id']; ?>\">\n                                                <button type=\"submit\" name=\"notify_vendor\" \n                                                        class=\"bg-warning text-white px-3 py-1 rounded-md text-xs font-medium hover:bg-yellow-600 transition duration-200 w-full\"\n                                                        onclick=\"return confirm('Send delivery reminder to vendor?')\">\n                                                    Notify Vendor\n                                                </button>\n                                            </form>\n                                            \n                                            <!-- Update Status Dropdown -->\n                                            <form method=\"POST\" class=\"inline\">\n                                                <input type=\"hidden\" name=\"csrf_token\" value=\"<?php echo htmlspecialchars($_SESSION['csrf_token']); ?>\">\n                                                <input type=\"hidden\" name=\"order_id\" value=\"<?php echo $order['id']; ?>\">\n                                                <input type=\"hidden\" name=\"update_status\" value=\"1\">\n                                                <select name=\"status\" onchange=\"this.form.submit()\" \n                                                        class=\"text-xs border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-accent focus:border-accent w-full\">\n                                                    <option value=\"\">Update Status</option>\n                                                    <option value=\"processing\">Processing</option>\n                                                    <option value=\"shipped\">Shipped</option>\n                                                    <option value=\"delivered\">Delivered</option>\n                                                    <option value=\"cancelled\">Cancelled</option>\n                                                </select>\n                                            </form>\n                                        </div>\n                                    </td>\n                                </tr>\n                            <?php endforeach; ?>\n                        </tbody>\n                    </table>\n                </div>\n            <?php endif; ?>\n        </div>\n        \n        <!-- Order Statistics -->\n        <div class=\"mt-8 grid grid-cols-1 md:grid-cols-4 gap-6\">\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-red-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Pending Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo count($pending_orders); ?></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>","size_bytes":12205},"admin/add-product.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/product.php';\n\nrequire_admin();\n\n$productManager = new ProductManager();\n$message = '';\n$error = '';\n\n// Generate CSRF token if not set\nif (!isset($_SESSION['csrf_token'])) {\n    $_SESSION['csrf_token'] = generate_csrf_token();\n}\n\n// Get categories for dropdown\n$categories = $productManager->get_categories();\n\n// Handle form submission\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    if (verify_csrf_token($_POST['csrf_token'])) {\n        $name = sanitize_input($_POST['name']);\n        $description = sanitize_input($_POST['description']);\n        $price = (float)$_POST['price'];\n        $sale_price = !empty($_POST['sale_price']) ? (float)$_POST['sale_price'] : null;\n        $category_id = (int)$_POST['category_id'];\n        $stock_quantity = (int)$_POST['stock_quantity'];\n        $sku = sanitize_input($_POST['sku']);\n        $is_featured = isset($_POST['is_featured']) ? 1 : 0;\n        $is_flash_deal = isset($_POST['is_flash_deal']) ? 1 : 0;\n        $flash_deal_end = $is_flash_deal && !empty($_POST['flash_deal_end']) ? $_POST['flash_deal_end'] : null;\n        \n        // Handle image upload with security validation\n        $images = [];\n        $upload_errors = [];\n        \n        if (isset($_FILES['images']) && $_FILES['images']['error'][0] !== UPLOAD_ERR_NO_FILE) {\n            $upload_dir = '../uploads/products/';\n            if (!file_exists($upload_dir)) {\n                mkdir($upload_dir, 0755, true);\n            }\n            \n            // Security settings\n            $allowed_types = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\n            $allowed_extensions = ['jpg', 'jpeg', 'png', 'webp'];\n            $max_file_size = 5 * 1024 * 1024; // 5MB\n            $max_files = 5;\n            \n            foreach ($_FILES['images']['tmp_name'] as $key => $tmp_name) {\n                if ($_FILES['images']['error'][$key] === UPLOAD_ERR_OK) {\n                    // Check file count limit\n                    if (count($images) >= $max_files) {\n                        $upload_errors[] = \"Maximum $max_files files allowed\";\n                        break;\n                    }\n                    \n                    // Check file size\n                    if ($_FILES['images']['size'][$key] > $max_file_size) {\n                        $upload_errors[] = \"File '{$_FILES['images']['name'][$key]}' is too large (max 5MB)\";\n                        continue;\n                    }\n                    \n                    // Verify MIME type with finfo\n                    $finfo = finfo_open(FILEINFO_MIME_TYPE);\n                    $mime_type = finfo_file($finfo, $tmp_name);\n                    finfo_close($finfo);\n                    \n                    if (!in_array($mime_type, $allowed_types)) {\n                        $upload_errors[] = \"File '{$_FILES['images']['name'][$key]}' has invalid type. Only JPG, PNG, and WebP allowed\";\n                        continue;\n                    }\n                    \n                    // Double-check with getimagesize\n                    $image_info = getimagesize($tmp_name);\n                    if ($image_info === false || !in_array($image_info['mime'], $allowed_types)) {\n                        $upload_errors[] = \"File '{$_FILES['images']['name'][$key]}' is not a valid image\";\n                        continue;\n                    }\n                    \n                    // Generate secure filename\n                    $extension = match($mime_type) {\n                        'image/jpeg' => 'jpg',\n                        'image/jpg' => 'jpg',\n                        'image/png' => 'png',\n                        'image/webp' => 'webp',\n                        default => 'jpg'\n                    };\n                    \n                    $filename = 'product_' . bin2hex(random_bytes(16)) . '.' . $extension;\n                    $upload_path = $upload_dir . $filename;\n                    \n                    if (move_uploaded_file($tmp_name, $upload_path)) {\n                        // Set secure file permissions\n                        chmod($upload_path, 0644);\n                        $images[] = 'uploads/products/' . $filename;\n                    } else {\n                        $upload_errors[] = \"Failed to upload '{$_FILES['images']['name'][$key]}'\";\n                    }\n                } elseif ($_FILES['images']['error'][$key] !== UPLOAD_ERR_NO_FILE) {\n                    $upload_errors[] = \"Upload error for '{$_FILES['images']['name'][$key]}': \" . $_FILES['images']['error'][$key];\n                }\n            }\n        }\n        \n        // Add placeholder image if no images uploaded\n        if (empty($images)) {\n            $images[] = 'https://via.placeholder.com/400x300?text=Product+Image';\n        }\n        \n        // Show upload errors if any\n        if (!empty($upload_errors)) {\n            $error = 'Upload errors: ' . implode(', ', $upload_errors);\n        }\n        \n        // Validate required fields\n        if (empty($error) && $name && $description && $price > 0 && $category_id && $stock_quantity >= 0) {\n            // Admin products use vendor_id = 0 (auto-approved)\n            $result = $productManager->add_product(\n                0, // vendor_id = 0 for admin products\n                $category_id,\n                $name,\n                $description,\n                $price,\n                $sale_price,\n                $stock_quantity,\n                $sku,\n                $images,\n                $is_featured,\n                $is_flash_deal,\n                $flash_deal_end\n            );\n            \n            if ($result['success']) {\n                $message = 'Product added successfully! Product ID: ' . $result['product_id'];\n                // Clear form\n                $_POST = [];\n            } else {\n                $error = $result['message'];\n            }\n        } else {\n            $error = 'Please fill in all required fields with valid values.';\n        }\n    } else {\n        $error = 'Invalid security token. Please try again.';\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Add Product - Admin Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Admin Dashboard</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Dashboard</a>\n                    <a href=\"products.php\" class=\"text-gray-700 hover:text-accent\">Products</a>\n                    <a href=\"vendor-management.php\" class=\"text-gray-700 hover:text-accent\">Vendors</a>\n                    <a href=\"orders.php\" class=\"text-gray-700 hover:text-accent\">Orders</a>\n                    <a href=\"../logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Add New Product</h1>\n            <p class=\"mt-2 text-gray-600\">Create a new product for the marketplace</p>\n        </div>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6\">\n                <?php echo htmlspecialchars($message); ?>\n            </div>\n        <?php endif; ?>\n        \n        <?php if ($error): ?>\n            <div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\">\n                <?php echo htmlspecialchars($error); ?>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"bg-white shadow rounded-lg\">\n            <form method=\"POST\" enctype=\"multipart/form-data\" class=\"p-6 space-y-6\">\n                <input type=\"hidden\" name=\"csrf_token\" value=\"<?php echo htmlspecialchars($_SESSION['csrf_token']); ?>\">\n                \n                <!-- Basic Information -->\n                <div class=\"border-b border-gray-200 pb-6\">\n                    <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Basic Information</h3>\n                    \n                    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <div>\n                            <label for=\"name\" class=\"block text-sm font-medium text-gray-700 mb-2\">Product Name *</label>\n                            <input type=\"text\" id=\"name\" name=\"name\" value=\"<?php echo htmlspecialchars($_POST['name'] ?? ''); ?>\" \n                                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\" required>\n                        </div>\n                        \n                        <div>\n                            <label for=\"category_id\" class=\"block text-sm font-medium text-gray-700 mb-2\">Category *</label>\n                            <select id=\"category_id\" name=\"category_id\" \n                                    class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\" required>\n                                <option value=\"\">Select Category</option>\n                                <?php foreach ($categories as $category): ?>\n                                    <option value=\"<?php echo $category['id']; ?>\" \n                                            <?php echo isset($_POST['category_id']) && $_POST['category_id'] == $category['id'] ? 'selected' : ''; ?>>\n                                        <?php echo htmlspecialchars($category['name']); ?>\n                                    </option>\n                                <?php endforeach; ?>\n                            </select>\n                        </div>\n                        \n                        <div>\n                            <label for=\"sku\" class=\"block text-sm font-medium text-gray-700 mb-2\">SKU</label>\n                            <input type=\"text\" id=\"sku\" name=\"sku\" value=\"<?php echo htmlspecialchars($_POST['sku'] ?? ''); ?>\" \n                                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\"\n                                   placeholder=\"e.g., ADMIN-001\">\n                        </div>\n                        \n                        <div>\n                            <label for=\"stock_quantity\" class=\"block text-sm font-medium text-gray-700 mb-2\">Stock Quantity *</label>\n                            <input type=\"number\" id=\"stock_quantity\" name=\"stock_quantity\" value=\"<?php echo htmlspecialchars($_POST['stock_quantity'] ?? ''); ?>\" \n                                   min=\"0\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\" required>\n                        </div>\n                    </div>\n                    \n                    <div class=\"mt-6\">\n                        <label for=\"description\" class=\"block text-sm font-medium text-gray-700 mb-2\">Description *</label>\n                        <textarea id=\"description\" name=\"description\" rows=\"4\" \n                                  class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\" required><?php echo htmlspecialchars($_POST['description'] ?? ''); ?></textarea>\n                    </div>\n                </div>\n                \n                <!-- Pricing -->\n                <div class=\"border-b border-gray-200 pb-6\">\n                    <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Pricing</h3>\n                    \n                    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <div>\n                            <label for=\"price\" class=\"block text-sm font-medium text-gray-700 mb-2\">Regular Price ($) *</label>\n                            <input type=\"number\" id=\"price\" name=\"price\" value=\"<?php echo htmlspecialchars($_POST['price'] ?? ''); ?>\" \n                                   min=\"0\" step=\"0.01\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\" required>\n                        </div>\n                        \n                        <div>\n                            <label for=\"sale_price\" class=\"block text-sm font-medium text-gray-700 mb-2\">Sale Price ($)</label>\n                            <input type=\"number\" id=\"sale_price\" name=\"sale_price\" value=\"<?php echo htmlspecialchars($_POST['sale_price'] ?? ''); ?>\" \n                                   min=\"0\" step=\"0.01\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\">\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Images -->\n                <div class=\"border-b border-gray-200 pb-6\">\n                    <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Product Images</h3>\n                    \n                    <div>\n                        <label for=\"images\" class=\"block text-sm font-medium text-gray-700 mb-2\">Upload Images</label>\n                        <input type=\"file\" id=\"images\" name=\"images[]\" multiple accept=\"image/*\" \n                               class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\">\n                        <p class=\"text-sm text-gray-500 mt-1\">Select multiple images. If no images uploaded, a placeholder will be used.</p>\n                    </div>\n                </div>\n                \n                <!-- Product Options -->\n                <div class=\"border-b border-gray-200 pb-6\">\n                    <h3 class=\"text-lg font-medium text-gray-900 mb-4\">Product Options</h3>\n                    \n                    <div class=\"space-y-4\">\n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"is_featured\" name=\"is_featured\" value=\"1\" \n                                   <?php echo isset($_POST['is_featured']) ? 'checked' : ''; ?>\n                                   class=\"w-4 h-4 text-accent focus:ring-accent border-gray-300 rounded\">\n                            <label for=\"is_featured\" class=\"ml-2 text-sm text-gray-700\">Featured Product</label>\n                        </div>\n                        \n                        <div class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"is_flash_deal\" name=\"is_flash_deal\" value=\"1\" \n                                   <?php echo isset($_POST['is_flash_deal']) ? 'checked' : ''; ?>\n                                   class=\"w-4 h-4 text-accent focus:ring-accent border-gray-300 rounded\"\n                                   onchange=\"toggleFlashDealEnd()\">\n                            <label for=\"is_flash_deal\" class=\"ml-2 text-sm text-gray-700\">Flash Deal</label>\n                        </div>\n                        \n                        <div id=\"flash_deal_end_container\" style=\"display: none;\">\n                            <label for=\"flash_deal_end\" class=\"block text-sm font-medium text-gray-700 mb-2\">Flash Deal End Date</label>\n                            <input type=\"datetime-local\" id=\"flash_deal_end\" name=\"flash_deal_end\" value=\"<?php echo htmlspecialchars($_POST['flash_deal_end'] ?? ''); ?>\" \n                                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-accent focus:border-accent\">\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Submit Buttons -->\n                <div class=\"flex justify-between items-center pt-6\">\n                    <a href=\"products.php\" class=\"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition duration-200\">\n                        Cancel\n                    </a>\n                    \n                    <button type=\"submit\" class=\"bg-accent text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition duration-200\">\n                        Add Product\n                    </button>\n                </div>\n            </form>\n        </div>\n    </div>\n    \n    <script>\n        function toggleFlashDealEnd() {\n            const checkbox = document.getElementById('is_flash_deal');\n            const container = document.getElementById('flash_deal_end_container');\n            container.style.display = checkbox.checked ? 'block' : 'none';\n        }\n        \n        // Initialize on page load\n        document.addEventListener('DOMContentLoaded', function() {\n            toggleFlashDealEnd();\n        });\n    </script>\n</body>\n</html>","size_bytes":17775},"admin/products.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/product.php';\n\nrequire_admin();\n\n$productManager = new ProductManager();\n$message = '';\n$error = '';\n\n// Generate CSRF token if not set\nif (!isset($_SESSION['csrf_token'])) {\n    $_SESSION['csrf_token'] = generate_csrf_token();\n}\n\n// Handle product approval\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['approve_product'])) {\n    if (verify_csrf_token($_POST['csrf_token'])) {\n        $product_id = (int)$_POST['product_id'];\n        $admin_id = $_SESSION['user_id'];\n        \n        $result = $productManager->approve_product($product_id, $admin_id);\n        if ($result['success']) {\n            $message = $result['message'];\n        } else {\n            $error = $result['message'];\n        }\n    } else {\n        $error = 'Invalid security token. Please try again.';\n    }\n}\n\n// Handle product rejection\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['reject_product'])) {\n    if (verify_csrf_token($_POST['csrf_token'])) {\n        $product_id = (int)$_POST['product_id'];\n        $admin_id = $_SESSION['user_id'];\n        $reason = sanitize_input($_POST['reason'] ?? '');\n        \n        $result = $productManager->reject_product($product_id, $admin_id, $reason);\n        if ($result['success']) {\n            $message = $result['message'];\n        } else {\n            $error = $result['message'];\n        }\n    } else {\n        $error = 'Invalid security token. Please try again.';\n    }\n}\n\n// Get filter parameter\n$filter = $_GET['filter'] ?? 'pending';\n$valid_filters = ['all', 'pending', 'approved', 'rejected'];\nif (!in_array($filter, $valid_filters)) {\n    $filter = 'pending';\n}\n\n$products = $productManager->get_all_products_admin(50, 0, $filter);\n$pending_count = count($productManager->get_pending_products(100));\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Product Management - Admin Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-accent\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Admin Dashboard</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-accent\">Dashboard</a>\n                    <a href=\"vendor-management.php\" class=\"text-gray-700 hover:text-accent\">Vendors</a>\n                    <a href=\"orders.php\" class=\"text-gray-700 hover:text-accent\">Orders</a>\n                    <a href=\"../logout.php\" class=\"text-accent hover:text-blue-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"mb-8 flex justify-between items-center\">\n            <div>\n                <h1 class=\"text-3xl font-bold text-gray-900\">Product Management</h1>\n                <p class=\"mt-2 text-gray-600\">Review vendor products and manage the product catalog</p>\n            </div>\n            <a href=\"add-product.php\" class=\"bg-accent text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition duration-200\">\n                Add New Product\n            </a>\n        </div>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6\">\n                <?php echo htmlspecialchars($message); ?>\n            </div>\n        <?php endif; ?>\n        \n        <?php if ($error): ?>\n            <div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\">\n                <?php echo htmlspecialchars($error); ?>\n            </div>\n        <?php endif; ?>\n        \n        <!-- Filter Tabs -->\n        <div class=\"mb-6\">\n            <div class=\"border-b border-gray-200\">\n                <nav class=\"-mb-px flex space-x-8\">\n                    <a href=\"?filter=pending\" \n                       class=\"<?php echo $filter === 'pending' ? 'border-accent text-accent' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'; ?> py-2 px-1 border-b-2 font-medium text-sm\">\n                        Pending Approval \n                        <?php if ($pending_count > 0): ?>\n                            <span class=\"bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded-full ml-2\">\n                                <?php echo $pending_count; ?>\n                            </span>\n                        <?php endif; ?>\n                    </a>\n                    <a href=\"?filter=approved\" \n                       class=\"<?php echo $filter === 'approved' ? 'border-accent text-accent' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'; ?> py-2 px-1 border-b-2 font-medium text-sm\">\n                        Approved Products\n                    </a>\n                    <a href=\"?filter=rejected\" \n                       class=\"<?php echo $filter === 'rejected' ? 'border-accent text-accent' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'; ?> py-2 px-1 border-b-2 font-medium text-sm\">\n                        Rejected Products\n                    </a>\n                    <a href=\"?filter=all\" \n                       class=\"<?php echo $filter === 'all' ? 'border-accent text-accent' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'; ?> py-2 px-1 border-b-2 font-medium text-sm\">\n                        All Products\n                    </a>\n                </nav>\n            </div>\n        </div>\n        \n        <div class=\"bg-white shadow rounded-lg\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-xl font-semibold text-gray-900 capitalize\">\n                    <?php echo $filter === 'all' ? 'All' : $filter; ?> Products\n                    <span class=\"bg-gray-100 text-gray-800 text-sm font-medium px-2.5 py-0.5 rounded-full ml-2\">\n                        <?php echo count($products); ?>\n                    </span>\n                </h2>\n            </div>\n            \n            <?php if (empty($products)): ?>\n                <div class=\"px-6 py-8 text-center text-gray-500\">\n                    <div class=\"text-6xl mb-4\">üì¶</div>\n                    <h3 class=\"text-lg font-medium text-gray-900 mb-2\">No Products Found</h3>\n                    <p>No products match the current filter criteria.</p>\n                </div>\n            <?php else: ?>\n                <div class=\"overflow-x-auto\">\n                    <table class=\"min-w-full divide-y divide-gray-200\">\n                        <thead class=\"bg-gray-50\">\n                            <tr>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Product</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Vendor</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Category</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Price</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Date</th>\n                                <?php if ($filter === 'pending'): ?>\n                                    <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                                <?php endif; ?>\n                            </tr>\n                        </thead>\n                        <tbody class=\"bg-white divide-y divide-gray-200\">\n                            <?php foreach ($products as $product): ?>\n                                <tr>\n                                    <td class=\"px-6 py-4\">\n                                        <div class=\"flex items-center\">\n                                            <div class=\"flex-shrink-0 h-16 w-16\">\n                                                <?php if (!empty($product['images'])): ?>\n                                                    <img class=\"h-16 w-16 object-cover rounded-lg\" src=\"<?php echo htmlspecialchars($product['images'][0]); ?>\" alt=\"\">\n                                                <?php else: ?>\n                                                    <div class=\"h-16 w-16 bg-gray-200 rounded-lg flex items-center justify-center\">\n                                                        <span class=\"text-gray-400 text-xs\">No Image</span>\n                                                    </div>\n                                                <?php endif; ?>\n                                            </div>\n                                            <div class=\"ml-4\">\n                                                <div class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($product['name']); ?></div>\n                                                <div class=\"text-sm text-gray-500\">SKU: <?php echo htmlspecialchars($product['sku'] ?? 'N/A'); ?></div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm text-gray-900\"><?php echo htmlspecialchars($product['business_name'] ?? 'Admin'); ?></div>\n                                        <div class=\"text-sm text-gray-500\"><?php echo htmlspecialchars($product['vendor_email'] ?? ''); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm text-gray-900\"><?php echo htmlspecialchars($product['category_name']); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm font-medium text-gray-900\">\n                                            <?php if ($product['sale_price']): ?>\n                                                <span class=\"text-red-600\">$<?php echo number_format($product['sale_price'], 2); ?></span>\n                                                <span class=\"text-gray-500 line-through ml-2\">$<?php echo number_format($product['price'], 2); ?></span>\n                                            <?php else: ?>\n                                                $<?php echo number_format($product['price'], 2); ?>\n                                            <?php endif; ?>\n                                        </div>\n                                        <div class=\"text-sm text-gray-500\">Stock: <?php echo $product['stock_quantity']; ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <?php if ($product['admin_approved']): ?>\n                                            <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\n                                                Approved\n                                            </span>\n                                        <?php else: ?>\n                                            <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800\">\n                                                Pending\n                                            </span>\n                                        <?php endif; ?>\n                                        \n                                        <?php if ($product['status'] === 'inactive'): ?>\n                                            <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 ml-2\">\n                                                Rejected\n                                            </span>\n                                        <?php endif; ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm text-gray-900\"><?php echo date('M j, Y', strtotime($product['created_at'])); ?></div>\n                                        <div class=\"text-sm text-gray-500\"><?php echo date('g:i A', strtotime($product['created_at'])); ?></div>\n                                    </td>\n                                    \n                                    <?php if ($filter === 'pending'): ?>\n                                        <td class=\"px-6 py-4 whitespace-nowrap\">\n                                            <div class=\"flex space-x-2\">\n                                                <!-- Approve Button -->\n                                                <form method=\"POST\" class=\"inline\">\n                                                    <input type=\"hidden\" name=\"csrf_token\" value=\"<?php echo htmlspecialchars($_SESSION['csrf_token']); ?>\">\n                                                    <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $product['id']; ?>\">\n                                                    <button type=\"submit\" name=\"approve_product\" \n                                                            class=\"bg-green-600 text-white px-3 py-1 rounded-md text-xs font-medium hover:bg-green-700 transition duration-200\"\n                                                            onclick=\"return confirm('Approve this product?')\">\n                                                        Approve\n                                                    </button>\n                                                </form>\n                                                \n                                                <!-- Reject Button -->\n                                                <form method=\"POST\" class=\"inline\">\n                                                    <input type=\"hidden\" name=\"csrf_token\" value=\"<?php echo htmlspecialchars($_SESSION['csrf_token']); ?>\">\n                                                    <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $product['id']; ?>\">\n                                                    <input type=\"hidden\" name=\"reason\" value=\"Quality standards not met\">\n                                                    <button type=\"submit\" name=\"reject_product\" \n                                                            class=\"bg-red-600 text-white px-3 py-1 rounded-md text-xs font-medium hover:bg-red-700 transition duration-200\"\n                                                            onclick=\"return confirm('Reject this product?')\">\n                                                        Reject\n                                                    </button>\n                                                </form>\n                                            </div>\n                                        </td>\n                                    <?php endif; ?>\n                                </tr>\n                            <?php endforeach; ?>\n                        </tbody>\n                    </table>\n                </div>\n            <?php endif; ?>\n        </div>\n        \n        <!-- Statistics -->\n        <div class=\"mt-8 grid grid-cols-1 md:grid-cols-4 gap-6\">\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-yellow-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Pending Approval</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $pending_count; ?></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>","size_bytes":17451}},"version":1}
=======
{"file_contents":{"cart.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/cart.php';\n\nrequire_login();\n\n$cart_manager = new CartManager();\n$message = '';\n\n// Handle cart updates\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    if (isset($_POST['update_quantity'])) {\n        $product_id = $_POST['product_id'];\n        $quantity = max(0, $_POST['quantity']);\n        \n        $result = $cart_manager->update_cart_quantity($_SESSION['user_id'], $product_id, $quantity);\n        $message = $result['message'];\n    } elseif (isset($_POST['remove_item'])) {\n        $product_id = $_POST['product_id'];\n        \n        $result = $cart_manager->remove_from_cart($_SESSION['user_id'], $product_id);\n        $message = $result['message'];\n    }\n}\n\n$cart_items = $cart_manager->get_cart_items($_SESSION['user_id']);\n$cart_total = $cart_manager->get_cart_total($_SESSION['user_id']);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Shopping Cart - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        'orange': {\n                            500: '#f97316'\n                        }\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Shopping Cart</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"products.php\" class=\"text-gray-700 hover:text-orange-500\">Continue Shopping</a>\n                    <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                    <a href=\"logout.php\" class=\"text-orange-500 hover:text-orange-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-8\">Shopping Cart</h1>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <?php if (empty($cart_items)): ?>\n            <div class=\"text-center py-12\">\n                <div class=\"text-gray-400 text-6xl mb-4\">üõí</div>\n                <h3 class=\"text-xl font-medium text-gray-900 mb-2\">Your cart is empty</h3>\n                <p class=\"text-gray-500 mb-6\">Add some products to get started!</p>\n                <a href=\"products.php\" class=\"bg-orange-500 text-white px-6 py-3 rounded-md font-medium hover:bg-orange-600 transition duration-200\">\n                    Start Shopping\n                </a>\n            </div>\n        <?php else: ?>\n            <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                <!-- Cart Items -->\n                <div class=\"lg:col-span-2\">\n                    <div class=\"bg-white rounded-lg shadow-sm\">\n                        <div class=\"px-6 py-4 border-b border-gray-200\">\n                            <h2 class=\"text-lg font-semibold text-gray-900\">Cart Items (<?php echo count($cart_items); ?>)</h2>\n                        </div>\n                        \n                        <div class=\"divide-y divide-gray-200\">\n                            <?php foreach ($cart_items as $item): ?>\n                                <div class=\"p-6\">\n                                    <div class=\"flex items-start space-x-4\">\n                                        <div class=\"flex-shrink-0\">\n                                            <?php if (!empty($item['images'])): ?>\n                                                <img src=\"<?php echo $item['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($item['name']); ?>\" \n                                                     class=\"w-20 h-20 object-cover rounded-md\">\n                                            <?php else: ?>\n                                                <div class=\"w-20 h-20 bg-gray-200 rounded-md flex items-center justify-center\">\n                                                    <span class=\"text-gray-400 text-xs\">No Image</span>\n                                                </div>\n                                            <?php endif; ?>\n                                        </div>\n                                        \n                                        <div class=\"flex-1\">\n                                            <div class=\"flex justify-between\">\n                                                <div>\n                                                    <h3 class=\"text-lg font-medium text-gray-900\">\n                                                        <a href=\"product-detail.php?id=<?php echo $item['product_id']; ?>\" class=\"hover:text-orange-500\">\n                                                            <?php echo htmlspecialchars($item['name']); ?>\n                                                        </a>\n                                                    </h3>\n                                                    <p class=\"text-sm text-gray-600\">by <?php echo htmlspecialchars($item['business_name']); ?></p>\n                                                    <p class=\"text-lg font-semibold text-gray-900 mt-2\">$<?php echo number_format($item['current_price'], 2); ?></p>\n                                                </div>\n                                                \n                                                <div class=\"text-right\">\n                                                    <p class=\"text-lg font-bold text-gray-900\">$<?php echo number_format($item['total_price'], 2); ?></p>\n                                                </div>\n                                            </div>\n                                            \n                                            <div class=\"flex items-center justify-between mt-4\">\n                                                <form method=\"POST\" class=\"flex items-center space-x-2\">\n                                                    <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $item['product_id']; ?>\">\n                                                    <label for=\"quantity_<?php echo $item['product_id']; ?>\" class=\"text-sm text-gray-700\">Qty:</label>\n                                                    <select name=\"quantity\" id=\"quantity_<?php echo $item['product_id']; ?>\" \n                                                            class=\"border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500\"\n                                                            onchange=\"this.form.submit()\">\n                                                        <?php for ($i = 1; $i <= min(10, $item['stock_quantity']); $i++): ?>\n                                                            <option value=\"<?php echo $i; ?>\" <?php echo $i == $item['quantity'] ? 'selected' : ''; ?>>\n                                                                <?php echo $i; ?>\n                                                            </option>\n                                                        <?php endfor; ?>\n                                                    </select>\n                                                    <input type=\"hidden\" name=\"update_quantity\" value=\"1\">\n                                                </form>\n                                                \n                                                <form method=\"POST\" class=\"inline\">\n                                                    <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $item['product_id']; ?>\">\n                                                    <button type=\"submit\" name=\"remove_item\" \n                                                            class=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n                                                            onclick=\"return confirm('Remove this item from cart?')\">\n                                                        Remove\n                                                    </button>\n                                                </form>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            <?php endforeach; ?>\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Order Summary -->\n                <div class=\"lg:col-span-1\">\n                    <div class=\"bg-white rounded-lg shadow-sm p-6 sticky top-8\">\n                        <h2 class=\"text-lg font-semibold text-gray-900 mb-4\">Order Summary</h2>\n                        \n                        <div class=\"space-y-3 mb-6\">\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Subtotal</span>\n                                <span class=\"font-medium\">$<?php echo number_format($cart_total, 2); ?></span>\n                            </div>\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Shipping</span>\n                                <span class=\"font-medium\">Free</span>\n                            </div>\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-gray-600\">Tax</span>\n                                <span class=\"font-medium\">$<?php echo number_format($cart_total * 0.08, 2); ?></span>\n                            </div>\n                            <div class=\"border-t pt-3\">\n                                <div class=\"flex justify-between\">\n                                    <span class=\"text-lg font-semibold\">Total</span>\n                                    <span class=\"text-lg font-bold text-orange-600\">$<?php echo number_format($cart_total * 1.08, 2); ?></span>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <a href=\"checkout.php\" class=\"w-full bg-orange-500 text-white py-3 px-4 rounded-md font-medium hover:bg-orange-600 transition duration-200 block text-center\">\n                            Proceed to Checkout\n                        </a>\n                        \n                        <a href=\"products.php\" class=\"w-full mt-3 border border-gray-300 text-gray-700 py-3 px-4 rounded-md font-medium hover:bg-gray-50 transition duration-200 block text-center\">\n                            Continue Shopping\n                        </a>\n                    </div>\n                </div>\n            </div>\n        <?php endif; ?>\n    </div>\n</body>\n</html>\n","size_bytes":11496},"checkout.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/cart.php';\nrequire_once './includes/order.php';\n\nrequire_login();\n\n$cart_manager = new CartManager();\n$order_manager = new OrderManager();\n\n$cart_items = $cart_manager->get_cart_items($_SESSION['user_id']);\n$cart_total = $cart_manager->get_cart_total($_SESSION['user_id']);\n\nif (empty($cart_items)) {\n    redirect('cart.php');\n}\n\n$error = '';\n$success = '';\n$coupon_discount = 0;\n$coupon_message = '';\n\n// Handle coupon validation\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['apply_coupon'])) {\n    $coupon_code = sanitize_input($_POST['coupon_code']);\n    $result = $order_manager->validate_coupon($coupon_code, $cart_total);\n    \n    if ($result['success']) {\n        $coupon_discount = $result['discount'];\n        $coupon_message = \"Coupon applied! You saved $\" . number_format($coupon_discount, 2);\n        $_SESSION['checkout_coupon'] = $coupon_code;\n        $_SESSION['checkout_discount'] = $coupon_discount;\n    } else {\n        $coupon_message = $result['message'];\n    }\n}\n\n// Handle order placement\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['place_order'])) {\n    $shipping_address = sanitize_input($_POST['shipping_address']);\n    $billing_address = sanitize_input($_POST['billing_address']);\n    $payment_method = sanitize_input($_POST['payment_method']);\n    $coupon_code = $_SESSION['checkout_coupon'] ?? null;\n    \n    if (empty($shipping_address) || empty($billing_address) || empty($payment_method)) {\n        $error = 'Please fill in all required fields';\n    } else {\n        $result = $order_manager->create_order(\n            $_SESSION['user_id'], \n            $cart_items, \n            $shipping_address, \n            $billing_address, \n            $payment_method,\n            $coupon_code\n        );\n        \n        if ($result['success']) {\n            // Clear checkout session data\n            unset($_SESSION['checkout_coupon']);\n            unset($_SESSION['checkout_discount']);\n            \n            redirect('order-confirmation.php?order=' . $result['order_number']);\n        } else {\n            $error = $result['message'];\n        }\n    }\n}\n\n// Use session discount if available\nif (isset($_SESSION['checkout_discount'])) {\n    $coupon_discount = $_SESSION['checkout_discount'];\n}\n\n$tax_amount = ($cart_total - $coupon_discount) * 0.08;\n$final_total = $cart_total + $tax_amount - $coupon_discount;\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Checkout - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        'orange': {\n                            500: '#f97316'\n                        }\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Checkout</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"cart.php\" class=\"text-gray-700 hover:text-orange-500\">Back to Cart</a>\n                    <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-8\">Checkout</h1>\n        \n        <?php if ($error): ?>\n            <div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\">\n                <?php echo $error; ?>\n            </div>\n        <?php endif; ?>\n        \n        <?php if ($coupon_message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $coupon_message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <form method=\"POST\" class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <!-- Checkout Form -->\n            <div class=\"lg:col-span-2 space-y-8\">\n                <!-- Shipping Address -->\n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Shipping Address</h2>\n                    <textarea name=\"shipping_address\" rows=\"4\" required \n                              placeholder=\"Enter your full shipping address...\"\n                              class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500\"></textarea>\n                </div>\n                \n                <!-- Billing Address -->\n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Billing Address</h2>\n                    <div class=\"mb-4\">\n                        <label class=\"flex items-center\">\n                            <input type=\"checkbox\" id=\"same_as_shipping\" class=\"mr-2\" onchange=\"toggleBillingAddress()\">\n                            <span class=\"text-sm text-gray-700\">Same as shipping address</span>\n                        </label>\n                    </div>\n                    <textarea name=\"billing_address\" id=\"billing_address\" rows=\"4\" required \n                              placeholder=\"Enter your billing address...\"\n                              class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500\"></textarea>\n                </div>\n                \n                <!-- Payment Method -->\n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Payment Method</h2>\n                    <div class=\"space-y-3\">\n                        <label class=\"flex items-center p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer\">\n                            <input type=\"radio\" name=\"payment_method\" value=\"credit_card\" required class=\"mr-3\">\n                            <div class=\"flex items-center\">\n                                <span class=\"text-2xl mr-2\">üí≥</span>\n                                <span class=\"font-medium\">Credit Card</span>\n                            </div>\n                        </label>\n                        \n                        <label class=\"flex items-center p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer\">\n                            <input type=\"radio\" name=\"payment_method\" value=\"paypal\" required class=\"mr-3\">\n                            <div class=\"flex items-center\">\n                                <span class=\"text-2xl mr-2\">üÖøÔ∏è</span>\n                                <span class=\"font-medium\">PayPal</span>\n                            </div>\n                        </label>\n                        \n                        <label class=\"flex items-center p-3 border border-gray-200 rounded-md hover:bg-gray-50 cursor-pointer\">\n                            <input type=\"radio\" name=\"payment_method\" value=\"apple_pay\" required class=\"mr-3\">\n                            <div class=\"flex items-center\">\n                                <span class=\"text-2xl mr-2\">üçé</span>\n                                <span class=\"font-medium\">Apple Pay</span>\n                            </div>\n                        </label>\n                        \n                        <label class=\"flex items-center p-3 border border-green-200 rounded-md hover:bg-green-50 cursor-pointer bg-green-25\">\n                            <input type=\"radio\" name=\"payment_method\" value=\"mobile_money_cameroon\" required class=\"mr-3\">\n                            <div class=\"flex items-center\">\n                                <span class=\"text-2xl mr-2\">üì±</span>\n                                <div>\n                                    <span class=\"font-medium text-green-700\">Mobile Money (Cameroon)</span>\n                                    <p class=\"text-sm text-green-600\">Send payment to: 679871130</p>\n                                </div>\n                            </div>\n                        </label>\n                    </div>\n                    \n                    <div class=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\">\n                        <p class=\"text-sm text-blue-800\">\n                            <strong>Mobile Money Instructions:</strong> For Mobile Money payments, send the total amount to <strong>679871130</strong> and include your order number in the transaction message.\n                        </p>\n                    </div>\n                </div>\n            </div>\n            \n            <!-- Order Summary -->\n            <div class=\"lg:col-span-1\">\n                <div class=\"bg-white rounded-lg shadow-sm p-6 sticky top-8\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Order Summary</h2>\n                    \n                    <!-- Order Items -->\n                    <div class=\"space-y-3 mb-6 max-h-60 overflow-y-auto\">\n                        <?php foreach ($cart_items as $item): ?>\n                            <div class=\"flex items-center space-x-3\">\n                                <?php if (!empty($item['images'])): ?>\n                                    <img src=\"<?php echo $item['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($item['name']); ?>\" \n                                         class=\"w-12 h-12 object-cover rounded\">\n                                <?php else: ?>\n                                    <div class=\"w-12 h-12 bg-gray-200 rounded flex items-center justify-center\">\n                                        <span class=\"text-gray-400 text-xs\">No Image</span>\n                                    </div>\n                                <?php endif; ?>\n                                <div class=\"flex-1\">\n                                    <p class=\"text-sm font-medium text-gray-900 line-clamp-1\"><?php echo htmlspecialchars($item['name']); ?></p>\n                                    <p class=\"text-xs text-gray-500\">Qty: <?php echo $item['quantity']; ?></p>\n                                </div>\n                                <p class=\"text-sm font-medium\">$<?php echo number_format($item['total_price'], 2); ?></p>\n                            </div>\n                        <?php endforeach; ?>\n                    </div>\n                    \n                    <!-- Coupon Code -->\n                    <div class=\"mb-6 pb-6 border-b border-gray-200\">\n                        <div class=\"flex space-x-2\">\n                            <input type=\"text\" name=\"coupon_code\" placeholder=\"Coupon code\" \n                                   value=\"<?php echo $_SESSION['checkout_coupon'] ?? ''; ?>\"\n                                   class=\"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500\">\n                            <button type=\"submit\" name=\"apply_coupon\" \n                                    class=\"px-4 py-2 bg-gray-500 text-white rounded-md text-sm hover:bg-gray-600 transition duration-200\">\n                                Apply\n                            </button>\n                        </div>\n                    </div>\n                    \n                    <!-- Totals -->\n                    <div class=\"space-y-3 mb-6\">\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Subtotal</span>\n                            <span class=\"font-medium\">$<?php echo number_format($cart_total, 2); ?></span>\n                        </div>\n                        \n                        <?php if ($coupon_discount > 0): ?>\n                            <div class=\"flex justify-between text-green-600\">\n                                <span>Discount</span>\n                                <span>-$<?php echo number_format($coupon_discount, 2); ?></span>\n                            </div>\n                        <?php endif; ?>\n                        \n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Shipping</span>\n                            <span class=\"font-medium text-green-600\">Free</span>\n                        </div>\n                        <div class=\"flex justify-between\">\n                            <span class=\"text-gray-600\">Tax</span>\n                            <span class=\"font-medium\">$<?php echo number_format($tax_amount, 2); ?></span>\n                        </div>\n                        <div class=\"border-t pt-3\">\n                            <div class=\"flex justify-between\">\n                                <span class=\"text-lg font-semibold\">Total</span>\n                                <span class=\"text-lg font-bold text-orange-600\">$<?php echo number_format($final_total, 2); ?></span>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <button type=\"submit\" name=\"place_order\" \n                            class=\"w-full bg-orange-500 text-white py-3 px-4 rounded-md font-medium hover:bg-orange-600 transition duration-200\">\n                        Place Order\n                    </button>\n                    \n                    <div class=\"mt-4 text-center\">\n                        <p class=\"text-xs text-gray-500\">\n                            By placing your order, you agree to our Terms of Service and Privacy Policy.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n    \n    <script>\n        function toggleBillingAddress() {\n            const checkbox = document.getElementById('same_as_shipping');\n            const billingAddress = document.getElementById('billing_address');\n            const shippingAddress = document.querySelector('textarea[name=\"shipping_address\"]');\n            \n            if (checkbox.checked) {\n                billingAddress.value = shippingAddress.value;\n                billingAddress.disabled = true;\n                billingAddress.classList.add('bg-gray-100');\n            } else {\n                billingAddress.disabled = false;\n                billingAddress.classList.remove('bg-gray-100');\n            }\n        }\n        \n        // Auto-copy shipping to billing when shipping changes\n        document.querySelector('textarea[name=\"shipping_address\"]').addEventListener('input', function() {\n            const checkbox = document.getElementById('same_as_shipping');\n            if (checkbox.checked) {\n                document.getElementById('billing_address').value = this.value;\n            }\n        });\n    </script>\n</body>\n</html>\n","size_bytes":15354},"index.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/product.php';\n\n$productManager = new ProductManager();\n\n// Get featured products and categories\n$featuredProducts = $productManager->getFeaturedProducts(12);\n$categories = $productManager->getCategories();\n$flashDeals = $productManager->getFlashDeals(6);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title><?php echo SITE_NAME; ?> - Your Premier Marketplace Destination</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    },\n                    fontFamily: {\n                        'sans': ['Inter', 'system-ui', 'sans-serif'],\n                    }\n                }\n            }\n        }\n    </script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n    <style>\n        @keyframes float {\n            0%, 100% { transform: translateY(0px) rotate(0deg); }\n            33% { transform: translateY(-20px) rotate(120deg); }\n            66% { transform: translateY(10px) rotate(240deg); }\n        }\n        @keyframes float-reverse {\n            0%, 100% { transform: translateY(0px) rotate(0deg); }\n            33% { transform: translateY(15px) rotate(-90deg); }\n            66% { transform: translateY(-25px) rotate(-180deg); }\n        }\n        @keyframes spin-slow {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n        }\n        .animate-float { animation: float 6s ease-in-out infinite; }\n        .animate-float-reverse { animation: float-reverse 8s ease-in-out infinite; }\n        .animate-spin-slow { animation: spin-slow 20s linear infinite; }\n        .floating-element {\n            backdrop-filter: blur(10px);\n            box-shadow: 0 8px 32px 0 rgba(255, 255, 255, 0.1);\n        }\n        .card-3d {\n            transform-style: preserve-3d;\n            transition: transform 0.3s ease;\n        }\n        .card-3d:hover {\n            transform: rotateY(5deg) rotateX(5deg) translateZ(20px);\n        }\n    </style>\n</head>\n<body class=\"bg-gray-50 font-sans\">\n    <!-- Professional Header -->\n    <header class=\"bg-white shadow-sm sticky top-0 z-50 border-b\">\n        <!-- Top Bar -->\n        <div class=\"bg-primary text-white text-sm\">\n            <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2\">\n                <div class=\"flex justify-between items-center\">\n                    <div class=\"flex items-center space-x-6\">\n                        <span>üìç Free shipping on orders over $50</span>\n                        <span>üìû Customer Service: 1-800-MARKET-NEST</span>\n                    </div>\n                    <div class=\"flex items-center space-x-4\">\n                        <?php if (!is_logged_in()): ?>\n                            <a href=\"login.php\" class=\"hover:text-gray-300\">Sign In</a>\n                            <span class=\"text-gray-400\">|</span>\n                            <a href=\"register.php\" class=\"hover:text-gray-300\">Create Account</a>\n                        <?php else: ?>\n                            <span>Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                            <a href=\"logout.php\" class=\"hover:text-gray-300\">Sign Out</a>\n                        <?php endif; ?>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Main Header -->\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex items-center justify-between h-16\">\n                <!-- Logo -->\n                <div class=\"flex items-center\">\n                    <a href=\"index.php\" class=\"flex items-center\">\n                        <div class=\"w-10 h-10 bg-accent rounded-lg flex items-center justify-center mr-3\">\n                            <span class=\"text-white font-bold text-lg\">MN</span>\n                        </div>\n                        <span class=\"text-2xl font-bold text-primary\"><?php echo SITE_NAME; ?></span>\n                    </a>\n                </div>\n                \n                <!-- Search Bar -->\n                <div class=\"flex-1 max-w-2xl mx-8\">\n                    <form action=\"products.php\" method=\"GET\" class=\"relative\">\n                        <div class=\"flex\">\n                            <input type=\"text\" name=\"search\" placeholder=\"Search products, brands, and more...\" \n                                   class=\"flex-1 px-4 py-3 border-2 border-gray-200 rounded-l-lg focus:outline-none focus:border-accent text-gray-700\">\n                            <button type=\"submit\" class=\"bg-accent hover:bg-blue-600 text-white px-6 py-3 rounded-r-lg transition-colors\">\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\n                                </svg>\n                            </button>\n                        </div>\n                    </form>\n                </div>\n                \n                <!-- User Actions -->\n                <div class=\"flex items-center space-x-6\">\n                    <?php if (is_logged_in()): ?>\n                        <?php if (get_user_role() === 'customer'): ?>\n                            <a href=\"cart.php\" class=\"flex items-center text-gray-700 hover:text-accent relative\">\n                                <svg class=\"w-6 h-6 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v5a2 2 0 01-2 2H9a2 2 0 01-2-2v-5m6-5V6a2 2 0 00-2-2H9a2 2 0 00-2 2v3\"></path>\n                                </svg>\n                                <span class=\"font-medium\">Cart</span>\n                                <span id=\"cart-count\" class=\"absolute -top-2 -right-2 bg-warning text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">0</span>\n                            </a>\n                        <?php endif; ?>\n                        \n                        <div class=\"relative group\">\n                            <button class=\"flex items-center text-gray-700 hover:text-accent\">\n                                <svg class=\"w-6 h-6 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                                </svg>\n                                <span class=\"font-medium\">Account</span>\n                            </button>\n                            <div class=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200\">\n                                <div class=\"py-2\">\n                                    <?php if (get_user_role() === 'customer'): ?>\n                                        <a href=\"user/dashboard.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Dashboard</a>\n                                    <?php elseif (get_user_role() === 'vendor'): ?>\n                                        <a href=\"vendor/dashboard.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Vendor Panel</a>\n                                    <?php elseif (get_user_role() === 'admin'): ?>\n                                        <a href=\"admin/dashboard.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Admin Panel</a>\n                                    <?php endif; ?>\n                                    <a href=\"order-history.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Orders</a>\n                                    <a href=\"track.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Track Package</a>\n                                    <hr class=\"my-1\">\n                                    <a href=\"logout.php\" class=\"block px-4 py-2 text-gray-700 hover:bg-gray-50\">Sign Out</a>\n                                </div>\n                            </div>\n                        </div>\n                    <?php else: ?>\n                        <a href=\"track.php\" class=\"flex items-center text-gray-700 hover:text-accent\">\n                            <svg class=\"w-6 h-6 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n                            </svg>\n                            <span class=\"font-medium\">Track</span>\n                        </a>\n                        <a href=\"login.php\" class=\"bg-accent text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium\">Sign In</a>\n                    <?php endif; ?>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Category Navigation -->\n        <div class=\"border-t bg-gray-50\">\n            <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                <nav class=\"flex items-center space-x-8 py-3 overflow-x-auto\">\n                    <a href=\"products.php\" class=\"whitespace-nowrap text-gray-700 hover:text-accent font-medium\">All Products</a>\n                    <?php foreach (array_slice($categories, 0, 8) as $category): ?>\n                        <a href=\"products.php?category=<?php echo urlencode($category['name']); ?>\" \n                           class=\"whitespace-nowrap text-gray-700 hover:text-accent flex items-center\">\n                            <span class=\"mr-2\"><?php echo $category['icon'] ?? 'üì¶'; ?></span>\n                            <?php echo htmlspecialchars($category['name']); ?>\n                        </a>\n                    <?php endforeach; ?>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <!-- Hero Section with 3D Animation Background -->\n    <section class=\"relative bg-gradient-to-r from-accent to-blue-600 text-white overflow-hidden\">\n        <!-- 3D Floating Elements Animation -->\n        <div class=\"absolute inset-0 overflow-hidden pointer-events-none\">\n            <div class=\"floating-element absolute top-10 left-10 w-16 h-16 bg-white bg-opacity-10 rounded-lg animate-float\"></div>\n            <div class=\"floating-element absolute top-20 right-20 w-12 h-12 bg-white bg-opacity-10 rounded-full animate-pulse\"></div>\n            <div class=\"floating-element absolute bottom-20 left-20 w-20 h-20 bg-white bg-opacity-10 rounded-lg animate-spin-slow\"></div>\n            <div class=\"floating-element absolute bottom-10 right-10 w-14 h-14 bg-white bg-opacity-10 rounded-full animate-float-reverse\"></div>\n            <div class=\"floating-element absolute top-1/2 left-1/4 w-8 h-8 bg-white bg-opacity-10 rounded-lg animate-bounce\" style=\"animation-delay: 1s;\"></div>\n            <div class=\"floating-element absolute top-1/3 right-1/3 w-10 h-10 bg-white bg-opacity-10 rounded-full animate-float\" style=\"animation-delay: 2s;\"></div>\n        </div>\n        \n        <!-- Gradient Overlay for depth -->\n        <div class=\"absolute inset-0 bg-gradient-to-br from-transparent via-blue-500 to-accent opacity-30\"></div>\n        \n        <div class=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\n            <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center\">\n                <div>\n                    <h1 class=\"text-5xl lg:text-6xl font-bold leading-tight mb-6\">\n                        Discover Everything You Need at \n                        <span class=\"text-yellow-300\"><?php echo SITE_NAME; ?></span>\n                    </h1>\n                    <p class=\"text-xl text-blue-100 mb-8 leading-relaxed\">\n                        From daily essentials to unique finds - explore millions of products with fast delivery, secure payment, and advanced tracking.\n                    </p>\n                    <div class=\"flex flex-col sm:flex-row gap-4\">\n                        <a href=\"products.php\" class=\"bg-white text-accent px-8 py-4 rounded-lg text-lg font-semibold hover:bg-gray-100 transition-colors shadow-lg\">\n                            Start Shopping\n                        </a>\n                        <a href=\"#categories\" class=\"border-2 border-white text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-white hover:text-accent transition-colors\">\n                            Browse Categories\n                        </a>\n                    </div>\n                </div>\n                <div class=\"relative\">\n                    <div class=\"bg-white/10 rounded-2xl p-8 backdrop-blur-sm\">\n                        <div class=\"grid grid-cols-2 gap-4\">\n                            <div class=\"bg-white/20 rounded-lg p-4 text-center\">\n                                <div class=\"text-3xl mb-2\">üöö</div>\n                                <div class=\"font-semibold\">Fast Delivery</div>\n                            </div>\n                            <div class=\"bg-white/20 rounded-lg p-4 text-center\">\n                                <div class=\"text-3xl mb-2\">üîí</div>\n                                <div class=\"font-semibold\">Secure Payment</div>\n                            </div>\n                            <div class=\"bg-white/20 rounded-lg p-4 text-center\">\n                                <div class=\"text-3xl mb-2\">üì±</div>\n                                <div class=\"font-semibold\">Easy Tracking</div>\n                            </div>\n                            <div class=\"bg-white/20 rounded-lg p-4 text-center\">\n                                <div class=\"text-3xl mb-2\">üíØ</div>\n                                <div class=\"font-semibold\">Quality Guarantee</div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n\n    <!-- Flash Deals Section -->\n    <?php if (!empty($flashDeals)): ?>\n    <section class=\"py-12 bg-white\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex items-center justify-between mb-8\">\n                <div>\n                    <h2 class=\"text-3xl font-bold text-gray-900 mb-2\">‚ö° Flash Deals</h2>\n                    <p class=\"text-gray-600\">Limited time offers - grab them while you can!</p>\n                </div>\n                <a href=\"products.php?deals=1\" class=\"text-accent hover:text-blue-600 font-semibold\">View All Deals ‚Üí</a>\n            </div>\n            <div class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n                <?php foreach ($flashDeals as $product): ?>\n                    <div class=\"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border group\">\n                        <div class=\"relative\">\n                            <img src=\"<?php echo htmlspecialchars($product['image_url'] ?: 'https://via.placeholder.com/200x200?text=Product'); ?>\" \n                                 alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                                 class=\"w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300\">\n                            <div class=\"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded-md text-xs font-bold\">\n                                <?php echo $product['discount_percentage']; ?>% OFF\n                            </div>\n                        </div>\n                        <div class=\"p-3\">\n                            <h3 class=\"font-medium text-gray-900 text-sm mb-2 line-clamp-2\"><?php echo htmlspecialchars($product['name']); ?></h3>\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <span class=\"text-lg font-bold text-gray-900\">$<?php echo number_format($product['sale_price'], 2); ?></span>\n                                    <span class=\"text-sm text-gray-500 line-through ml-1\">$<?php echo number_format($product['price'], 2); ?></span>\n                                </div>\n                                <a href=\"product-detail.php?id=<?php echo $product['id']; ?>\" \n                                   class=\"bg-accent text-white px-2 py-1 rounded text-xs hover:bg-blue-600 transition-colors\">\n                                    View\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                <?php endforeach; ?>\n            </div>\n        </div>\n    </section>\n    <?php endif; ?>\n\n    <!-- Categories Section -->\n    <section id=\"categories\" class=\"py-12 bg-gray-50\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"text-center mb-12\">\n                <h2 class=\"text-3xl font-bold text-gray-900 mb-4\">Shop by Category</h2>\n                <p class=\"text-gray-600 max-w-2xl mx-auto\">Find exactly what you're looking for in our carefully curated categories</p>\n            </div>\n            <div class=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6\">\n                <?php foreach ($categories as $category): ?>\n                    <a href=\"products.php?category=<?php echo urlencode($category['name']); ?>\" \n                       class=\"group bg-white rounded-xl p-6 text-center hover:shadow-lg transition-all duration-300 border hover:border-accent\">\n                        <div class=\"w-16 h-16 bg-gradient-to-br from-accent/10 to-blue-100 rounded-xl flex items-center justify-center mx-auto mb-4 group-hover:from-accent/20 group-hover:to-blue-200 transition-colors\">\n                            <span class=\"text-2xl\"><?php echo $category['icon'] ?? 'üì¶'; ?></span>\n                        </div>\n                        <h3 class=\"font-semibold text-gray-900 mb-1\"><?php echo htmlspecialchars($category['name']); ?></h3>\n                        <p class=\"text-sm text-gray-500\"><?php echo $category['product_count']; ?> items</p>\n                    </a>\n                <?php endforeach; ?>\n            </div>\n        </div>\n    </section>\n\n    <!-- Featured Products -->\n    <section class=\"py-12 bg-white\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex items-center justify-between mb-8\">\n                <div>\n                    <h2 class=\"text-3xl font-bold text-gray-900 mb-2\">Featured Products</h2>\n                    <p class=\"text-gray-600\">Handpicked items just for you</p>\n                </div>\n                <a href=\"products.php\" class=\"text-accent hover:text-blue-600 font-semibold\">View All Products ‚Üí</a>\n            </div>\n            <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-6\">\n                <?php foreach ($featuredProducts as $product): ?>\n                    <div class=\"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden border group\">\n                        <div class=\"relative\">\n                            <img src=\"<?php echo htmlspecialchars($product['image_url'] ?: 'https://via.placeholder.com/200x200?text=Product'); ?>\" \n                                 alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                                 class=\"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300\">\n                        </div>\n                        <div class=\"p-4\">\n                            <h3 class=\"font-medium text-gray-900 mb-2 line-clamp-2\"><?php echo htmlspecialchars($product['name']); ?></h3>\n                            <p class=\"text-gray-500 text-sm mb-3 line-clamp-2\"><?php echo htmlspecialchars(substr($product['description'], 0, 80)); ?>...</p>\n                            <div class=\"flex items-center justify-between\">\n                                <span class=\"text-xl font-bold text-gray-900\">$<?php echo number_format($product['price'], 2); ?></span>\n                                <a href=\"product-detail.php?id=<?php echo $product['id']; ?>\" \n                                   class=\"bg-accent text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-600 transition-colors\">\n                                    View\n                                </a>\n                            </div>\n                        </div>\n                    </div>\n                <?php endforeach; ?>\n            </div>\n        </div>\n    </section>\n\n    <!-- Features Section -->\n    <section class=\"py-16 bg-primary text-white\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"text-center mb-12\">\n                <h2 class=\"text-3xl font-bold mb-4\">Why Choose Market Nest?</h2>\n                <p class=\"text-lg text-gray-300\">Experience the difference with our premium marketplace</p>\n            </div>\n            <div class=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n                <div class=\"text-center\">\n                    <div class=\"w-20 h-20 bg-accent rounded-2xl flex items-center justify-center mx-auto mb-6\">\n                        <svg class=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <h3 class=\"text-xl font-bold mb-3\">Verified Quality</h3>\n                    <p class=\"text-gray-300 leading-relaxed\">Every product is carefully vetted by our quality assurance team to ensure you receive only the best.</p>\n                </div>\n                \n                <div class=\"text-center\">\n                    <div class=\"w-20 h-20 bg-success rounded-2xl flex items-center justify-center mx-auto mb-6\">\n                        <svg class=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\"></path>\n                        </svg>\n                    </div>\n                    <h3 class=\"text-xl font-bold mb-3\">Lightning Fast Delivery</h3>\n                    <p class=\"text-gray-300 leading-relaxed\">Get your orders delivered in record time with our optimized logistics network and real-time tracking.</p>\n                </div>\n                \n                <div class=\"text-center\">\n                    <div class=\"w-20 h-20 bg-warning rounded-2xl flex items-center justify-center mx-auto mb-6\">\n                        <svg class=\"w-10 h-10 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"></path>\n                        </svg>\n                    </div>\n                    <h3 class=\"text-xl font-bold mb-3\">Secure & Protected</h3>\n                    <p class=\"text-gray-300 leading-relaxed\">Shop with confidence knowing your data and transactions are protected by bank-grade security.</p>\n                </div>\n            </div>\n        </div>\n    </section>\n\n    <!-- Footer -->\n    <footer class=\"bg-gray-900 text-white\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n            <div class=\"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8\">\n                <div>\n                    <div class=\"flex items-center mb-4\">\n                        <div class=\"w-8 h-8 bg-accent rounded-lg flex items-center justify-center mr-2\">\n                            <span class=\"text-white font-bold\">MN</span>\n                        </div>\n                        <span class=\"text-xl font-bold\"><?php echo SITE_NAME; ?></span>\n                    </div>\n                    <p class=\"text-gray-400 mb-4 leading-relaxed\">Your trusted marketplace for quality products, fast delivery, and exceptional service.</p>\n                    <div class=\"flex space-x-4\">\n                        <a href=\"#\" class=\"text-gray-400 hover:text-accent transition-colors\">\n                            <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z\"/>\n                            </svg>\n                        </a>\n                        <a href=\"#\" class=\"text-gray-400 hover:text-accent transition-colors\">\n                            <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z\"/>\n                            </svg>\n                        </a>\n                        <a href=\"#\" class=\"text-gray-400 hover:text-accent transition-colors\">\n                            <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path d=\"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.754-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001 12.017.001z\"/>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n                \n                <div>\n                    <h4 class=\"font-semibold mb-4 text-lg\">Shop</h4>\n                    <ul class=\"space-y-3 text-gray-400\">\n                        <li><a href=\"products.php\" class=\"hover:text-accent transition-colors\">All Products</a></li>\n                        <li><a href=\"products.php?deals=1\" class=\"hover:text-accent transition-colors\">Flash Deals</a></li>\n                        <li><a href=\"products.php?featured=1\" class=\"hover:text-accent transition-colors\">Featured Items</a></li>\n                        <li><a href=\"vendor-application.php\" class=\"hover:text-accent transition-colors\">Become a Seller</a></li>\n                    </ul>\n                </div>\n                \n                <div>\n                    <h4 class=\"font-semibold mb-4 text-lg\">Customer Service</h4>\n                    <ul class=\"space-y-3 text-gray-400\">\n                        <li><a href=\"track.php\" class=\"hover:text-accent transition-colors\">Track Your Order</a></li>\n                        <li><a href=\"#\" class=\"hover:text-accent transition-colors\">Help Center</a></li>\n                        <li><a href=\"#\" class=\"hover:text-accent transition-colors\">Returns & Refunds</a></li>\n                        <li><a href=\"#\" class=\"hover:text-accent transition-colors\">Contact Support</a></li>\n                    </ul>\n                </div>\n                \n                <div>\n                    <h4 class=\"font-semibold mb-4 text-lg\">Account</h4>\n                    <ul class=\"space-y-3 text-gray-400\">\n                        <?php if (is_logged_in()): ?>\n                            <li><a href=\"user/dashboard.php\" class=\"hover:text-accent transition-colors\">My Account</a></li>\n                            <li><a href=\"order-history.php\" class=\"hover:text-accent transition-colors\">Order History</a></li>\n                        <?php else: ?>\n                            <li><a href=\"login.php\" class=\"hover:text-accent transition-colors\">Sign In</a></li>\n                            <li><a href=\"register.php\" class=\"hover:text-accent transition-colors\">Create Account</a></li>\n                        <?php endif; ?>\n                        <li><a href=\"#\" class=\"hover:text-accent transition-colors\">Privacy Policy</a></li>\n                        <li><a href=\"#\" class=\"hover:text-accent transition-colors\">Terms of Service</a></li>\n                    </ul>\n                </div>\n            </div>\n            \n            <div class=\"border-t border-gray-800 pt-8\">\n                <div class=\"flex flex-col md:flex-row justify-between items-center\">\n                    <p class=\"text-gray-400 mb-4 md:mb-0\">&copy; 2024 <?php echo SITE_NAME; ?>. All rights reserved.</p>\n                    <div class=\"flex items-center space-x-6 text-sm text-gray-400\">\n                        <span>üîí Secure Shopping</span>\n                        <span>üöö Fast Delivery</span>\n                        <span>üí≥ Multiple Payment Options</span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </footer>\n\n    <!-- Scripts -->\n    <script>\n        // Update cart count on page load\n        if (document.getElementById('cart-count')) {\n            fetch('api/cart-count.php')\n                .then(response => response.json())\n                .then(data => {\n                    document.getElementById('cart-count').textContent = data.count || 0;\n                })\n                .catch(error => console.error('Error fetching cart count:', error));\n        }\n    </script>\n</body>\n</html>","size_bytes":31147},"login.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/auth.php';\n\n$auth = new Auth();\n$error = '';\n$success = '';\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $username = sanitize_input($_POST['username']);\n    $password = $_POST['password'];\n    \n    $result = $auth->login($username, $password);\n    \n    if ($result['success']) {\n        $success = $result['message'];\n        // Redirect based on role\n        $role = get_user_role();\n        if ($role === 'admin') {\n            redirect('admin/dashboard.php');\n        } elseif ($role === 'vendor') {\n            redirect('vendor/dashboard.php');\n        } else {\n            redirect('index.php');\n        }\n    } else {\n        $error = $result['message'];\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Sign In - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    },\n                    fontFamily: {\n                        'sans': ['Inter', 'system-ui', 'sans-serif'],\n                    }\n                }\n            }\n        }\n    </script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n</head>\n<body class=\"bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen font-sans\">\n    <div class=\"min-h-screen flex\">\n        <!-- Left Side - Branding -->\n        <div class=\"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary via-secondary to-accent relative overflow-hidden\">\n            <div class=\"absolute inset-0 bg-black/20\"></div>\n            <div class=\"relative z-10 flex items-center justify-center w-full p-12\">\n                <div class=\"text-center text-white\">\n                    <div class=\"flex items-center justify-center mb-8\">\n                        <div class=\"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mr-4\">\n                            <span class=\"text-white font-bold text-2xl\">MN</span>\n                        </div>\n                        <span class=\"text-4xl font-bold\"><?php echo SITE_NAME; ?></span>\n                    </div>\n                    <h2 class=\"text-3xl font-bold mb-6\">Welcome Back!</h2>\n                    <p class=\"text-xl text-blue-100 leading-relaxed max-w-md\">\n                        Sign in to access your account and continue your amazing shopping experience.\n                    </p>\n                    <div class=\"mt-12 grid grid-cols-3 gap-6\">\n                        <div class=\"text-center\">\n                            <div class=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"></path>\n                                </svg>\n                            </div>\n                            <p class=\"text-sm\">Secure</p>\n                        </div>\n                        <div class=\"text-center\">\n                            <div class=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 10V3L4 14h7v7l9-11h-7z\"></path>\n                                </svg>\n                            </div>\n                            <p class=\"text-sm\">Fast</p>\n                        </div>\n                        <div class=\"text-center\">\n                            <div class=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mx-auto mb-3\">\n                                <svg class=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n                                </svg>\n                            </div>\n                            <p class=\"text-sm\">Trusted</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Right Side - Login Form -->\n        <div class=\"flex-1 flex items-center justify-center p-8 lg:p-12\">\n            <div class=\"w-full max-w-md space-y-8\">\n                <!-- Mobile Logo -->\n                <div class=\"lg:hidden text-center\">\n                    <div class=\"flex items-center justify-center mb-6\">\n                        <div class=\"w-12 h-12 bg-accent rounded-xl flex items-center justify-center mr-3\">\n                            <span class=\"text-white font-bold text-lg\">MN</span>\n                        </div>\n                        <span class=\"text-2xl font-bold text-primary\"><?php echo SITE_NAME; ?></span>\n                    </div>\n                </div>\n\n                <div>\n                    <h2 class=\"text-3xl font-bold text-gray-900 mb-2\">Sign in</h2>\n                    <p class=\"text-gray-600\">Enter your credentials to access your account</p>\n                </div>\n                \n                <?php if ($error): ?>\n                    <div class=\"bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg\">\n                        <div class=\"flex\">\n                            <div class=\"flex-shrink-0\">\n                                <svg class=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                    <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\" />\n                                </svg>\n                            </div>\n                            <div class=\"ml-3\">\n                                <p class=\"text-sm text-red-700\"><?php echo $error; ?></p>\n                            </div>\n                        </div>\n                    </div>\n                <?php endif; ?>\n                \n                <?php if ($success): ?>\n                    <div class=\"bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg\">\n                        <div class=\"flex\">\n                            <div class=\"flex-shrink-0\">\n                                <svg class=\"h-5 w-5 text-green-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                    <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\" />\n                                </svg>\n                            </div>\n                            <div class=\"ml-3\">\n                                <p class=\"text-sm text-green-700\"><?php echo $success; ?></p>\n                            </div>\n                        </div>\n                    </div>\n                <?php endif; ?>\n                \n                <form class=\"space-y-6\" method=\"POST\">\n                    <div>\n                        <label for=\"username\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Username or Email\n                        </label>\n                        <div class=\"relative\">\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                                </svg>\n                            </div>\n                            <input id=\"username\" name=\"username\" type=\"text\" required \n                                   class=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                   placeholder=\"Enter your username or email\">\n                        </div>\n                    </div>\n                    \n                    <div>\n                        <label for=\"password\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Password\n                        </label>\n                        <div class=\"relative\">\n                            <div class=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                <svg class=\"h-5 w-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"></path>\n                                </svg>\n                            </div>\n                            <input id=\"password\" name=\"password\" type=\"password\" required \n                                   class=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                   placeholder=\"Enter your password\">\n                        </div>\n                    </div>\n                    \n                    <div class=\"flex items-center justify-between\">\n                        <div class=\"flex items-center\">\n                            <input id=\"remember-me\" name=\"remember-me\" type=\"checkbox\" class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded\">\n                            <label for=\"remember-me\" class=\"ml-2 block text-sm text-gray-700\">\n                                Remember me\n                            </label>\n                        </div>\n                        <a href=\"#\" class=\"text-sm text-accent hover:text-blue-600 font-medium\">\n                            Forgot password?\n                        </a>\n                    </div>\n                    \n                    <div>\n                        <button type=\"submit\" \n                                class=\"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-xl text-white bg-accent hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent transition-all duration-200 shadow-lg hover:shadow-xl\">\n                            <span class=\"absolute left-0 inset-y-0 flex items-center pl-3\">\n                                <svg class=\"h-5 w-5 text-blue-300 group-hover:text-blue-200\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1\"></path>\n                                </svg>\n                            </span>\n                            Sign in to your account\n                        </button>\n                    </div>\n                </form>\n\n                <!-- Divider -->\n                <div class=\"relative\">\n                    <div class=\"absolute inset-0 flex items-center\">\n                        <div class=\"w-full border-t border-gray-300\"></div>\n                    </div>\n                    <div class=\"relative flex justify-center text-sm\">\n                        <span class=\"px-2 bg-white text-gray-500\">New to Market Nest?</span>\n                    </div>\n                </div>\n\n                <!-- Sign up link -->\n                <div class=\"text-center\">\n                    <a href=\"register.php\" class=\"w-full inline-flex justify-center items-center px-4 py-3 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent transition-all duration-200\">\n                        <svg class=\"w-5 h-5 mr-2 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\"></path>\n                        </svg>\n                        Create new account\n                    </a>\n                </div>\n\n                <!-- Back to home -->\n                <div class=\"text-center\">\n                    <a href=\"index.php\" class=\"text-sm text-gray-500 hover:text-accent font-medium\">\n                        ‚Üê Back to <?php echo SITE_NAME; ?>\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>","size_bytes":13843},"logout.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/auth.php';\n\n$auth = new Auth();\n$auth->logout();\nredirect('index.php');\n?>\n","size_bytes":142},"order-confirmation.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/order.php';\n\nrequire_login();\n\n$order_number = $_GET['order'] ?? null;\nif (!$order_number) {\n    redirect('index.php');\n}\n\n$order_manager = new OrderManager();\n\n// Get order by order number\n$database = new Database();\n$db = $database->getConnection();\n$stmt = $db->prepare(\"SELECT id FROM orders WHERE order_number = ? AND user_id = ?\");\n$stmt->execute([$order_number, $_SESSION['user_id']]);\n$order_data = $stmt->fetch(PDO::FETCH_ASSOC);\n\nif (!$order_data) {\n    redirect('index.php');\n}\n\n$order = $order_manager->get_order_by_id($order_data['id'], $_SESSION['user_id']);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Order Confirmation - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        'orange': {\n                            500: '#f97316'\n                        }\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Order Confirmation</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"order-history.php\" class=\"text-gray-700 hover:text-orange-500\">Order History</a>\n                    <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                    <a href=\"logout.php\" class=\"text-orange-500 hover:text-orange-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <!-- Success Message -->\n        <div class=\"text-center mb-8\">\n            <div class=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <span class=\"text-green-600 text-2xl\">‚úì</span>\n            </div>\n            <h1 class=\"text-3xl font-bold text-gray-900 mb-2\">Order Confirmed!</h1>\n            <p class=\"text-gray-600\">Thank you for your purchase. Your order has been placed successfully.</p>\n        </div>\n        \n        <!-- Order Details -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n            <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Order Number</h3>\n                    <p class=\"text-lg font-semibold text-gray-900\"><?php echo $order['order_number']; ?></p>\n                </div>\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Order Date</h3>\n                    <p class=\"text-lg font-semibold text-gray-900\"><?php echo date('M j, Y g:i A', strtotime($order['created_at'])); ?></p>\n                </div>\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Total Amount</h3>\n                    <p class=\"text-lg font-semibold text-orange-600\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                </div>\n            </div>\n            \n            <?php if ($order['tracking_number']): ?>\n                <div class=\"bg-orange-50 border border-orange-200 rounded-md p-4\">\n                    <div class=\"flex items-center\">\n                        <span class=\"text-orange-600 text-xl mr-3\">üì¶</span>\n                        <div>\n                            <h4 class=\"font-medium text-orange-800\">Tracking Information</h4>\n                            <p class=\"text-sm text-orange-700\">\n                                Tracking Number: <strong><?php echo $order['tracking_number']; ?></strong>\n                            </p>\n                            <a href=\"track.php?tracking=<?php echo $order['tracking_number']; ?>\" \n                               class=\"text-sm text-orange-600 hover:text-orange-800 font-medium\">\n                                Track your shipment ‚Üí\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            <?php endif; ?>\n        </div>\n        \n        <!-- Order Items -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n            <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Order Items</h2>\n            <div class=\"divide-y divide-gray-200\">\n                <?php foreach ($order['items'] as $item): ?>\n                    <div class=\"py-4 flex items-center space-x-4\">\n                        <div class=\"flex-shrink-0\">\n                            <?php if (!empty($item['images'])): ?>\n                                <img src=\"<?php echo $item['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($item['name']); ?>\" \n                                     class=\"w-16 h-16 object-cover rounded-md\">\n                            <?php else: ?>\n                                <div class=\"w-16 h-16 bg-gray-200 rounded-md flex items-center justify-center\">\n                                    <span class=\"text-gray-400 text-xs\">No Image</span>\n                                </div>\n                            <?php endif; ?>\n                        </div>\n                        \n                        <div class=\"flex-1\">\n                            <h3 class=\"font-medium text-gray-900\"><?php echo htmlspecialchars($item['name']); ?></h3>\n                            <p class=\"text-sm text-gray-600\">by <?php echo htmlspecialchars($item['business_name']); ?></p>\n                            <p class=\"text-sm text-gray-600\">Quantity: <?php echo $item['quantity']; ?></p>\n                        </div>\n                        \n                        <div class=\"text-right\">\n                            <p class=\"font-medium text-gray-900\">$<?php echo number_format($item['total'], 2); ?></p>\n                            <p class=\"text-sm text-gray-600\">$<?php echo number_format($item['price'], 2); ?> each</p>\n                        </div>\n                    </div>\n                <?php endforeach; ?>\n            </div>\n        </div>\n        \n        <!-- Order Summary -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n            <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Order Summary</h2>\n            <div class=\"space-y-2\">\n                <div class=\"flex justify-between\">\n                    <span class=\"text-gray-600\">Subtotal</span>\n                    <span>$<?php echo number_format($order['total_amount'] - $order['tax_amount'] - $order['shipping_amount'] + $order['discount_amount'], 2); ?></span>\n                </div>\n                \n                <?php if ($order['discount_amount'] > 0): ?>\n                    <div class=\"flex justify-between text-green-600\">\n                        <span>Discount</span>\n                        <span>-$<?php echo number_format($order['discount_amount'], 2); ?></span>\n                    </div>\n                <?php endif; ?>\n                \n                <div class=\"flex justify-between\">\n                    <span class=\"text-gray-600\">Shipping</span>\n                    <span><?php echo $order['shipping_amount'] > 0 ? '$' . number_format($order['shipping_amount'], 2) : 'Free'; ?></span>\n                </div>\n                <div class=\"flex justify-between\">\n                    <span class=\"text-gray-600\">Tax</span>\n                    <span>$<?php echo number_format($order['tax_amount'], 2); ?></span>\n                </div>\n                <div class=\"border-t pt-2\">\n                    <div class=\"flex justify-between font-semibold text-lg\">\n                        <span>Total</span>\n                        <span class=\"text-orange-600\">$<?php echo number_format($order['total_amount'], 2); ?></span>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Addresses -->\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n            <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">Shipping Address</h3>\n                <p class=\"text-gray-700 whitespace-pre-line\"><?php echo htmlspecialchars($order['shipping_address']); ?></p>\n            </div>\n            \n            <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">Billing Address</h3>\n                <p class=\"text-gray-700 whitespace-pre-line\"><?php echo htmlspecialchars($order['billing_address']); ?></p>\n            </div>\n        </div>\n        \n        <!-- Action Buttons -->\n        <div class=\"text-center space-x-4\">\n            <a href=\"products.php\" class=\"bg-orange-500 text-white px-6 py-3 rounded-md font-medium hover:bg-orange-600 transition duration-200\">\n                Continue Shopping\n            </a>\n            <a href=\"order-history.php\" class=\"border border-gray-300 text-gray-700 px-6 py-3 rounded-md font-medium hover:bg-gray-50 transition duration-200\">\n                View Order History\n            </a>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":9688},"order-detail.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/order.php';\n\nrequire_login();\n\n$order_id = $_GET['id'] ?? null;\nif (!$order_id) {\n    redirect('order-history.php');\n}\n\n$order_manager = new OrderManager();\n$order = $order_manager->get_order_by_id($order_id, $_SESSION['user_id']);\n\nif (!$order) {\n    redirect('order-history.php');\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Order Details - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        'orange': {\n                            500: '#f97316'\n                        }\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <a href=\"order-history.php\" class=\"text-gray-700 hover:text-orange-500\">Order History</a>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                    <a href=\"logout.php\" class=\"text-orange-500 hover:text-orange-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div class=\"mb-6\">\n            <a href=\"order-history.php\" class=\"text-orange-500 hover:text-orange-600 text-sm font-medium\">\n                ‚Üê Back to Order History\n            </a>\n        </div>\n        \n        <h1 class=\"text-3xl font-bold text-gray-900 mb-8\">Order Details</h1>\n        \n        <!-- Order Info -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n            <div class=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Order Number</h3>\n                    <p class=\"text-lg font-semibold text-gray-900\"><?php echo $order['order_number']; ?></p>\n                </div>\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Order Date</h3>\n                    <p class=\"text-lg font-semibold text-gray-900\"><?php echo date('M j, Y', strtotime($order['created_at'])); ?></p>\n                </div>\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Status</h3>\n                    <?php\n                    $status_colors = [\n                        'pending' => 'bg-yellow-100 text-yellow-800',\n                        'processing' => 'bg-blue-100 text-blue-800',\n                        'shipped' => 'bg-purple-100 text-purple-800',\n                        'delivered' => 'bg-green-100 text-green-800',\n                        'cancelled' => 'bg-red-100 text-red-800'\n                    ];\n                    ?>\n                    <span class=\"inline-flex px-3 py-1 text-sm font-semibold rounded-full <?php echo $status_colors[$order['status']]; ?>\">\n                        <?php echo ucfirst($order['status']); ?>\n                    </span>\n                </div>\n                <div>\n                    <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Total</h3>\n                    <p class=\"text-lg font-semibold text-orange-600\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                </div>\n            </div>\n            \n            <?php if ($order['tracking_number']): ?>\n                <div class=\"mt-6 bg-orange-50 border border-orange-200 rounded-md p-4\">\n                    <div class=\"flex items-center justify-between\">\n                        <div class=\"flex items-center\">\n                            <span class=\"text-orange-600 text-xl mr-3\">üì¶</span>\n                            <div>\n                                <h4 class=\"font-medium text-orange-800\">Tracking Number</h4>\n                                <p class=\"text-sm text-orange-700\"><?php echo $order['tracking_number']; ?></p>\n                            </div>\n                        </div>\n                        <a href=\"track.php?tracking=<?php echo $order['tracking_number']; ?>\" \n                           class=\"bg-orange-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-orange-600 transition duration-200\">\n                            Track Package\n                        </a>\n                    </div>\n                </div>\n            <?php endif; ?>\n        </div>\n        \n        <!-- Order Items -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6 mb-8\">\n            <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Order Items</h2>\n            <div class=\"divide-y divide-gray-200\">\n                <?php foreach ($order['items'] as $item): ?>\n                    <div class=\"py-4 flex items-center space-x-4\">\n                        <div class=\"flex-shrink-0\">\n                            <?php if (!empty($item['images'])): ?>\n                                <img src=\"<?php echo $item['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($item['name']); ?>\" \n                                     class=\"w-16 h-16 object-cover rounded-md\">\n                            <?php else: ?>\n                                <div class=\"w-16 h-16 bg-gray-200 rounded-md flex items-center justify-center\">\n                                    <span class=\"text-gray-400 text-xs\">No Image</span>\n                                </div>\n                            <?php endif; ?>\n                        </div>\n                        \n                        <div class=\"flex-1\">\n                            <h3 class=\"font-medium text-gray-900\">\n                                <a href=\"product-detail.php?id=<?php echo $item['product_id']; ?>\" class=\"hover:text-orange-500\">\n                                    <?php echo htmlspecialchars($item['name']); ?>\n                                </a>\n                            </h3>\n                            <p class=\"text-sm text-gray-600\">by <?php echo htmlspecialchars($item['business_name']); ?></p>\n                            <p class=\"text-sm text-gray-600\">Quantity: <?php echo $item['quantity']; ?> √ó $<?php echo number_format($item['price'], 2); ?></p>\n                        </div>\n                        \n                        <div class=\"text-right\">\n                            <p class=\"font-medium text-gray-900\">$<?php echo number_format($item['total'], 2); ?></p>\n                            <?php if ($order['status'] === 'delivered'): ?>\n                                <a href=\"add-review.php?product=<?php echo $item['product_id']; ?>&order=<?php echo $order['id']; ?>\" \n                                   class=\"text-sm text-orange-500 hover:text-orange-600 font-medium\">\n                                    Write Review\n                                </a>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                <?php endforeach; ?>\n            </div>\n        </div>\n        \n        <!-- Order Summary & Addresses -->\n        <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n            <!-- Order Summary -->\n            <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                <h2 class=\"text-xl font-semibold text-gray-900 mb-4\">Order Summary</h2>\n                <div class=\"space-y-2\">\n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Subtotal</span>\n                        <span>$<?php echo number_format($order['total_amount'] - $order['tax_amount'] - $order['shipping_amount'] + $order['discount_amount'], 2); ?></span>\n                    </div>\n                    \n                    <?php if ($order['discount_amount'] > 0): ?>\n                        <div class=\"flex justify-between text-green-600\">\n                            <span>Discount</span>\n                            <span>-$<?php echo number_format($order['discount_amount'], 2); ?></span>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Shipping</span>\n                        <span><?php echo $order['shipping_amount'] > 0 ? '$' . number_format($order['shipping_amount'], 2) : 'Free'; ?></span>\n                    </div>\n                    <div class=\"flex justify-between\">\n                        <span class=\"text-gray-600\">Tax</span>\n                        <span>$<?php echo number_format($order['tax_amount'], 2); ?></span>\n                    </div>\n                    <div class=\"border-t pt-2\">\n                        <div class=\"flex justify-between font-semibold text-lg\">\n                            <span>Total</span>\n                            <span class=\"text-orange-600\">$<?php echo number_format($order['total_amount'], 2); ?></span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            <!-- Addresses -->\n            <div class=\"space-y-6\">\n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">Shipping Address</h3>\n                    <p class=\"text-gray-700 whitespace-pre-line\"><?php echo htmlspecialchars($order['shipping_address']); ?></p>\n                </div>\n                \n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-3\">Billing Address</h3>\n                    <p class=\"text-gray-700 whitespace-pre-line\"><?php echo htmlspecialchars($order['billing_address']); ?></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":10349},"order-history.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/order.php';\n\nrequire_login();\n\n$order_manager = new OrderManager();\n$page = max(1, $_GET['page'] ?? 1);\n$limit = 10;\n$offset = ($page - 1) * $limit;\n\n$orders = $order_manager->get_user_orders($_SESSION['user_id'], $limit, $offset);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Order History - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        'orange': {\n                            500: '#f97316'\n                        }\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Order History</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"products.php\" class=\"text-gray-700 hover:text-orange-500\">Shop</a>\n                    <a href=\"cart.php\" class=\"text-gray-700 hover:text-orange-500\">Cart</a>\n                    <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                    <a href=\"logout.php\" class=\"text-orange-500 hover:text-orange-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <h1 class=\"text-3xl font-bold text-gray-900 mb-8\">Order History</h1>\n        \n        <?php if (empty($orders)): ?>\n            <div class=\"text-center py-12\">\n                <div class=\"text-gray-400 text-6xl mb-4\">üìã</div>\n                <h3 class=\"text-xl font-medium text-gray-900 mb-2\">No orders yet</h3>\n                <p class=\"text-gray-500 mb-6\">Start shopping to see your orders here!</p>\n                <a href=\"products.php\" class=\"bg-orange-500 text-white px-6 py-3 rounded-md font-medium hover:bg-orange-600 transition duration-200\">\n                    Start Shopping\n                </a>\n            </div>\n        <?php else: ?>\n            <div class=\"space-y-6\">\n                <?php foreach ($orders as $order): ?>\n                    <div class=\"bg-white rounded-lg shadow-sm border\">\n                        <div class=\"px-6 py-4 border-b border-gray-200\">\n                            <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n                                <div class=\"flex items-center space-x-4\">\n                                    <div>\n                                        <h3 class=\"text-lg font-semibold text-gray-900\">Order <?php echo $order['order_number']; ?></h3>\n                                        <p class=\"text-sm text-gray-600\">Placed on <?php echo date('M j, Y g:i A', strtotime($order['created_at'])); ?></p>\n                                    </div>\n                                </div>\n                                \n                                <div class=\"mt-4 sm:mt-0 flex items-center space-x-4\">\n                                    <div class=\"text-right\">\n                                        <p class=\"text-lg font-semibold text-gray-900\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                                        <?php\n                                        $status_colors = [\n                                            'pending' => 'bg-yellow-100 text-yellow-800',\n                                            'processing' => 'bg-blue-100 text-blue-800',\n                                            'shipped' => 'bg-purple-100 text-purple-800',\n                                            'delivered' => 'bg-green-100 text-green-800',\n                                            'cancelled' => 'bg-red-100 text-red-800'\n                                        ];\n                                        ?>\n                                        <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full <?php echo $status_colors[$order['status']]; ?>\">\n                                            <?php echo ucfirst($order['status']); ?>\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class=\"px-6 py-4\">\n                            <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n                                <div class=\"flex items-center space-x-4\">\n                                    <?php if ($order['tracking_number']): ?>\n                                        <div class=\"flex items-center text-sm text-gray-600\">\n                                            <span class=\"mr-2\">üì¶</span>\n                                            <span>Tracking: <?php echo $order['tracking_number']; ?></span>\n                                        </div>\n                                    <?php endif; ?>\n                                    \n                                    <?php if ($order['shipment_status']): ?>\n                                        <div class=\"flex items-center text-sm text-gray-600\">\n                                            <span class=\"mr-2\">üöö</span>\n                                            <span><?php echo ucfirst(str_replace('_', ' ', $order['shipment_status'])); ?></span>\n                                        </div>\n                                    <?php endif; ?>\n                                </div>\n                                \n                                <div class=\"mt-4 sm:mt-0 flex space-x-3\">\n                                    <a href=\"order-detail.php?id=<?php echo $order['id']; ?>\" \n                                       class=\"text-orange-500 hover:text-orange-600 text-sm font-medium\">\n                                        View Details\n                                    </a>\n                                    \n                                    <?php if ($order['tracking_number']): ?>\n                                        <a href=\"track.php?tracking=<?php echo $order['tracking_number']; ?>\" \n                                           class=\"text-orange-500 hover:text-orange-600 text-sm font-medium\">\n                                            Track Package\n                                        </a>\n                                    <?php endif; ?>\n                                    \n                                    <?php if ($order['status'] === 'delivered'): ?>\n                                        <a href=\"review-order.php?id=<?php echo $order['id']; ?>\" \n                                           class=\"text-orange-500 hover:text-orange-600 text-sm font-medium\">\n                                            Write Review\n                                        </a>\n                                    <?php endif; ?>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                <?php endforeach; ?>\n            </div>\n            \n            <!-- Pagination -->\n            <div class=\"mt-8 flex justify-center\">\n                <div class=\"flex space-x-2\">\n                    <?php if ($page > 1): ?>\n                        <a href=\"?page=<?php echo $page - 1; ?>\" \n                           class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Previous</a>\n                    <?php endif; ?>\n                    \n                    <?php if (count($orders) == $limit): ?>\n                        <a href=\"?page=<?php echo $page + 1; ?>\" \n                           class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Next</a>\n                    <?php endif; ?>\n                </div>\n            </div>\n        <?php endif; ?>\n    </div>\n</body>\n</html>\n","size_bytes":8521},"product-detail.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/product.php';\nrequire_once './includes/cart.php';\nrequire_once './includes/wishlist.php';\n\n$product_id = $_GET['id'] ?? null;\nif (!$product_id) {\n    redirect('products.php');\n}\n\n$product_manager = new ProductManager();\n$cart_manager = new CartManager();\n$wishlist_manager = new WishlistManager();\n\n$product = $product_manager->get_product_by_id($product_id);\nif (!$product) {\n    redirect('products.php');\n}\n\n// Add to recently viewed\nif (is_logged_in()) {\n    $product_manager->add_to_recently_viewed($_SESSION['user_id'], $product_id);\n}\n\n// Handle add to cart\n$message = '';\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['add_to_cart'])) {\n    if (!is_logged_in()) {\n        redirect('login.php');\n    }\n    \n    $quantity = max(1, $_POST['quantity'] ?? 1);\n    $result = $cart_manager->add_to_cart($_SESSION['user_id'], $product_id, $quantity);\n    $message = $result['message'];\n}\n\n// Handle wishlist toggle\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['toggle_wishlist'])) {\n    if (!is_logged_in()) {\n        redirect('login.php');\n    }\n    \n    $is_in_wishlist = $wishlist_manager->is_in_wishlist($_SESSION['user_id'], $product_id);\n    \n    if ($is_in_wishlist) {\n        $result = $wishlist_manager->remove_from_wishlist($_SESSION['user_id'], $product_id);\n    } else {\n        $result = $wishlist_manager->add_to_wishlist($_SESSION['user_id'], $product_id);\n    }\n    \n    $message = $result['message'];\n}\n\n// Get reviews\n$reviews = $product_manager->get_product_reviews($product_id, 5);\n\n// Check if in wishlist\n$is_in_wishlist = is_logged_in() ? $wishlist_manager->is_in_wishlist($_SESSION['user_id'], $product_id) : false;\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title><?php echo htmlspecialchars($product['name']); ?> - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        'orange': {\n                            500: '#f97316'\n                        }\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <a href=\"products.php\" class=\"text-gray-700 hover:text-orange-500\">Products</a>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <?php if (is_logged_in()): ?>\n                        <a href=\"cart.php\" class=\"text-gray-700 hover:text-orange-500\">Cart</a>\n                        <a href=\"wishlist.php\" class=\"text-gray-700 hover:text-orange-500\">Wishlist</a>\n                        <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                        <a href=\"logout.php\" class=\"text-orange-500 hover:text-orange-600\">Logout</a>\n                    <?php else: ?>\n                        <a href=\"login.php\" class=\"text-orange-500 hover:text-orange-600\">Login</a>\n                        <a href=\"register.php\" class=\"bg-orange-500 text-white px-4 py-2 rounded-md hover:bg-orange-600 transition duration-200\">Sign Up</a>\n                    <?php endif; ?>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n            <!-- Product Images -->\n            <div>\n                <?php if (!empty($product['images'])): ?>\n                    <div class=\"mb-4\">\n                        <img src=\"<?php echo $product['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                             class=\"w-full h-96 object-cover rounded-lg shadow-md\" id=\"main-image\">\n                    </div>\n                    \n                    <?php if (count($product['images']) > 1): ?>\n                        <div class=\"grid grid-cols-4 gap-2\">\n                            <?php foreach ($product['images'] as $index => $image): ?>\n                                <img src=\"<?php echo $image; ?>\" alt=\"Product image <?php echo $index + 1; ?>\" \n                                     class=\"w-full h-20 object-cover rounded cursor-pointer hover:opacity-75 transition duration-200 <?php echo $index === 0 ? 'ring-2 ring-orange-500' : ''; ?>\"\n                                     onclick=\"changeMainImage('<?php echo $image; ?>', this)\">\n                            <?php endforeach; ?>\n                        </div>\n                    <?php endif; ?>\n                <?php else: ?>\n                    <div class=\"w-full h-96 bg-gray-200 rounded-lg flex items-center justify-center\">\n                        <span class=\"text-gray-400 text-xl\">No Image Available</span>\n                    </div>\n                <?php endif; ?>\n            </div>\n            \n            <!-- Product Info -->\n            <div>\n                <div class=\"flex items-center mb-4\">\n                    <div class=\"flex items-center\">\n                        <?php if ($product['vendor_logo']): ?>\n                            <img src=\"<?php echo $product['vendor_logo']; ?>\" alt=\"Vendor logo\" class=\"w-8 h-8 rounded-full mr-2\">\n                        <?php endif; ?>\n                        <span class=\"text-gray-600\"><?php echo htmlspecialchars($product['business_name']); ?></span>\n                        <?php if ($product['is_verified']): ?>\n                            <span class=\"ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full\">\n                                <?php echo $product['verification_badge'] ?: 'Verified'; ?>\n                            </span>\n                        <?php endif; ?>\n                    </div>\n                </div>\n                \n                <h1 class=\"text-3xl font-bold text-gray-900 mb-4\"><?php echo htmlspecialchars($product['name']); ?></h1>\n                \n                <div class=\"flex items-center mb-4\">\n                    <?php if ($product['avg_rating'] > 0): ?>\n                        <div class=\"flex items-center\">\n                            <?php for ($i = 1; $i <= 5; $i++): ?>\n                                <span class=\"text-yellow-400 text-lg\">\n                                    <?php echo $i <= $product['avg_rating'] ? '‚òÖ' : '‚òÜ'; ?>\n                                </span>\n                            <?php endfor; ?>\n                            <span class=\"text-gray-600 ml-2\"><?php echo $product['avg_rating']; ?> (<?php echo $product['review_count']; ?> reviews)</span>\n                        </div>\n                    <?php else: ?>\n                        <span class=\"text-gray-500\">No reviews yet</span>\n                    <?php endif; ?>\n                </div>\n                \n                <div class=\"mb-6\">\n                    <?php if ($product['sale_price']): ?>\n                        <div class=\"flex items-center space-x-4\">\n                            <span class=\"text-3xl font-bold text-red-600\">$<?php echo number_format($product['sale_price'], 2); ?></span>\n                            <span class=\"text-xl text-gray-500 line-through\">$<?php echo number_format($product['price'], 2); ?></span>\n                            <span class=\"bg-red-100 text-red-800 text-sm px-2 py-1 rounded\">\n                                Save $<?php echo number_format($product['price'] - $product['sale_price'], 2); ?>\n                            </span>\n                        </div>\n                    <?php else: ?>\n                        <span class=\"text-3xl font-bold text-gray-900\">$<?php echo number_format($product['price'], 2); ?></span>\n                    <?php endif; ?>\n                </div>\n                \n                <div class=\"mb-6\">\n                    <p class=\"text-gray-700 leading-relaxed\"><?php echo nl2br(htmlspecialchars($product['description'])); ?></p>\n                </div>\n                \n                <div class=\"mb-6\">\n                    <span class=\"text-sm font-medium text-gray-700\">Category: </span>\n                    <span class=\"text-sm text-gray-600\"><?php echo htmlspecialchars($product['category_name']); ?></span>\n                </div>\n                \n                <div class=\"mb-6\">\n                    <?php if ($product['stock_quantity'] > 0): ?>\n                        <span class=\"text-green-600 font-medium\">‚úì In Stock (<?php echo $product['stock_quantity']; ?> available)</span>\n                    <?php else: ?>\n                        <span class=\"text-red-600 font-medium\">‚úó Out of Stock</span>\n                    <?php endif; ?>\n                </div>\n                \n                <?php if ($product['stock_quantity'] > 0): ?>\n                    <form method=\"POST\" class=\"mb-6\">\n                        <div class=\"flex items-center space-x-4 mb-4\">\n                            <label for=\"quantity\" class=\"text-sm font-medium text-gray-700\">Quantity:</label>\n                            <select name=\"quantity\" id=\"quantity\" class=\"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-orange-500 focus:border-orange-500\">\n                                <?php for ($i = 1; $i <= min(10, $product['stock_quantity']); $i++): ?>\n                                    <option value=\"<?php echo $i; ?>\"><?php echo $i; ?></option>\n                                <?php endfor; ?>\n                            </select>\n                        </div>\n                        \n                        <div class=\"flex space-x-4\">\n                            <button type=\"submit\" name=\"add_to_cart\" \n                                    class=\"flex-1 bg-orange-500 text-white px-6 py-3 rounded-md font-medium hover:bg-orange-600 transition duration-200\">\n                                Add to Cart\n                            </button>\n                            \n                            <button type=\"submit\" name=\"toggle_wishlist\" \n                                    class=\"px-6 py-3 border border-gray-300 rounded-md hover:bg-gray-50 transition duration-200\">\n                                <?php echo $is_in_wishlist ? '‚ù§Ô∏è Remove from Wishlist' : 'ü§ç Add to Wishlist'; ?>\n                            </button>\n                        </div>\n                    </form>\n                <?php endif; ?>\n            </div>\n        </div>\n        \n        <!-- Reviews Section -->\n        <div class=\"bg-white rounded-lg shadow-sm p-6\">\n            <h2 class=\"text-2xl font-bold text-gray-900 mb-6\">Customer Reviews</h2>\n            \n            <?php if (empty($reviews)): ?>\n                <p class=\"text-gray-500\">No reviews yet. Be the first to review this product!</p>\n            <?php else: ?>\n                <div class=\"space-y-6\">\n                    <?php foreach ($reviews as $review): ?>\n                        <div class=\"border-b border-gray-200 pb-6 last:border-b-0\">\n                            <div class=\"flex items-center justify-between mb-2\">\n                                <div class=\"flex items-center\">\n                                    <span class=\"font-medium text-gray-900\"><?php echo htmlspecialchars($review['first_name'] . ' ' . $review['last_name']); ?></span>\n                                    <?php if ($review['is_verified_purchase']): ?>\n                                        <span class=\"ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded\">Verified Purchase</span>\n                                    <?php endif; ?>\n                                </div>\n                                <span class=\"text-sm text-gray-500\"><?php echo date('M j, Y', strtotime($review['created_at'])); ?></span>\n                            </div>\n                            \n                            <div class=\"flex items-center mb-2\">\n                                <?php for ($i = 1; $i <= 5; $i++): ?>\n                                    <span class=\"text-yellow-400\">\n                                        <?php echo $i <= $review['rating'] ? '‚òÖ' : '‚òÜ'; ?>\n                                    </span>\n                                <?php endfor; ?>\n                            </div>\n                            \n                            <?php if ($review['title']): ?>\n                                <h4 class=\"font-medium text-gray-900 mb-2\"><?php echo htmlspecialchars($review['title']); ?></h4>\n                            <?php endif; ?>\n                            \n                            <p class=\"text-gray-700\"><?php echo nl2br(htmlspecialchars($review['comment'])); ?></p>\n                        </div>\n                    <?php endforeach; ?>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n    \n    <script>\n        function changeMainImage(src, element) {\n            document.getElementById('main-image').src = src;\n            \n            // Remove ring from all thumbnails\n            document.querySelectorAll('.grid img').forEach(img => {\n                img.classList.remove('ring-2', 'ring-orange-500');\n            });\n            \n            // Add ring to clicked thumbnail\n            element.classList.add('ring-2', 'ring-orange-500');\n        }\n    </script>\n</body>\n</html>\n","size_bytes":13997},"products.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/product.php';\n\n$product_manager = new ProductManager();\n\n// Get parameters\n$category_id = $_GET['category'] ?? null;\n$search = $_GET['search'] ?? null;\n$page = max(1, $_GET['page'] ?? 1);\n$limit = 20;\n$offset = ($page - 1) * $limit;\n\n// Get products and categories\n$products = $product_manager->get_products($limit, $offset, $category_id, $search);\n$categories = $product_manager->get_categories();\n$flash_deals = $product_manager->get_flash_deals(6);\n\n$page_title = 'Products';\nif ($search) {\n    $page_title = \"Search results for: \" . htmlspecialchars($search);\n} elseif ($category_id) {\n    $category = array_filter($categories, fn($c) => $c['id'] == $category_id);\n    if ($category) {\n        $page_title = reset($category)['name'];\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title><?php echo $page_title; ?> - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    },\n                    fontFamily: {\n                        'sans': ['Inter', 'system-ui', 'sans-serif'],\n                    }\n                }\n            }\n        }\n    </script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n</head>\n<body class=\"bg-gray-50 font-sans\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b sticky top-0 z-50\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-8\">\n                    <a href=\"index.php\" class=\"flex items-center\">\n                        <div class=\"w-8 h-8 bg-accent rounded-lg flex items-center justify-center mr-2\">\n                            <span class=\"text-white font-bold\">MN</span>\n                        </div>\n                        <span class=\"text-xl font-bold text-primary\"><?php echo SITE_NAME; ?></span>\n                    </a>\n                    \n                    <!-- Search Bar -->\n                    <form method=\"GET\" action=\"products.php\" class=\"hidden md:flex items-center\">\n                        <div class=\"relative\">\n                            <input type=\"text\" name=\"search\" value=\"<?php echo htmlspecialchars($search ?? ''); ?>\" \n                                   placeholder=\"Search products, brands, and more...\" \n                                   class=\"w-96 px-4 py-2 border-2 border-gray-200 rounded-l-lg focus:outline-none focus:border-accent\">\n                            <button type=\"submit\" class=\"px-6 py-2 bg-accent text-white rounded-r-lg hover:bg-blue-600 transition duration-200\">\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"></path>\n                                </svg>\n                            </button>\n                        </div>\n                    </form>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <?php if (is_logged_in()): ?>\n                        <a href=\"cart.php\" class=\"text-gray-700 hover:text-orange-500 relative\">\n                            Cart\n                            <span class=\"absolute -top-2 -right-2 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\" id=\"cart-count\">0</span>\n                        </a>\n                        <a href=\"wishlist.php\" class=\"text-gray-700 hover:text-orange-500\">Wishlist</a>\n                        <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                        <a href=\"logout.php\" class=\"text-orange-500 hover:text-orange-600\">Logout</a>\n                    <?php else: ?>\n                        <a href=\"login.php\" class=\"text-orange-500 hover:text-orange-600\">Login</a>\n                        <a href=\"register.php\" class=\"bg-orange-500 text-white px-4 py-2 rounded-md hover:bg-orange-600 transition duration-200\">Sign Up</a>\n                    <?php endif; ?>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <!-- Flash Deals Section -->\n        <?php if (!empty($flash_deals) && !$search && !$category_id): ?>\n            <div class=\"mb-8\">\n                <div class=\"bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-lg p-6 mb-6\">\n                    <h2 class=\"text-2xl font-bold mb-2\">Flash Deals - Limited Time!</h2>\n                    <p class=\"text-red-100\">Hurry up! These deals won't last long.</p>\n                </div>\n                \n                <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4\">\n                    <?php foreach ($flash_deals as $deal): ?>\n                        <div class=\"bg-white rounded-lg shadow-md overflow-hidden border-2 border-red-200\">\n                            <div class=\"relative\">\n                                <?php if (!empty($deal['images'])): ?>\n                                    <img src=\"<?php echo $deal['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($deal['name']); ?>\" \n                                         class=\"w-full h-32 object-cover\">\n                                <?php else: ?>\n                                    <div class=\"w-full h-32 bg-gray-200 flex items-center justify-center\">\n                                        <span class=\"text-gray-400\">No Image</span>\n                                    </div>\n                                <?php endif; ?>\n                                \n                                <div class=\"absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded\">\n                                    FLASH DEAL\n                                </div>\n                            </div>\n                            \n                            <div class=\"p-3\">\n                                <h3 class=\"font-medium text-sm text-gray-900 mb-1 line-clamp-2\"><?php echo htmlspecialchars($deal['name']); ?></h3>\n                                <div class=\"flex items-center space-x-2 mb-2\">\n                                    <span class=\"text-lg font-bold text-red-600\">$<?php echo number_format($deal['sale_price'], 2); ?></span>\n                                    <span class=\"text-sm text-gray-500 line-through\">$<?php echo number_format($deal['price'], 2); ?></span>\n                                </div>\n                                \n                                <div class=\"text-xs text-red-600 font-medium\">\n                                    Ends: <?php echo date('M j, g:i A', strtotime($deal['flash_deal_end'])); ?>\n                                </div>\n                            </div>\n                        </div>\n                    <?php endforeach; ?>\n                </div>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"flex flex-col lg:flex-row gap-8\">\n            <!-- Sidebar -->\n            <div class=\"lg:w-64 flex-shrink-0\">\n                <div class=\"bg-white rounded-lg shadow-sm p-6\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Categories</h3>\n                    <ul class=\"space-y-2\">\n                        <li>\n                            <a href=\"products.php\" class=\"block text-gray-700 hover:text-orange-500 py-1 <?php echo !$category_id ? 'text-orange-500 font-medium' : ''; ?>\">\n                                All Products\n                            </a>\n                        </li>\n                        <?php foreach ($categories as $category): ?>\n                            <li>\n                                <a href=\"products.php?category=<?php echo $category['id']; ?>\" \n                                   class=\"block text-gray-700 hover:text-orange-500 py-1 <?php echo $category_id == $category['id'] ? 'text-orange-500 font-medium' : ''; ?>\">\n                                    <?php echo htmlspecialchars($category['name']); ?>\n                                    <span class=\"text-sm text-gray-500\">(<?php echo $category['product_count']; ?>)</span>\n                                </a>\n                            </li>\n                        <?php endforeach; ?>\n                    </ul>\n                </div>\n            </div>\n            \n            <!-- Main Content -->\n            <div class=\"flex-1\">\n                <div class=\"flex justify-between items-center mb-6\">\n                    <h1 class=\"text-2xl font-bold text-gray-900\"><?php echo $page_title; ?></h1>\n                    <div class=\"text-sm text-gray-500\">\n                        <?php echo count($products); ?> products found\n                    </div>\n                </div>\n                \n                <!-- Mobile Search -->\n                <div class=\"md:hidden mb-6\">\n                    <form method=\"GET\" action=\"products.php\">\n                        <div class=\"flex\">\n                            <input type=\"text\" name=\"search\" value=\"<?php echo htmlspecialchars($search ?? ''); ?>\" \n                                   placeholder=\"Search products...\" \n                                   class=\"flex-1 px-4 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-orange-500 focus:border-orange-500\">\n                            <button type=\"submit\" class=\"px-4 py-2 bg-orange-500 text-white rounded-r-md hover:bg-orange-600 transition duration-200\">\n                                Search\n                            </button>\n                        </div>\n                    </form>\n                </div>\n                \n                <!-- Products Grid -->\n                <?php if (empty($products)): ?>\n                    <div class=\"text-center py-12\">\n                        <div class=\"text-gray-400 text-6xl mb-4\">üì¶</div>\n                        <h3 class=\"text-xl font-medium text-gray-900 mb-2\">No products found</h3>\n                        <p class=\"text-gray-500\">Try adjusting your search or browse different categories.</p>\n                    </div>\n                <?php else: ?>\n                    <div class=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n                        <?php foreach ($products as $product): ?>\n                            <div class=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-200\">\n                                <a href=\"product-detail.php?id=<?php echo $product['id']; ?>\" class=\"block\">\n                                    <div class=\"relative\">\n                                        <?php if (!empty($product['images'])): ?>\n                                            <img src=\"<?php echo $product['images'][0]; ?>\" alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                                                 class=\"w-full h-48 object-cover\">\n                                        <?php else: ?>\n                                            <div class=\"w-full h-48 bg-gray-200 flex items-center justify-center\">\n                                                <span class=\"text-gray-400\">No Image</span>\n                                            </div>\n                                        <?php endif; ?>\n                                        \n                                        <?php if ($product['is_featured']): ?>\n                                            <div class=\"absolute top-2 left-2 bg-orange-500 text-white text-xs px-2 py-1 rounded\">\n                                                Featured\n                                            </div>\n                                        <?php endif; ?>\n                                        \n                                        <?php if ($product['sale_price']): ?>\n                                            <div class=\"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded\">\n                                                Sale\n                                            </div>\n                                        <?php endif; ?>\n                                    </div>\n                                    \n                                    <div class=\"p-4\">\n                                        <div class=\"flex items-center mb-2\">\n                                            <span class=\"text-sm text-gray-600\"><?php echo htmlspecialchars($product['business_name']); ?></span>\n                                            <?php if ($product['is_verified']): ?>\n                                                <span class=\"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full\">Verified</span>\n                                            <?php endif; ?>\n                                        </div>\n                                        \n                                        <h3 class=\"font-medium text-gray-900 mb-2 line-clamp-2\"><?php echo htmlspecialchars($product['name']); ?></h3>\n                                        \n                                        <div class=\"flex items-center mb-2\">\n                                            <?php if ($product['avg_rating'] > 0): ?>\n                                                <div class=\"flex items-center\">\n                                                    <span class=\"text-yellow-400\">‚òÖ</span>\n                                                    <span class=\"text-sm text-gray-600 ml-1\"><?php echo $product['avg_rating']; ?> (<?php echo $product['review_count']; ?>)</span>\n                                                </div>\n                                            <?php else: ?>\n                                                <span class=\"text-sm text-gray-500\">No reviews yet</span>\n                                            <?php endif; ?>\n                                        </div>\n                                        \n                                        <div class=\"flex items-center justify-between\">\n                                            <div>\n                                                <?php if ($product['sale_price']): ?>\n                                                    <span class=\"text-lg font-bold text-red-600\">$<?php echo number_format($product['sale_price'], 2); ?></span>\n                                                    <span class=\"text-sm text-gray-500 line-through ml-2\">$<?php echo number_format($product['price'], 2); ?></span>\n                                                <?php else: ?>\n                                                    <span class=\"text-lg font-bold text-gray-900\">$<?php echo number_format($product['price'], 2); ?></span>\n                                                <?php endif; ?>\n                                            </div>\n                                            \n                                            <?php if ($product['stock_quantity'] > 0): ?>\n                                                <span class=\"text-sm text-green-600\">In Stock</span>\n                                            <?php else: ?>\n                                                <span class=\"text-sm text-red-600\">Out of Stock</span>\n                                            <?php endif; ?>\n                                        </div>\n                                    </div>\n                                </a>\n                            </div>\n                        <?php endforeach; ?>\n                    </div>\n                    \n                    <!-- Pagination -->\n                    <div class=\"mt-8 flex justify-center\">\n                        <div class=\"flex space-x-2\">\n                            <?php if ($page > 1): ?>\n                                <a href=\"?<?php echo http_build_query(array_merge($_GET, ['page' => $page - 1])); ?>\" \n                                   class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Previous</a>\n                            <?php endif; ?>\n                            \n                            <?php if (count($products) == $limit): ?>\n                                <a href=\"?<?php echo http_build_query(array_merge($_GET, ['page' => $page + 1])); ?>\" \n                                   class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Next</a>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                <?php endif; ?>\n            </div>\n        </div>\n    </div>\n    \n    <script>\n        // Update cart count on page load\n        if (<?php echo is_logged_in() ? 'true' : 'false'; ?>) {\n            fetch('api/cart-count.php')\n                .then(response => response.json())\n                .then(data => {\n                    document.getElementById('cart-count').textContent = data.count || 0;\n                });\n        }\n    </script>\n</body>\n</html>\n","size_bytes":17678},"register.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/auth.php';\n\n$auth = new Auth();\n$error = '';\n$success = '';\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $username = sanitize_input($_POST['username']);\n    $email = sanitize_input($_POST['email']);\n    $password = $_POST['password'];\n    $confirm_password = $_POST['confirm_password'];\n    $first_name = sanitize_input($_POST['first_name']);\n    $last_name = sanitize_input($_POST['last_name']);\n    $phone = sanitize_input($_POST['phone']);\n    $address = sanitize_input($_POST['address']);\n    $city = sanitize_input($_POST['city']);\n    $state = sanitize_input($_POST['state']);\n    $zip_code = sanitize_input($_POST['zip_code']);\n    \n    if ($password !== $confirm_password) {\n        $error = 'Passwords do not match';\n    } else {\n        $result = $auth->register($username, $email, $password, $first_name, $last_name, $phone, $address, $city, $state, $zip_code);\n        \n        if ($result['success']) {\n            $success = $result['message'];\n        } else {\n            $error = $result['message'];\n        }\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Create Account - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    },\n                    fontFamily: {\n                        'sans': ['Inter', 'system-ui', 'sans-serif'],\n                    }\n                }\n            }\n        }\n    </script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n</head>\n<body class=\"bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen font-sans\">\n    <div class=\"min-h-screen py-12\">\n        <div class=\"max-w-4xl mx-auto px-4\">\n            <!-- Header -->\n            <div class=\"text-center mb-12\">\n                <div class=\"flex items-center justify-center mb-6\">\n                    <div class=\"w-14 h-14 bg-accent rounded-2xl flex items-center justify-center mr-4\">\n                        <span class=\"text-white font-bold text-xl\">MN</span>\n                    </div>\n                    <span class=\"text-3xl font-bold text-primary\"><?php echo SITE_NAME; ?></span>\n                </div>\n                <h1 class=\"text-4xl font-bold text-gray-900 mb-4\">Join Market Nest</h1>\n                <p class=\"text-xl text-gray-600 max-w-2xl mx-auto\">Create your account and start your amazing shopping journey with thousands of quality products.</p>\n            </div>\n            \n            <div class=\"bg-white rounded-2xl shadow-xl overflow-hidden\">\n                <div class=\"px-8 py-12\">\n                    <?php if ($error): ?>\n                        <div class=\"mb-8 bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg\">\n                            <div class=\"flex\">\n                                <div class=\"flex-shrink-0\">\n                                    <svg class=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                        <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clip-rule=\"evenodd\" />\n                                    </svg>\n                                </div>\n                                <div class=\"ml-3\">\n                                    <p class=\"text-sm text-red-700\"><?php echo $error; ?></p>\n                                </div>\n                            </div>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <?php if ($success): ?>\n                        <div class=\"mb-8 bg-green-50 border-l-4 border-green-400 p-4 rounded-r-lg\">\n                            <div class=\"flex\">\n                                <div class=\"flex-shrink-0\">\n                                    <svg class=\"h-5 w-5 text-green-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                        <path fill-rule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clip-rule=\"evenodd\" />\n                                    </svg>\n                                </div>\n                                <div class=\"ml-3\">\n                                    <p class=\"text-sm text-green-700\">\n                                        <?php echo $success; ?> \n                                        <a href=\"login.php\" class=\"font-medium text-green-800 underline hover:text-green-900\">\n                                            Sign in now ‚Üí\n                                        </a>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <form method=\"POST\" class=\"space-y-8\">\n                        <!-- Personal Information -->\n                        <div>\n                            <h3 class=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                                <svg class=\"w-5 h-5 mr-2 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                                </svg>\n                                Personal Information\n                            </h3>\n                            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                <div>\n                                    <label for=\"first_name\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        First Name *\n                                    </label>\n                                    <input id=\"first_name\" name=\"first_name\" type=\"text\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter your first name\">\n                                </div>\n                                \n                                <div>\n                                    <label for=\"last_name\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        Last Name *\n                                    </label>\n                                    <input id=\"last_name\" name=\"last_name\" type=\"text\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter your last name\">\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Account Information -->\n                        <div>\n                            <h3 class=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                                <svg class=\"w-5 h-5 mr-2 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z\"></path>\n                                </svg>\n                                Account Credentials\n                            </h3>\n                            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                <div>\n                                    <label for=\"username\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        Username *\n                                    </label>\n                                    <input id=\"username\" name=\"username\" type=\"text\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Choose a username\">\n                                </div>\n                                \n                                <div>\n                                    <label for=\"email\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        Email Address *\n                                    </label>\n                                    <input id=\"email\" name=\"email\" type=\"email\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter your email address\">\n                                </div>\n                            </div>\n                            \n                            <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6\">\n                                <div>\n                                    <label for=\"password\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        Password *\n                                    </label>\n                                    <input id=\"password\" name=\"password\" type=\"password\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Create a strong password\">\n                                </div>\n                                \n                                <div>\n                                    <label for=\"confirm_password\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        Confirm Password *\n                                    </label>\n                                    <input id=\"confirm_password\" name=\"confirm_password\" type=\"password\" required \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Confirm your password\">\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Contact Information -->\n                        <div>\n                            <h3 class=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                                <svg class=\"w-5 h-5 mr-2 text-accent\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n                                </svg>\n                                Contact & Address\n                                <span class=\"text-sm text-gray-500 font-normal ml-2\">(Optional)</span>\n                            </h3>\n                            \n                            <div class=\"mb-6\">\n                                <label for=\"phone\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                    Phone Number\n                                </label>\n                                <input id=\"phone\" name=\"phone\" type=\"tel\" \n                                       class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                       placeholder=\"Enter your phone number\">\n                            </div>\n                            \n                            <div class=\"mb-6\">\n                                <label for=\"address\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                    Street Address\n                                </label>\n                                <textarea id=\"address\" name=\"address\" rows=\"3\" \n                                          class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                          placeholder=\"Enter your street address\"></textarea>\n                            </div>\n                            \n                            <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                                <div>\n                                    <label for=\"city\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        City\n                                    </label>\n                                    <input id=\"city\" name=\"city\" type=\"text\" \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter your city\">\n                                </div>\n                                \n                                <div>\n                                    <label for=\"state\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        State/Province\n                                    </label>\n                                    <input id=\"state\" name=\"state\" type=\"text\" \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter your state\">\n                                </div>\n                                \n                                <div>\n                                    <label for=\"zip_code\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n                                        ZIP/Postal Code\n                                    </label>\n                                    <input id=\"zip_code\" name=\"zip_code\" type=\"text\" \n                                           class=\"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-accent transition-all duration-200\"\n                                           placeholder=\"Enter ZIP code\">\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Terms and Submit -->\n                        <div class=\"border-t border-gray-200 pt-8\">\n                            <div class=\"flex items-center mb-6\">\n                                <input id=\"terms\" name=\"terms\" type=\"checkbox\" required class=\"h-4 w-4 text-accent focus:ring-accent border-gray-300 rounded\">\n                                <label for=\"terms\" class=\"ml-2 block text-sm text-gray-700\">\n                                    I agree to the \n                                    <a href=\"#\" class=\"text-accent hover:text-blue-600 font-medium\">Terms of Service</a> \n                                    and \n                                    <a href=\"#\" class=\"text-accent hover:text-blue-600 font-medium\">Privacy Policy</a>\n                                </label>\n                            </div>\n                            \n                            <button type=\"submit\" \n                                    class=\"w-full flex justify-center items-center py-4 px-6 border border-transparent rounded-xl shadow-lg text-base font-medium text-white bg-accent hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent transition-all duration-200 hover:shadow-xl\">\n                                <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\"></path>\n                                </svg>\n                                Create Your Account\n                            </button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n\n            <!-- Footer Links -->\n            <div class=\"text-center mt-12 space-y-4\">\n                <p class=\"text-gray-600\">\n                    Already have an account? \n                    <a href=\"login.php\" class=\"text-accent hover:text-blue-600 font-semibold\">\n                        Sign in here\n                    </a>\n                </p>\n                <p>\n                    <a href=\"index.php\" class=\"text-sm text-gray-500 hover:text-accent font-medium\">\n                        ‚Üê Back to <?php echo SITE_NAME; ?>\n                    </a>\n                </p>\n            </div>\n        </div>\n    </div>\n</body>\n</html>","size_bytes":18539},"replit.md":{"content":"# Overview\n\nThis is Market Nest, a professional e-commerce marketplace built with PHP and SQLite. The application features a complete e-commerce platform with user management, vendor system, product catalog, shopping cart, order management, and advanced shipment tracking capabilities. The project has been successfully rebranded and redesigned with modern, Amazon-level UI and is running on port 5000.\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\nUI Design Preference: Professional, modern design comparable to Amazon with clean layouts and excellent user experience.\n\n# System Architecture\n\n## Backend Architecture\n- **Framework**: PHP 8.2 with native server capabilities\n- **Database**: SQLite for development with complete e-commerce schema\n- **Authentication**: Session-based authentication with role-based access control\n- **File Structure**: Modular PHP classes for database operations and business logic\n\n## Database Design\n- **Users Management**: Complete user registration, authentication, and role management\n- **Product Catalog**: Categories, products, inventory, and vendor management\n- **Order System**: Shopping cart, orders, order items, and payment tracking\n- **Shipping & Tracking**: Advanced shipment tracking with history and real-time updates\n- **Additional Features**: Wishlist, reviews, notifications, coupons, and badges\n\n## Key Components\n- **Authentication System**: User registration, login, role-based access (customer, vendor, admin)\n- **Product Management**: Category-based product organization with vendor support\n- **Shopping Cart**: Session-based cart management with real-time updates\n- **Order Processing**: Complete order lifecycle from cart to delivery\n- **Tracking System**: Advanced shipment tracking with multiple service levels\n- **Vendor Portal**: Vendor application system and product management dashboard\n- **Admin Panel**: Complete administrative interface for user, vendor, and order management\n\n## Recent Setup Changes\n- **Date**: September 8, 2025\n- **Database Migration**: Converted from MySQL to SQLite for Replit compatibility\n- **Path Corrections**: Fixed all include/require path references to use __DIR__ for consistency\n- **SQL Compatibility**: Updated INSERT IGNORE to INSERT OR IGNORE for SQLite\n- **Environment Configuration**: Configured for Replit hosting with proper domain handling\n- **Sample Data**: Initialized with categories and admin user for immediate testing\n\n## Recent Design Updates\n- **Date**: September 8, 2025\n- **Complete Rebranding**: Transformed from \"OrangeCart\" to \"Market Nest\" with professional branding\n- **UI Overhaul**: Implemented Amazon-style modern design with:\n  - Professional color scheme (slate/blue instead of orange)\n  - Modern typography using Inter font family\n  - Enhanced homepage with hero section and improved layouts\n  - Professional login/signup pages with split-screen design\n  - Improved navigation with better search functionality\n  - Consistent branding with \"MN\" logo throughout\n- **User Experience**: Enhanced forms, better spacing, hover effects, and responsive design\n- **Color Palette**: Primary (#0f172a), Secondary (#1e293b), Accent (#3b82f6), Warning (#f59e0b), Success (#10b981)\n\n# External Dependencies\n\n## Core Requirements\n- **PHP**: Version 8.2 with PDO SQLite support\n- **Database**: SQLite database with foreign key constraints enabled\n- **Web Server**: PHP built-in development server configured for port 5000\n\n## Styling and UI\n- **Tailwind CSS**: CDN-based utility-first CSS framework for responsive design\n- **Typography**: Inter font family for professional appearance\n- **Color Scheme**: Professional blue/slate theme with Market Nest branding\n  - Primary: Deep slate (#0f172a) for headers and text\n  - Secondary: Slate (#1e293b) for navigation elements  \n  - Accent: Blue (#3b82f6) for buttons and highlights\n  - Supporting colors: Warning (#f59e0b), Success (#10b981)\n- **Design Language**: Modern, clean, Amazon-inspired professional interface","size_bytes":4006},"track.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/tracking.php';\n\n$tracking_manager = new TrackingManager();\n$tracking_number = $_GET['tracking'] ?? $_POST['tracking_number'] ?? '';\n$shipment = null;\n$error = '';\n$message = '';\n\n// Handle tracking lookup\nif ($tracking_number) {\n    $user_id = is_logged_in() ? $_SESSION['user_id'] : null;\n    $shipment = $tracking_manager->get_shipment_by_tracking($tracking_number, $user_id);\n    \n    if (!$shipment) {\n        $error = 'Tracking number not found. Please check and try again.';\n    } else {\n        // Increment free tracking usage for logged-in users\n        if ($user_id && $user_id == $shipment['user_id'] && $shipment['free_trackings_used'] < FREE_TRACKING_LIMIT) {\n            $tracking_manager->increment_free_tracking_usage($user_id);\n        }\n    }\n}\n\n// Handle advanced tracking purchase\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['purchase_tracking'])) {\n    if (!is_logged_in()) {\n        redirect('login.php');\n    }\n    \n    $tracking_level = $_POST['tracking_level'];\n    $amount = $tracking_level === 'standard' ? STANDARD_TRACKING_PRICE : PREMIUM_TRACKING_PRICE;\n    \n    $result = $tracking_manager->purchase_advanced_tracking($_SESSION['user_id'], $shipment['id'], $tracking_level, $amount);\n    $message = $result['message'];\n    \n    if ($result['success']) {\n        // Refresh shipment data\n        $shipment = $tracking_manager->get_shipment_by_tracking($tracking_number, $_SESSION['user_id']);\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Track Your Shipment - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    },\n                    fontFamily: {\n                        'sans': ['Inter', 'system-ui', 'sans-serif'],\n                    }\n                }\n            }\n        }\n    </script>\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n    <style>\n        .video-background {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            z-index: -1;\n            object-fit: cover;\n        }\n        \n        .overlay {\n            background: rgba(249, 115, 22, 0.1);\n            backdrop-filter: blur(1px);\n        }\n        \n        .content-overlay {\n            background: rgba(255, 255, 255, 0.95);\n            backdrop-filter: blur(10px);\n        }\n        \n        .progress-bar {\n            transition: width 1s ease-in-out;\n        }\n        \n        .tracking-step {\n            transition: all 0.3s ease;\n        }\n        \n        .tracking-step.completed {\n            transform: scale(1.1);\n        }\n        \n        @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.5; }\n        }\n        \n        .pulse-animation {\n            animation: pulse 2s infinite;\n        }\n    </style>\n</head>\n<body class=\"min-h-screen\">\n    <!-- 3D Video Background -->\n    <video autoplay muted loop class=\"video-background\">\n        <source src=\"https://cdn.durable.co/getty-videos/11YFphDEbcgMokFBstfj1wUNbEiH67ztyxxEKzGe05GR5HPPHbhh2IegZrfKys3a.mov\" type=\"video/mp4\">\n        Your browser does not support the video tag.\n    </video>\n    \n    <!-- Overlay -->\n    <div class=\"overlay min-h-screen\">\n        <!-- Header -->\n        <header class=\"content-overlay border-b border-white/20\">\n            <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n                <div class=\"flex justify-between items-center h-16\">\n                    <div class=\"flex items-center space-x-4\">\n                        <a href=\"index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                        <span class=\"text-gray-400\">|</span>\n                        <span class=\"text-gray-700\">Track Shipment</span>\n                    </div>\n                    \n                    <nav class=\"flex items-center space-x-4\">\n                        <a href=\"products.php\" class=\"text-gray-700 hover:text-orange-500\">Shop</a>\n                        <?php if (is_logged_in()): ?>\n                            <a href=\"order-history.php\" class=\"text-gray-700 hover:text-orange-500\">Orders</a>\n                            <span class=\"text-gray-700\">Hi, <?php echo $_SESSION['first_name']; ?>!</span>\n                            <a href=\"logout.php\" class=\"text-orange-500 hover:text-orange-600\">Logout</a>\n                        <?php else: ?>\n                            <a href=\"login.php\" class=\"text-orange-500 hover:text-orange-600\">Login</a>\n                        <?php endif; ?>\n                    </nav>\n                </div>\n            </div>\n        </header>\n\n        <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n            <!-- Tracking Form -->\n            <div class=\"text-center mb-12\">\n                <h1 class=\"text-4xl font-bold text-white mb-4 drop-shadow-lg\">Track Your Shipment</h1>\n                <p class=\"text-xl text-white/90 mb-8 drop-shadow\">Enter your tracking number to get real-time updates</p>\n                \n                <form method=\"POST\" class=\"max-w-md mx-auto\">\n                    <div class=\"flex\">\n                        <input type=\"text\" name=\"tracking_number\" value=\"<?php echo htmlspecialchars($tracking_number); ?>\" \n                               placeholder=\"Enter tracking number...\" required\n                               class=\"flex-1 px-4 py-3 rounded-l-lg border-0 focus:outline-none focus:ring-2 focus:ring-orange-500 text-lg\">\n                        <button type=\"submit\" \n                                class=\"px-6 py-3 bg-orange-500 text-white rounded-r-lg hover:bg-orange-600 transition duration-200 font-medium text-lg\">\n                            Track\n                        </button>\n                    </div>\n                </form>\n            </div>\n            \n            <?php if ($error): ?>\n                <div class=\"content-overlay rounded-lg p-6 mb-8 border border-red-200\">\n                    <div class=\"text-center\">\n                        <div class=\"text-red-500 text-6xl mb-4\">‚ùå</div>\n                        <h3 class=\"text-xl font-semibold text-red-700 mb-2\">Tracking Number Not Found</h3>\n                        <p class=\"text-red-600\"><?php echo $error; ?></p>\n                    </div>\n                </div>\n            <?php endif; ?>\n            \n            <?php if ($message): ?>\n                <div class=\"content-overlay rounded-lg p-4 mb-8 border border-blue-200\">\n                    <p class=\"text-blue-700 text-center\"><?php echo $message; ?></p>\n                </div>\n            <?php endif; ?>\n            \n            <?php if ($shipment): ?>\n                <!-- Shipment Info -->\n                <div class=\"content-overlay rounded-lg p-6 mb-8 border border-white/20\">\n                    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n                        <div class=\"text-center\">\n                            <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Tracking Number</h3>\n                            <p class=\"text-lg font-semibold text-gray-900\"><?php echo $shipment['tracking_number']; ?></p>\n                        </div>\n                        <div class=\"text-center\">\n                            <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Order Number</h3>\n                            <p class=\"text-lg font-semibold text-gray-900\"><?php echo $shipment['order_number']; ?></p>\n                        </div>\n                        <div class=\"text-center\">\n                            <h3 class=\"text-sm font-medium text-gray-500 mb-1\">Carrier</h3>\n                            <p class=\"text-lg font-semibold text-gray-900\"><?php echo $shipment['carrier']; ?></p>\n                        </div>\n                    </div>\n                    \n                    <!-- Progress Bar -->\n                    <div class=\"mb-8\">\n                        <div class=\"flex justify-between text-sm text-gray-600 mb-2\">\n                            <span>Order Placed</span>\n                            <span>Delivered</span>\n                        </div>\n                        <div class=\"w-full bg-gray-200 rounded-full h-3\">\n                            <div class=\"bg-gradient-to-r from-orange-400 to-orange-600 h-3 rounded-full progress-bar\" \n                                 style=\"width: <?php echo $tracking_manager->get_tracking_progress_percentage($shipment['status']); ?>%\"></div>\n                        </div>\n                        <div class=\"text-center mt-2\">\n                            <span class=\"inline-flex px-3 py-1 text-sm font-semibold rounded-full bg-orange-100 text-orange-800\">\n                                <?php echo ucfirst(str_replace('_', ' ', $shipment['status'])); ?>\n                            </span>\n                        </div>\n                    </div>\n                </div>\n                \n                <!-- Tracking Level Info -->\n                <div class=\"content-overlay rounded-lg p-6 mb-8 border border-white/20\">\n                    <div class=\"flex items-center justify-between mb-4\">\n                        <h2 class=\"text-xl font-semibold text-gray-900\">Tracking Details</h2>\n                        <span class=\"px-3 py-1 text-sm font-semibold rounded-full \n                                   <?php echo $shipment['tracking_level'] === 'basic' ? 'bg-gray-100 text-gray-800' : \n                                             ($shipment['tracking_level'] === 'standard' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'); ?>\">\n                            <?php echo ucfirst($shipment['tracking_level']); ?> Tracking\n                        </span>\n                    </div>\n                    \n                    <?php if ($shipment['tracking_level'] === 'basic'): ?>\n                        <!-- Basic Tracking -->\n                        <div class=\"space-y-4\">\n                            <div class=\"text-center py-8\">\n                                <div class=\"text-4xl mb-4\">üì¶</div>\n                                <h3 class=\"text-lg font-medium text-gray-900 mb-2\">Basic Tracking</h3>\n                                <p class=\"text-gray-600 mb-4\">Current Status: <strong><?php echo ucfirst(str_replace('_', ' ', $shipment['status'])); ?></strong></p>\n                                \n                                <?php if (is_logged_in() && $_SESSION['user_id'] == $shipment['user_id'] && $shipment['free_trackings_used'] >= FREE_TRACKING_LIMIT): ?>\n                                    <div class=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4\">\n                                        <p class=\"text-yellow-800 text-sm\">\n                                            You've used your <?php echo FREE_TRACKING_LIMIT; ?> free trackings. Upgrade for detailed location and ETA information.\n                                        </p>\n                                    </div>\n                                    \n                                    <!-- Upgrade Options -->\n                                    <form method=\"POST\" class=\"space-y-4\">\n                                        <input type=\"hidden\" name=\"tracking_number\" value=\"<?php echo $tracking_number; ?>\">\n                                        \n                                        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                            <div class=\"border border-blue-200 rounded-lg p-4 hover:bg-blue-50 transition duration-200\">\n                                                <label class=\"cursor-pointer\">\n                                                    <input type=\"radio\" name=\"tracking_level\" value=\"standard\" required class=\"sr-only\">\n                                                    <div class=\"text-center\">\n                                                        <h4 class=\"font-semibold text-blue-800 mb-2\">Standard Tracking</h4>\n                                                        <p class=\"text-2xl font-bold text-blue-600 mb-2\">$<?php echo number_format(STANDARD_TRACKING_PRICE, 2); ?></p>\n                                                        <ul class=\"text-sm text-blue-700 space-y-1\">\n                                                            <li>‚úì Current status</li>\n                                                            <li>‚úì Current city</li>\n                                                            <li>‚úì Estimated delivery</li>\n                                                        </ul>\n                                                    </div>\n                                                </label>\n                                            </div>\n                                            \n                                            <div class=\"border border-purple-200 rounded-lg p-4 hover:bg-purple-50 transition duration-200\">\n                                                <label class=\"cursor-pointer\">\n                                                    <input type=\"radio\" name=\"tracking_level\" value=\"premium\" required class=\"sr-only\">\n                                                    <div class=\"text-center\">\n                                                        <h4 class=\"font-semibold text-purple-800 mb-2\">Premium Tracking</h4>\n                                                        <p class=\"text-2xl font-bold text-purple-600 mb-2\">$<?php echo number_format(PREMIUM_TRACKING_PRICE, 2); ?></p>\n                                                        <ul class=\"text-sm text-purple-700 space-y-1\">\n                                                            <li>‚úì Everything in Standard</li>\n                                                            <li>‚úì Exact location</li>\n                                                            <li>‚úì Live updates</li>\n                                                            <li>‚úì SMS notifications</li>\n                                                        </ul>\n                                                    </div>\n                                                </label>\n                                            </div>\n                                        </div>\n                                        \n                                        <button type=\"submit\" name=\"purchase_tracking\" \n                                                class=\"w-full bg-orange-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-orange-600 transition duration-200\">\n                                            Upgrade Tracking\n                                        </button>\n                                    </form>\n                                <?php endif; ?>\n                            </div>\n                        </div>\n                    <?php else: ?>\n                        <!-- Advanced Tracking -->\n                        <div class=\"space-y-6\">\n                            <!-- Current Location -->\n                            <?php if ($shipment['current_location']): ?>\n                                <div class=\"text-center py-4\">\n                                    <div class=\"text-4xl mb-2 pulse-animation\">üìç</div>\n                                    <h3 class=\"text-lg font-medium text-gray-900\">Current Location</h3>\n                                    <p class=\"text-xl font-semibold text-orange-600\"><?php echo htmlspecialchars($shipment['current_location']); ?></p>\n                                </div>\n                            <?php endif; ?>\n                            \n                            <!-- Estimated Delivery -->\n                            <?php if ($shipment['estimated_delivery']): ?>\n                                <div class=\"bg-green-50 border border-green-200 rounded-lg p-4 text-center\">\n                                    <h4 class=\"font-medium text-green-800 mb-1\">Estimated Delivery</h4>\n                                    <p class=\"text-lg font-semibold text-green-700\">\n                                        <?php echo date('M j, Y g:i A', strtotime($shipment['estimated_delivery'])); ?>\n                                    </p>\n                                </div>\n                            <?php endif; ?>\n                        </div>\n                    <?php endif; ?>\n                </div>\n                \n                <!-- Tracking History -->\n                <div class=\"content-overlay rounded-lg p-6 border border-white/20\">\n                    <h2 class=\"text-xl font-semibold text-gray-900 mb-6\">Tracking History</h2>\n                    \n                    <div class=\"space-y-4\">\n                        <?php foreach (array_reverse($shipment['history']) as $index => $event): ?>\n                            <div class=\"flex items-start space-x-4 tracking-step <?php echo $index === 0 ? 'completed' : ''; ?>\">\n                                <div class=\"flex-shrink-0 w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center\">\n                                    <span class=\"text-white text-sm font-bold\"><?php echo $index + 1; ?></span>\n                                </div>\n                                \n                                <div class=\"flex-1\">\n                                    <div class=\"flex items-center justify-between\">\n                                        <h3 class=\"font-medium text-gray-900\"><?php echo htmlspecialchars($event['status']); ?></h3>\n                                        <span class=\"text-sm text-gray-500\"><?php echo date('M j, Y g:i A', strtotime($event['timestamp'])); ?></span>\n                                    </div>\n                                    \n                                    <?php if ($event['location'] && $shipment['tracking_level'] !== 'basic'): ?>\n                                        <p class=\"text-sm text-gray-600 mt-1\">üìç <?php echo htmlspecialchars($event['location']); ?></p>\n                                    <?php endif; ?>\n                                    \n                                    <?php if ($event['description']): ?>\n                                        <p class=\"text-sm text-gray-600 mt-1\"><?php echo htmlspecialchars($event['description']); ?></p>\n                                    <?php endif; ?>\n                                </div>\n                            </div>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n    \n    <script>\n        // Add interactive effects\n        document.addEventListener('DOMContentLoaded', function() {\n            // Animate progress bar on load\n            const progressBar = document.querySelector('.progress-bar');\n            if (progressBar) {\n                setTimeout(() => {\n                    progressBar.style.width = progressBar.style.width;\n                }, 500);\n            }\n            \n            // Handle tracking level selection\n            const trackingOptions = document.querySelectorAll('input[name=\"tracking_level\"]');\n            trackingOptions.forEach(option => {\n                option.addEventListener('change', function() {\n                    // Remove selection from all options\n                    document.querySelectorAll('input[name=\"tracking_level\"]').forEach(opt => {\n                        opt.closest('.border').classList.remove('ring-2', 'ring-blue-500', 'ring-purple-500');\n                    });\n                    \n                    // Add selection to chosen option\n                    const color = this.value === 'standard' ? 'ring-blue-500' : 'ring-purple-500';\n                    this.closest('.border').classList.add('ring-2', color);\n                });\n            });\n        });\n    </script>\n</body>\n</html>\n","size_bytes":20468},"vendor-application.php":{"content":"<?php\nrequire_once './config/config.php';\nrequire_once './includes/vendor.php';\n\n$vendor_manager = new VendorManager();\n$error = '';\n$success = '';\n\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $name = sanitize_input($_POST['name']);\n    $email = sanitize_input($_POST['email']);\n    $business_name = sanitize_input($_POST['business_name']);\n    $description = sanitize_input($_POST['description']);\n    \n    $logo_path = null;\n    \n    // Handle logo upload\n    if (isset($_FILES['logo']) && $_FILES['logo']['error'] == 0) {\n        $allowed_types = ['image/jpeg', 'image/png', 'image/gif'];\n        $file_type = $_FILES['logo']['type'];\n        \n        if (in_array($file_type, $allowed_types) && $_FILES['logo']['size'] <= MAX_FILE_SIZE) {\n            $upload_dir = UPLOAD_PATH . 'vendor_logos/';\n            if (!file_exists($upload_dir)) {\n                mkdir($upload_dir, 0777, true);\n            }\n            \n            $file_extension = pathinfo($_FILES['logo']['name'], PATHINFO_EXTENSION);\n            $filename = uniqid() . '.' . $file_extension;\n            $logo_path = $upload_dir . $filename;\n            \n            if (!move_uploaded_file($_FILES['logo']['tmp_name'], $logo_path)) {\n                $logo_path = null;\n            }\n        }\n    }\n    \n    $result = $vendor_manager->submit_application($name, $email, $business_name, $description, $logo_path);\n    \n    if ($result['success']) {\n        $success = $result['message'];\n    } else {\n        $error = $result['message'];\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Become a Vendor - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        'orange': {\n                            500: '#f97316'\n                        }\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center\">\n                    <a href=\"index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"index.php\" class=\"text-gray-700 hover:text-orange-500\">Home</a>\n                    <a href=\"login.php\" class=\"text-orange-500 hover:text-orange-600\">Login</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-3xl mx-auto py-12 px-4 sm:px-6 lg:px-8\">\n        <div class=\"text-center mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Become a Vendor</h1>\n            <p class=\"mt-4 text-lg text-gray-600\">Join our marketplace and start selling your products to thousands of customers</p>\n        </div>\n        \n        <?php if ($error): ?>\n            <div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\">\n                <?php echo $error; ?>\n            </div>\n        <?php endif; ?>\n        \n        <?php if ($success): ?>\n            <div class=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6\">\n                <?php echo $success; ?>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"bg-white shadow-lg rounded-lg p-8\">\n            <form method=\"POST\" enctype=\"multipart/form-data\" class=\"space-y-6\">\n                <div>\n                    <label for=\"name\" class=\"block text-sm font-medium text-gray-700\">Full Name *</label>\n                    <input id=\"name\" name=\"name\" type=\"text\" required \n                           class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500\">\n                </div>\n                \n                <div>\n                    <label for=\"email\" class=\"block text-sm font-medium text-gray-700\">Email Address *</label>\n                    <input id=\"email\" name=\"email\" type=\"email\" required \n                           class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500\">\n                </div>\n                \n                <div>\n                    <label for=\"business_name\" class=\"block text-sm font-medium text-gray-700\">Business Name *</label>\n                    <input id=\"business_name\" name=\"business_name\" type=\"text\" required \n                           class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500\">\n                </div>\n                \n                <div>\n                    <label for=\"description\" class=\"block text-sm font-medium text-gray-700\">Business Description *</label>\n                    <textarea id=\"description\" name=\"description\" rows=\"4\" required \n                              placeholder=\"Tell us about your business, what products you sell, and why you'd be a great addition to our marketplace...\"\n                              class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500\"></textarea>\n                </div>\n                \n                <div>\n                    <label for=\"logo\" class=\"block text-sm font-medium text-gray-700\">Business Logo (Optional)</label>\n                    <input id=\"logo\" name=\"logo\" type=\"file\" accept=\"image/*\" \n                           class=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500\">\n                    <p class=\"mt-1 text-sm text-gray-500\">Upload your business logo (JPG, PNG, GIF - Max 5MB)</p>\n                </div>\n                \n                <div class=\"bg-orange-50 border border-orange-200 rounded-md p-4\">\n                    <h3 class=\"text-lg font-medium text-orange-800 mb-2\">What happens next?</h3>\n                    <ul class=\"text-sm text-orange-700 space-y-1\">\n                        <li>‚Ä¢ We'll review your application within 24-48 hours</li>\n                        <li>‚Ä¢ If approved, you'll receive login credentials via notification</li>\n                        <li>‚Ä¢ You can then access your vendor dashboard to start adding products</li>\n                        <li>‚Ä¢ Verified vendors get priority placement in search results</li>\n                    </ul>\n                </div>\n                \n                <div class=\"pt-4\">\n                    <button type=\"submit\" \n                            class=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-orange-500 hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition duration-200\">\n                        Submit Application\n                    </button>\n                </div>\n            </form>\n        </div>\n        \n        <div class=\"mt-8 text-center\">\n            <a href=\"index.php\" class=\"text-orange-500 hover:text-orange-600\">‚Üê Back to Home</a>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":7573},"admin/dashboard.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/vendor.php';\nrequire_once '../includes/order.php';\n\nrequire_admin();\n\n$vendor_manager = new VendorManager();\n$orderManager = new OrderManager();\n$pending_applications = $vendor_manager->get_pending_applications();\n$all_vendors = $vendor_manager->get_all_vendors();\n\n// Get comprehensive stats\n$database = new Database();\n$db = $database->getConnection();\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as total_users FROM users WHERE role = 'customer'\");\n$stmt->execute();\n$total_customers = $stmt->fetch(PDO::FETCH_ASSOC)['total_users'];\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as total_users FROM users\");\n$stmt->execute();\n$total_users = $stmt->fetch(PDO::FETCH_ASSOC)['total_users'];\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as total_products FROM products WHERE status = 'active'\");\n$stmt->execute();\n$total_products = $stmt->fetch(PDO::FETCH_ASSOC)['total_products'];\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as total_orders FROM orders\");\n$stmt->execute();\n$total_orders = $stmt->fetch(PDO::FETCH_ASSOC)['total_orders'];\n\n$stmt = $db->prepare(\"SELECT SUM(total_amount) as total_revenue FROM orders WHERE status != 'cancelled'\");\n$stmt->execute();\n$total_revenue = $stmt->fetch(PDO::FETCH_ASSOC)['total_revenue'] ?: 0;\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as pending_orders FROM orders WHERE status = 'pending'\");\n$stmt->execute();\n$pending_orders = $stmt->fetch(PDO::FETCH_ASSOC)['pending_orders'];\n\n// Recent activity\n$stmt = $db->prepare(\"\n    SELECT u.first_name, u.last_name, u.email, u.created_at, 'user' as type\n    FROM users u \n    WHERE u.role = 'customer' \n    ORDER BY u.created_at DESC \n    LIMIT 5\n\");\n$stmt->execute();\n$recent_users = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n$stmt = $db->prepare(\"\n    SELECT o.order_number, o.total_amount, o.created_at, u.first_name, u.last_name, 'order' as type\n    FROM orders o \n    JOIN users u ON o.user_id = u.id \n    ORDER BY o.created_at DESC \n    LIMIT 5\n\");\n$stmt->execute();\n$recent_orders = $stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Admin Dashboard - <?php echo SITE_NAME; ?></title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#0f172a',\n                        secondary: '#1e293b',\n                        accent: '#3b82f6',\n                        warning: '#f59e0b',\n                        success: '#10b981'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-primary\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700 font-medium\">Admin Dashboard</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <span class=\"text-gray-700\">Welcome, <?php echo $_SESSION['first_name']; ?>!</span>\n                    <a href=\"../logout.php\" class=\"bg-accent text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Admin Dashboard</h1>\n            <p class=\"mt-2 text-gray-600\">Comprehensive platform management and analytics</p>\n        </div>\n        \n        <!-- Enhanced stats grid with revenue and pending orders -->\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8\">\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-blue-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-2.25\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Users</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo number_format($total_users); ?></p>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-primary/10 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Vendors</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo number_format(count($all_vendors)); ?></p>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-green-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Active Products</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo number_format($total_products); ?></p>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-purple-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo number_format($total_orders); ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-emerald-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-emerald-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Revenue</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\">$<?php echo number_format($total_revenue, 2); ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-yellow-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Pending Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo number_format($pending_orders); ?></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Enhanced layout with analytics and recent activity -->\n        <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8\">\n            <!-- Pending Applications -->\n            <div class=\"bg-white rounded-lg shadow\">\n                <div class=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n                    <h2 class=\"text-lg font-semibold text-gray-900\">\n                        Pending Applications\n                        <?php if (count($pending_applications) > 0): ?>\n                            <span class=\"bg-red-100 text-red-800 text-sm font-medium px-2.5 py-0.5 rounded-full ml-2\">\n                                <?php echo count($pending_applications); ?>\n                            </span>\n                        <?php endif; ?>\n                    </h2>\n                    <a href=\"vendor-applications.php\" class=\"text-primary hover:text-orange-600 text-sm font-medium\">View All</a>\n                </div>\n                \n                <div class=\"p-6\">\n                    <?php if (empty($pending_applications)): ?>\n                        <p class=\"text-gray-500 text-center py-4\">No pending applications</p>\n                    <?php else: ?>\n                        <div class=\"space-y-4\">\n                            <?php foreach (array_slice($pending_applications, 0, 3) as $app): ?>\n                                <div class=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                                    <div class=\"flex items-center space-x-3\">\n                                        <?php if ($app['logo_path']): ?>\n                                            <img src=\"../<?php echo $app['logo_path']; ?>\" alt=\"Logo\" class=\"w-8 h-8 rounded-full object-cover\">\n                                        <?php else: ?>\n                                            <div class=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center\">\n                                                <span class=\"text-primary text-xs font-medium\"><?php echo substr($app['business_name'], 0, 1); ?></span>\n                                            </div>\n                                        <?php endif; ?>\n                                        <div>\n                                            <p class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($app['business_name']); ?></p>\n                                            <p class=\"text-xs text-gray-500\"><?php echo htmlspecialchars($app['name']); ?></p>\n                                        </div>\n                                    </div>\n                                    <span class=\"text-xs text-gray-500\"><?php echo date('M j', strtotime($app['applied_at'])); ?></span>\n                                </div>\n                            <?php endforeach; ?>\n                        </div>\n                    <?php endif; ?>\n                </div>\n            </div>\n\n            <!-- Recent Users -->\n            <div class=\"bg-white rounded-lg shadow\">\n                <div class=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n                    <h2 class=\"text-lg font-semibold text-gray-900\">Recent Users</h2>\n                    <a href=\"users.php\" class=\"text-primary hover:text-orange-600 text-sm font-medium\">View All</a>\n                </div>\n                <div class=\"p-6\">\n                    <div class=\"space-y-4\">\n                        <?php foreach ($recent_users as $user): ?>\n                            <div class=\"flex items-center space-x-3\">\n                                <div class=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                                    <span class=\"text-blue-600 text-xs font-medium\"><?php echo substr($user['first_name'], 0, 1); ?></span>\n                                </div>\n                                <div class=\"flex-1\">\n                                    <p class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($user['first_name'] . ' ' . $user['last_name']); ?></p>\n                                    <p class=\"text-xs text-gray-500\"><?php echo htmlspecialchars($user['email']); ?></p>\n                                </div>\n                                <span class=\"text-xs text-gray-500\"><?php echo date('M j', strtotime($user['created_at'])); ?></span>\n                            </div>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Recent Orders -->\n            <div class=\"bg-white rounded-lg shadow\">\n                <div class=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between\">\n                    <h2 class=\"text-lg font-semibold text-gray-900\">Recent Orders</h2>\n                    <a href=\"orders.php\" class=\"text-primary hover:text-orange-600 text-sm font-medium\">View All</a>\n                </div>\n                <div class=\"p-6\">\n                    <div class=\"space-y-4\">\n                        <?php foreach ($recent_orders as $order): ?>\n                            <div class=\"flex items-center justify-between\">\n                                <div>\n                                    <p class=\"text-sm font-medium text-gray-900\">#<?php echo $order['order_number']; ?></p>\n                                    <p class=\"text-xs text-gray-500\"><?php echo htmlspecialchars($order['first_name'] . ' ' . $order['last_name']); ?></p>\n                                </div>\n                                <div class=\"text-right\">\n                                    <p class=\"text-sm font-medium text-gray-900\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                                    <p class=\"text-xs text-gray-500\"><?php echo date('M j', strtotime($order['created_at'])); ?></p>\n                                </div>\n                            </div>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            </div>\n        </div>\n            \n        <!-- Enhanced quick actions grid with more management options -->\n        <div class=\"bg-white rounded-lg shadow\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-lg font-semibold text-gray-900\">Management Tools</h2>\n            </div>\n            \n            <div class=\"p-6\">\n                <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                    <a href=\"vendor-applications.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Review Applications</p>\n                            <p class=\"text-xs text-gray-500\">Approve vendor applications</p>\n                        </div>\n                    </a>\n                    \n                    <a href=\"vendor-management.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Manage Vendors</p>\n                            <p class=\"text-xs text-gray-500\">Vendor accounts & badges</p>\n                        </div>\n                    </a>\n                    \n                    <a href=\"users.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-2.25\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Manage Users</p>\n                            <p class=\"text-xs text-gray-500\">User accounts & roles</p>\n                        </div>\n                    </a>\n                    \n                    <a href=\"products.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-purple-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Manage Products</p>\n                            <p class=\"text-xs text-gray-500\">Product listings & reviews</p>\n                        </div>\n                    </a>\n\n                    <a href=\"orders.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Manage Orders</p>\n                            <p class=\"text-xs text-gray-500\">Order processing & status</p>\n                        </div>\n                    </a>\n                    \n                    <a href=\"shipment-management.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-indigo-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Manage Shipments</p>\n                            <p class=\"text-xs text-gray-500\">Tracking & delivery status</p>\n                        </div>\n                    </a>\n\n                    <a href=\"analytics.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-pink-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-pink-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">Analytics</p>\n                            <p class=\"text-xs text-gray-500\">Sales & performance data</p>\n                        </div>\n                    </a>\n\n                    <a href=\"settings.php\" class=\"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition duration-200\">\n                        <div class=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-4\">\n                            <svg class=\"w-5 h-5 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"></path>\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n                            </svg>\n                        </div>\n                        <div>\n                            <p class=\"text-sm font-medium text-gray-900\">System Settings</p>\n                            <p class=\"text-xs text-gray-500\">Platform configuration</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":23970},"admin/shipment-management.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/tracking.php';\n\nrequire_admin();\n\n$tracking_manager = new TrackingManager();\n$message = '';\n\n// Handle status updates\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['update_status'])) {\n    $shipment_id = $_POST['shipment_id'];\n    $status = $_POST['status'];\n    $location = sanitize_input($_POST['location']);\n    $description = sanitize_input($_POST['description']);\n    \n    $result = $tracking_manager->update_shipment_status($shipment_id, $status, $location, $description);\n    $message = $result['message'];\n}\n\n$page = max(1, $_GET['page'] ?? 1);\n$limit = 20;\n$offset = ($page - 1) * $limit;\n\n$shipments = $tracking_manager->get_all_shipments($limit, $offset);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Shipment Management - Admin Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        'orange': {\n                            500: '#f97316'\n                        }\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Shipment Management</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-orange-500\">Dashboard</a>\n                    <a href=\"../logout.php\" class=\"text-orange-500 hover:text-orange-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Shipment Management</h1>\n            <p class=\"mt-2 text-gray-600\">Track and update shipment statuses</p>\n        </div>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"bg-white shadow rounded-lg overflow-hidden\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-lg font-semibold text-gray-900\">All Shipments</h2>\n            </div>\n            \n            <?php if (empty($shipments)): ?>\n                <div class=\"px-6 py-8 text-center text-gray-500\">\n                    No shipments found\n                </div>\n            <?php else: ?>\n                <div class=\"overflow-x-auto\">\n                    <table class=\"min-w-full divide-y divide-gray-200\">\n                        <thead class=\"bg-gray-50\">\n                            <tr>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Tracking Number</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Order</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Customer</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Location</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody class=\"bg-white divide-y divide-gray-200\">\n                            <?php foreach ($shipments as $shipment): ?>\n                                <tr>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm font-medium text-gray-900\"><?php echo $shipment['tracking_number']; ?></div>\n                                        <div class=\"text-sm text-gray-500\"><?php echo $shipment['carrier']; ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm text-gray-900\"><?php echo $shipment['order_number']; ?></div>\n                                        <div class=\"text-sm text-gray-500\"><?php echo date('M j, Y', strtotime($shipment['created_at'])); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm text-gray-900\"><?php echo htmlspecialchars($shipment['first_name'] . ' ' . $shipment['last_name']); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <?php\n                                        $status_colors = [\n                                            'pending' => 'bg-yellow-100 text-yellow-800',\n                                            'picked_up' => 'bg-blue-100 text-blue-800',\n                                            'in_transit' => 'bg-purple-100 text-purple-800',\n                                            'out_for_delivery' => 'bg-orange-100 text-orange-800',\n                                            'delivered' => 'bg-green-100 text-green-800'\n                                        ];\n                                        ?>\n                                        <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full <?php echo $status_colors[$shipment['status']]; ?>\">\n                                            <?php echo ucfirst(str_replace('_', ' ', $shipment['status'])); ?>\n                                        </span>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                        <?php echo htmlspecialchars($shipment['current_location'] ?: 'Not specified'); ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                                        <button onclick=\"openUpdateModal(<?php echo htmlspecialchars(json_encode($shipment)); ?>)\" \n                                                class=\"text-orange-600 hover:text-orange-900\">\n                                            Update\n                                        </button>\n                                    </td>\n                                </tr>\n                            <?php endforeach; ?>\n                        </tbody>\n                    </table>\n                </div>\n            <?php endif; ?>\n        </div>\n        \n        <!-- Pagination -->\n        <div class=\"mt-8 flex justify-center\">\n            <div class=\"flex space-x-2\">\n                <?php if ($page > 1): ?>\n                    <a href=\"?page=<?php echo $page - 1; ?>\" \n                       class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Previous</a>\n                <?php endif; ?>\n                \n                <?php if (count($shipments) == $limit): ?>\n                    <a href=\"?page=<?php echo $page + 1; ?>\" \n                       class=\"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50\">Next</a>\n                <?php endif; ?>\n            </div>\n        </div>\n    </div>\n    \n    <!-- Update Modal - Professional Market Nest Styling -->\n    <div id=\"updateModal\" class=\"fixed inset-0 bg-black bg-opacity-60 hidden backdrop-blur-sm transition-all duration-300 z-50\">\n        <div class=\"flex items-center justify-center min-h-screen p-4\">\n            <div class=\"bg-white rounded-xl shadow-2xl max-w-md w-full border border-gray-100 transform transition-all duration-300\">\n                <form method=\"POST\">\n                    <div class=\"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-accent to-blue-600 rounded-t-xl\">\n                        <h3 class=\"text-lg font-semibold text-white flex items-center\">\n                            <span class=\"w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center mr-3\">\n                                <span class=\"text-white font-bold text-sm\">MN</span>\n                            </span>\n                            Update Shipment Status\n                        </h3>\n                    </div>\n                    \n                    <div class=\"px-6 py-4 space-y-4\">\n                        <input type=\"hidden\" name=\"shipment_id\" id=\"modal_shipment_id\">\n                        \n                        <div>\n                            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Tracking Number</label>\n                            <p id=\"modal_tracking_number\" class=\"text-sm text-gray-900 font-medium\"></p>\n                        </div>\n                        \n                        <div>\n                            <label for=\"modal_status\" class=\"block text-sm font-medium text-gray-700 mb-1\">Status</label>\n                            <select name=\"status\" id=\"modal_status\" required \n                                    class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500\">\n                                <option value=\"pending\">Pending</option>\n                                <option value=\"picked_up\">Picked Up</option>\n                                <option value=\"in_transit\">In Transit</option>\n                                <option value=\"out_for_delivery\">Out for Delivery</option>\n                                <option value=\"delivered\">Delivered</option>\n                            </select>\n                        </div>\n                        \n                        <div>\n                            <label for=\"modal_location\" class=\"block text-sm font-medium text-gray-700 mb-1\">Current Location</label>\n                            <input type=\"text\" name=\"location\" id=\"modal_location\" \n                                   class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500\">\n                        </div>\n                        \n                        <div>\n                            <label for=\"modal_description\" class=\"block text-sm font-medium text-gray-700 mb-1\">Description</label>\n                            <textarea name=\"description\" id=\"modal_description\" rows=\"3\" \n                                      class=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-\n","size_bytes":11481},"admin/users.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/auth.php';\n\nrequire_admin();\n\n$database = new Database();\n$db = $database->getConnection();\n\n// Handle user actions\nif ($_POST['action'] ?? '' === 'update_status') {\n    $user_id = $_POST['user_id'];\n    $status = $_POST['status'];\n    \n    $stmt = $db->prepare(\"UPDATE users SET status = ? WHERE id = ?\");\n    $stmt->execute([$status, $user_id]);\n    \n    header('Location: users.php?updated=1');\n    exit();\n}\n\n// Get users with pagination\n$page = max(1, $_GET['page'] ?? 1);\n$limit = 20;\n$offset = ($page - 1) * $limit;\n\n$search = $_GET['search'] ?? '';\n$role_filter = $_GET['role'] ?? '';\n\n$where_conditions = [];\n$params = [];\n\nif ($search) {\n    $where_conditions[] = \"(first_name LIKE ? OR last_name LIKE ? OR email LIKE ?)\";\n    $params[] = \"%$search%\";\n    $params[] = \"%$search%\";\n    $params[] = \"%$search%\";\n}\n\nif ($role_filter) {\n    $where_conditions[] = \"role = ?\";\n    $params[] = $role_filter;\n}\n\n$where_clause = $where_conditions ? 'WHERE ' . implode(' AND ', $where_conditions) : '';\n\n$stmt = $db->prepare(\"SELECT * FROM users $where_clause ORDER BY created_at DESC LIMIT $limit OFFSET $offset\");\n$stmt->execute($params);\n$users = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n$stmt = $db->prepare(\"SELECT COUNT(*) as total FROM users $where_clause\");\n$stmt->execute($params);\n$total_users = $stmt->fetch(PDO::FETCH_ASSOC)['total'];\n$total_pages = ceil($total_users / $limit);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>User Management - Admin</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#f97316',\n                        secondary: '#fb923c'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-primary\">E-Commerce</a>\n                    <span class=\"text-gray-400\">|</span>\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-primary\">Admin</a>\n                    <span class=\"text-gray-400\">></span>\n                    <span class=\"text-gray-700 font-medium\">Users</span>\n                </div>\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-primary\">Dashboard</a>\n                    <a href=\"../logout.php\" class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition\">Logout</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">User Management</h1>\n            <p class=\"text-gray-600 mt-2\">Manage user accounts and permissions</p>\n        </div>\n\n        <!-- Filters -->\n        <div class=\"bg-white rounded-lg shadow mb-6\">\n            <div class=\"p-6\">\n                <form method=\"GET\" class=\"flex flex-wrap gap-4\">\n                    <div class=\"flex-1 min-w-64\">\n                        <input type=\"text\" name=\"search\" value=\"<?php echo htmlspecialchars($search); ?>\" \n                               placeholder=\"Search users...\" \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                    </div>\n                    <div>\n                        <select name=\"role\" class=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                            <option value=\"\">All Roles</option>\n                            <option value=\"customer\" <?php echo $role_filter === 'customer' ? 'selected' : ''; ?>>Customer</option>\n                            <option value=\"vendor\" <?php echo $role_filter === 'vendor' ? 'selected' : ''; ?>>Vendor</option>\n                            <option value=\"admin\" <?php echo $role_filter === 'admin' ? 'selected' : ''; ?>>Admin</option>\n                        </select>\n                    </div>\n                    <button type=\"submit\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition\">\n                        Search\n                    </button>\n                </form>\n            </div>\n        </div>\n\n        <!-- Users Table -->\n        <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-lg font-semibold text-gray-900\">Users (<?php echo number_format($total_users); ?>)</h2>\n            </div>\n            \n            <div class=\"overflow-x-auto\">\n                <table class=\"min-w-full divide-y divide-gray-200\">\n                    <thead class=\"bg-gray-50\">\n                        <tr>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">User</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Role</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Joined</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody class=\"bg-white divide-y divide-gray-200\">\n                        <?php foreach ($users as $user): ?>\n                            <tr>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <div class=\"flex items-center\">\n                                        <div class=\"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center\">\n                                            <span class=\"text-primary font-medium\"><?php echo substr($user['first_name'], 0, 1); ?></span>\n                                        </div>\n                                        <div class=\"ml-4\">\n                                            <div class=\"text-sm font-medium text-gray-900\">\n                                                <?php echo htmlspecialchars($user['first_name'] . ' ' . $user['last_name']); ?>\n                                            </div>\n                                            <div class=\"text-sm text-gray-500\"><?php echo htmlspecialchars($user['email']); ?></div>\n                                        </div>\n                                    </div>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \n                                        <?php echo $user['role'] === 'admin' ? 'bg-red-100 text-red-800' : \n                                            ($user['role'] === 'vendor' ? 'bg-primary/10 text-primary' : 'bg-blue-100 text-blue-800'); ?>\">\n                                        <?php echo ucfirst($user['role']); ?>\n                                    </span>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \n                                        <?php echo $user['status'] === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'; ?>\">\n                                        <?php echo ucfirst($user['status']); ?>\n                                    </span>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                    <?php echo date('M j, Y', strtotime($user['created_at'])); ?>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                                    <?php if ($user['role'] !== 'admin'): ?>\n                                        <form method=\"POST\" class=\"inline\">\n                                            <input type=\"hidden\" name=\"action\" value=\"update_status\">\n                                            <input type=\"hidden\" name=\"user_id\" value=\"<?php echo $user['id']; ?>\">\n                                            <input type=\"hidden\" name=\"status\" value=\"<?php echo $user['status'] === 'active' ? 'inactive' : 'active'; ?>\">\n                                            <button type=\"submit\" class=\"text-primary hover:text-orange-600\">\n                                                <?php echo $user['status'] === 'active' ? 'Deactivate' : 'Activate'; ?>\n                                            </button>\n                                        </form>\n                                    <?php endif; ?>\n                                </td>\n                            </tr>\n                        <?php endforeach; ?>\n                    </tbody>\n                </table>\n            </div>\n\n            <!-- Pagination -->\n            <?php if ($total_pages > 1): ?>\n                <div class=\"px-6 py-4 border-t border-gray-200\">\n                    <div class=\"flex justify-between items-center\">\n                        <div class=\"text-sm text-gray-700\">\n                            Showing <?php echo ($offset + 1); ?> to <?php echo min($offset + $limit, $total_users); ?> of <?php echo $total_users; ?> users\n                        </div>\n                        <div class=\"flex space-x-2\">\n                            <?php if ($page > 1): ?>\n                                <a href=\"?page=<?php echo $page - 1; ?>&search=<?php echo urlencode($search); ?>&role=<?php echo urlencode($role_filter); ?>\" \n                                   class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50\">Previous</a>\n                            <?php endif; ?>\n                            \n                            <?php for ($i = max(1, $page - 2); $i <= min($total_pages, $page + 2); $i++): ?>\n                                <a href=\"?page=<?php echo $i; ?>&search=<?php echo urlencode($search); ?>&role=<?php echo urlencode($role_filter); ?>\" \n                                   class=\"px-3 py-2 border rounded-lg text-sm <?php echo $i === $page ? 'bg-primary text-white border-primary' : 'border-gray-300 hover:bg-gray-50'; ?>\">\n                                    <?php echo $i; ?>\n                                </a>\n                            <?php endfor; ?>\n                            \n                            <?php if ($page < $total_pages): ?>\n                                <a href=\"?page=<?php echo $page + 1; ?>&search=<?php echo urlencode($search); ?>&role=<?php echo urlencode($role_filter); ?>\" \n                                   class=\"px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50\">Next</a>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":11774},"admin/vendor-applications.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/vendor.php';\n\nrequire_admin();\n\n$vendor_manager = new VendorManager();\n$message = '';\n\n// Handle actions\nif ($_SERVER['REQUEST_METHOD'] == 'POST') {\n    $action = $_POST['action'];\n    $application_id = $_POST['application_id'];\n    \n    if ($action == 'approve') {\n        $result = $vendor_manager->approve_application($application_id, $_SESSION['user_id']);\n        $message = $result['message'];\n        if ($result['success']) {\n            $message .= \" Login credentials: Username: \" . $result['credentials']['username'] . \", Password: \" . $result['credentials']['password'];\n        }\n    } elseif ($action == 'reject') {\n        $result = $vendor_manager->reject_application($application_id, $_SESSION['user_id']);\n        $message = $result['message'];\n    }\n}\n\n$pending_applications = $vendor_manager->get_pending_applications();\n$all_applications = $vendor_manager->get_all_applications();\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Vendor Applications - Admin Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        'orange': {\n                            500: '#f97316'\n                        }\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Admin Dashboard</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-orange-500\">Dashboard</a>\n                    <a href=\"../logout.php\" class=\"text-orange-500 hover:text-orange-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Vendor Applications</h1>\n            <p class=\"mt-2 text-gray-600\">Review and manage vendor applications</p>\n        </div>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <!-- Pending Applications -->\n        <div class=\"bg-white shadow rounded-lg mb-8\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-xl font-semibold text-gray-900\">\n                    Pending Applications \n                    <span class=\"bg-orange-100 text-orange-800 text-sm font-medium px-2.5 py-0.5 rounded-full ml-2\">\n                        <?php echo count($pending_applications); ?>\n                    </span>\n                </h2>\n            </div>\n            \n            <?php if (empty($pending_applications)): ?>\n                <div class=\"px-6 py-8 text-center text-gray-500\">\n                    No pending applications\n                </div>\n            <?php else: ?>\n                <div class=\"divide-y divide-gray-200\">\n                    <?php foreach ($pending_applications as $app): ?>\n                        <div class=\"px-6 py-6\">\n                            <div class=\"flex items-start justify-between\">\n                                <div class=\"flex-1\">\n                                    <div class=\"flex items-center space-x-4 mb-4\">\n                                        <?php if ($app['logo_path']): ?>\n                                            <img src=\"../<?php echo $app['logo_path']; ?>\" alt=\"Logo\" class=\"w-12 h-12 rounded-full object-cover\">\n                                        <?php else: ?>\n                                            <div class=\"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center\">\n                                                <span class=\"text-orange-500 font-medium\"><?php echo substr($app['business_name'], 0, 1); ?></span>\n                                            </div>\n                                        <?php endif; ?>\n                                        <div>\n                                            <h3 class=\"text-lg font-medium text-gray-900\"><?php echo htmlspecialchars($app['business_name']); ?></h3>\n                                            <p class=\"text-sm text-gray-500\">by <?php echo htmlspecialchars($app['name']); ?></p>\n                                        </div>\n                                    </div>\n                                    \n                                    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                                        <div>\n                                            <span class=\"text-sm font-medium text-gray-500\">Email:</span>\n                                            <p class=\"text-sm text-gray-900\"><?php echo htmlspecialchars($app['email']); ?></p>\n                                        </div>\n                                        <div>\n                                            <span class=\"text-sm font-medium text-gray-500\">Applied:</span>\n                                            <p class=\"text-sm text-gray-900\"><?php echo date('M j, Y g:i A', strtotime($app['applied_at'])); ?></p>\n                                        </div>\n                                    </div>\n                                    \n                                    <div class=\"mb-4\">\n                                        <span class=\"text-sm font-medium text-gray-500\">Description:</span>\n                                        <p class=\"text-sm text-gray-900 mt-1\"><?php echo nl2br(htmlspecialchars($app['description'])); ?></p>\n                                    </div>\n                                </div>\n                                \n                                <div class=\"flex space-x-2 ml-4\">\n                                    <form method=\"POST\" class=\"inline\">\n                                        <input type=\"hidden\" name=\"action\" value=\"approve\">\n                                        <input type=\"hidden\" name=\"application_id\" value=\"<?php echo $app['id']; ?>\">\n                                        <button type=\"submit\" \n                                                onclick=\"return confirm('Are you sure you want to approve this application?')\"\n                                                class=\"bg-green-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-600 transition duration-200\">\n                                            Approve\n                                        </button>\n                                    </form>\n                                    \n                                    <form method=\"POST\" class=\"inline\">\n                                        <input type=\"hidden\" name=\"action\" value=\"reject\">\n                                        <input type=\"hidden\" name=\"application_id\" value=\"<?php echo $app['id']; ?>\">\n                                        <button type=\"submit\" \n                                                onclick=\"return confirm('Are you sure you want to reject this application?')\"\n                                                class=\"bg-red-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-600 transition duration-200\">\n                                            Reject\n                                        </button>\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                    <?php endforeach; ?>\n                </div>\n            <?php endif; ?>\n        </div>\n        \n        <!-- All Applications History -->\n        <div class=\"bg-white shadow rounded-lg\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-xl font-semibold text-gray-900\">Application History</h2>\n            </div>\n            \n            <div class=\"overflow-x-auto\">\n                <table class=\"min-w-full divide-y divide-gray-200\">\n                    <thead class=\"bg-gray-50\">\n                        <tr>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Business</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Applicant</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Applied</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                            <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Reviewed By</th>\n                        </tr>\n                    </thead>\n                    <tbody class=\"bg-white divide-y divide-gray-200\">\n                        <?php foreach ($all_applications as $app): ?>\n                            <tr>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <div class=\"flex items-center\">\n                                        <?php if ($app['logo_path']): ?>\n                                            <img src=\"../<?php echo $app['logo_path']; ?>\" alt=\"Logo\" class=\"w-8 h-8 rounded-full object-cover mr-3\">\n                                        <?php else: ?>\n                                            <div class=\"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center mr-3\">\n                                                <span class=\"text-orange-500 text-xs font-medium\"><?php echo substr($app['business_name'], 0, 1); ?></span>\n                                            </div>\n                                        <?php endif; ?>\n                                        <span class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($app['business_name']); ?></span>\n                                    </div>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <div class=\"text-sm text-gray-900\"><?php echo htmlspecialchars($app['name']); ?></div>\n                                    <div class=\"text-sm text-gray-500\"><?php echo htmlspecialchars($app['email']); ?></div>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                    <?php echo date('M j, Y', strtotime($app['applied_at'])); ?>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap\">\n                                    <?php\n                                    $status_colors = [\n                                        'pending' => 'bg-yellow-100 text-yellow-800',\n                                        'approved' => 'bg-green-100 text-green-800',\n                                        'rejected' => 'bg-red-100 text-red-800'\n                                    ];\n                                    ?>\n                                    <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full <?php echo $status_colors[$app['status']]; ?>\">\n                                        <?php echo ucfirst($app['status']); ?>\n                                    </span>\n                                </td>\n                                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                    <?php echo $app['reviewed_by_username'] ?? '-'; ?>\n                                </td>\n                            </tr>\n                        <?php endforeach; ?>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":12560},"admin/vendor-management.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/vendor.php';\n\nrequire_admin();\n\n$vendor_manager = new VendorManager();\n$message = '';\n\n// Handle badge assignment\nif ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['assign_badge'])) {\n    $vendor_id = $_POST['vendor_id'];\n    $badge_name = $_POST['badge_name'];\n    \n    $result = $vendor_manager->assign_badge($vendor_id, $badge_name);\n    $message = $result['message'];\n}\n\n$vendors = $vendor_manager->get_all_vendors();\n\n// Get available badges\n$database = new Database();\n$db = $database->getConnection();\n$stmt = $db->prepare(\"SELECT * FROM badges ORDER BY name\");\n$stmt->execute();\n$badges = $stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Vendor Management - Admin Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        'orange': {\n                            500: '#f97316'\n                        }\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50 min-h-screen\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between items-center h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-orange-500\"><?php echo SITE_NAME; ?></a>\n                    <span class=\"text-gray-400\">|</span>\n                    <span class=\"text-gray-700\">Admin Dashboard</span>\n                </div>\n                \n                <nav class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-orange-500\">Dashboard</a>\n                    <a href=\"vendor-applications.php\" class=\"text-gray-700 hover:text-orange-500\">Applications</a>\n                    <a href=\"../logout.php\" class=\"text-orange-500 hover:text-orange-600\">Logout</a>\n                </nav>\n            </div>\n        </div>\n    </header>\n\n    <div class=\"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Vendor Management</h1>\n            <p class=\"mt-2 text-gray-600\">Manage existing vendors and assign verification badges</p>\n        </div>\n        \n        <?php if ($message): ?>\n            <div class=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-6\">\n                <?php echo $message; ?>\n            </div>\n        <?php endif; ?>\n        \n        <div class=\"bg-white shadow rounded-lg\">\n            <div class=\"px-6 py-4 border-b border-gray-200\">\n                <h2 class=\"text-xl font-semibold text-gray-900\">\n                    All Vendors \n                    <span class=\"bg-orange-100 text-orange-800 text-sm font-medium px-2.5 py-0.5 rounded-full ml-2\">\n                        <?php echo count($vendors); ?>\n                    </span>\n                </h2>\n            </div>\n            \n            <?php if (empty($vendors)): ?>\n                <div class=\"px-6 py-8 text-center text-gray-500\">\n                    No vendors found\n                </div>\n            <?php else: ?>\n                <div class=\"overflow-x-auto\">\n                    <table class=\"min-w-full divide-y divide-gray-200\">\n                        <thead class=\"bg-gray-50\">\n                            <tr>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Vendor</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Contact</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Badge</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody class=\"bg-white divide-y divide-gray-200\">\n                            <?php foreach ($vendors as $vendor): ?>\n                                <tr>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"flex items-center\">\n                                            <?php if ($vendor['logo_path']): ?>\n                                                <img src=\"../<?php echo $vendor['logo_path']; ?>\" alt=\"Logo\" class=\"w-10 h-10 rounded-full object-cover mr-4\">\n                                            <?php else: ?>\n                                                <div class=\"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mr-4\">\n                                                    <span class=\"text-orange-500 font-medium\"><?php echo substr($vendor['business_name'], 0, 1); ?></span>\n                                                </div>\n                                            <?php endif; ?>\n                                            <div>\n                                                <div class=\"text-sm font-medium text-gray-900\"><?php echo htmlspecialchars($vendor['business_name']); ?></div>\n                                                <div class=\"text-sm text-gray-500\">@<?php echo htmlspecialchars($vendor['username']); ?></div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"text-sm text-gray-900\"><?php echo htmlspecialchars($vendor['first_name'] . ' ' . $vendor['last_name']); ?></div>\n                                        <div class=\"text-sm text-gray-500\"><?php echo htmlspecialchars($vendor['email']); ?></div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <?php if ($vendor['is_verified']): ?>\n                                            <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800\">\n                                                Verified\n                                            </span>\n                                        <?php else: ?>\n                                            <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800\">\n                                                Unverified\n                                            </span>\n                                        <?php endif; ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <?php if ($vendor['verification_badge']): ?>\n                                            <span class=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-orange-100 text-orange-800\">\n                                                <?php echo htmlspecialchars($vendor['verification_badge']); ?>\n                                            </span>\n                                        <?php else: ?>\n                                            <span class=\"text-sm text-gray-500\">No badge</span>\n                                        <?php endif; ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <form method=\"POST\" class=\"flex items-center space-x-2\">\n                                            <input type=\"hidden\" name=\"vendor_id\" value=\"<?php echo $vendor['id']; ?>\">\n                                            <select name=\"badge_name\" class=\"text-sm border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-orange-500 focus:border-orange-500\">\n                                                <option value=\"\">Select Badge</option>\n                                                <?php foreach ($badges as $badge): ?>\n                                                    <option value=\"<?php echo $badge['name']; ?>\" <?php echo ($vendor['verification_badge'] == $badge['name']) ? 'selected' : ''; ?>>\n                                                        <?php echo htmlspecialchars($badge['name']); ?>\n                                                    </option>\n                                                <?php endforeach; ?>\n                                            </select>\n                                            <button type=\"submit\" name=\"assign_badge\" \n                                                    class=\"bg-orange-500 text-white px-3 py-1 rounded-md text-sm font-medium hover:bg-orange-600 transition duration-200\">\n                                                Assign\n                                            </button>\n                                        </form>\n                                    </td>\n                                </tr>\n                            <?php endforeach; ?>\n                        </tbody>\n                    </table>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":9738},"api/cart-count.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/cart.php';\n\nheader('Content-Type: application/json');\n\nif (!is_logged_in()) {\n    echo json_encode(['count' => 0]);\n    exit;\n}\n\n$cart_manager = new CartManager();\n$count = $cart_manager->get_cart_count($_SESSION['user_id']);\n\necho json_encode(['count' => $count]);\n?>\n","size_bytes":338},"config/config.php":{"content":"<?php\n// Session configuration must be first, before any output\nini_set('session.cookie_httponly', 1);\nini_set('session.use_only_cookies', 1);\nini_set('session.cookie_secure', 0); // Set to 1 for HTTPS\n\nsession_start();\n\n// Site configuration\ndefine('SITE_NAME', 'Market Nest');\ndefine('SITE_URL', 'https://' . ($_SERVER['HTTP_HOST'] ?? 'localhost:5000'));\ndefine('UPLOAD_PATH', 'uploads/');\ndefine('MAX_FILE_SIZE', 5 * 1024 * 1024); // 5MB\n\n// Tracking pricing\ndefine('FREE_TRACKING_LIMIT', 2);\ndefine('STANDARD_TRACKING_PRICE', 5.99);\ndefine('PREMIUM_TRACKING_PRICE', 9.99);\n\n// Include database connection\nrequire_once 'database.php';\n\n// Helper functions\nfunction sanitize_input($data) {\n    return htmlspecialchars(strip_tags(trim($data)));\n}\n\nfunction redirect($url) {\n    header(\"Location: \" . $url);\n    exit();\n}\n\nfunction is_logged_in() {\n    return isset($_SESSION['user_id']);\n}\n\nfunction get_user_role() {\n    return $_SESSION['user_role'] ?? 'customer';\n}\n\nfunction require_login() {\n    if (!is_logged_in()) {\n        redirect('login.php');\n    }\n}\n\nfunction require_admin() {\n    require_login();\n    if (get_user_role() !== 'admin') {\n        redirect('index.php');\n    }\n}\n\nfunction require_vendor() {\n    require_login();\n    if (!in_array(get_user_role(), ['vendor', 'admin'])) {\n        redirect('index.php');\n    }\n}\n\n// Additional auth helper functions\nfunction isLoggedIn() {\n    return is_logged_in();\n}\n\nfunction getCurrentUser() {\n    if (!is_logged_in()) {\n        return null;\n    }\n    \n    $database = new Database();\n    $db = $database->getConnection();\n    \n    try {\n        $stmt = $db->prepare(\"\n            SELECT u.*, ur.role \n            FROM users u \n            LEFT JOIN user_roles ur ON u.id = ur.user_id \n            WHERE u.id = ?\n        \");\n        $stmt->execute([$_SESSION['user_id']]);\n        \n        return $stmt->fetch(PDO::FETCH_ASSOC);\n        \n    } catch (PDOException $e) {\n        return null;\n    }\n}\n?>\n","size_bytes":1966},"config/database.php":{"content":"<?php\nclass Database {\n    private $host = 'localhost';\n    private $db_name = 'ecommerce_db';\n    private $username = 'root';\n    private $password = '';\n    private $conn;\n\n    public function getConnection() {\n        $this->conn = null;\n        \n        // Try MySQL first, fallback to SQLite if MySQL is not available\n        try {\n            $this->conn = new PDO(\n                \"mysql:host=\" . $this->host . \";dbname=\" . $this->db_name . \";charset=utf8mb4\",\n                $this->username,\n                $this->password,\n                array(\n                    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,\n                    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,\n                    PDO::MYSQL_ATTR_INIT_COMMAND => \"SET NAMES utf8mb4\"\n                )\n            );\n            \n        } catch(PDOException $mysql_exception) {\n            // Fallback to SQLite if MySQL is not available\n            try {\n                $sqlite_path = __DIR__ . '/../database/ecommerce.db';\n                \n                // Create database directory if it doesn't exist\n                $db_dir = dirname($sqlite_path);\n                if (!is_dir($db_dir)) {\n                    mkdir($db_dir, 0755, true);\n                }\n                \n                $this->conn = new PDO(\n                    \"sqlite:\" . $sqlite_path,\n                    null,\n                    null,\n                    array(\n                        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,\n                        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,\n                        PDO::ATTR_EMULATE_PREPARES => false\n                    )\n                );\n                \n                // Enable foreign key constraints for SQLite\n                $this->conn->exec(\"PRAGMA foreign_keys = ON\");\n                \n                // Initialize SQLite database if it's empty\n                $this->initializeSQLiteIfEmpty();\n                \n            } catch(PDOException $sqlite_exception) {\n                echo \"Database connection error: \" . $mysql_exception->getMessage() . \" (MySQL), \" . $sqlite_exception->getMessage() . \" (SQLite)\";\n            }\n        }\n        \n        return $this->conn;\n    }\n    \n    private function initializeSQLiteIfEmpty() {\n        try {\n            // Check if tables exist\n            $result = $this->conn->query(\"SELECT name FROM sqlite_master WHERE type='table' AND name='users'\");\n            if ($result->rowCount() == 0) {\n                // Database is empty, initialize it directly here to avoid recursion\n                $schema = file_get_contents(__DIR__ . '/../database/schema_sqlite.sql');\n                $statements = explode(';', $schema);\n                \n                foreach ($statements as $statement) {\n                    $statement = trim($statement);\n                    if (!empty($statement)) {\n                        $this->conn->exec($statement);\n                    }\n                }\n                \n                // Insert basic sample data\n                $this->insertSampleData();\n            }\n        } catch (Exception $e) {\n            // Ignore initialization errors\n        }\n    }\n    \n    private function insertSampleData() {\n        try {\n            // Insert sample categories\n            $categories = [\n                ['Electronics', 'Electronic gadgets and devices', 'üì±'],\n                ['Clothing', 'Fashion and apparel', 'üëï'],\n                ['Home & Garden', 'Home improvement and garden items', 'üè†'],\n                ['Books', 'Books and educational materials', 'üìö'],\n                ['Sports', 'Sports and outdoor equipment', '‚öΩ'],\n                ['Beauty', 'Beauty and personal care products', 'üíÑ']\n            ];\n            \n            $stmt = $this->conn->prepare(\"INSERT OR IGNORE INTO categories (name, description, icon) VALUES (?, ?, ?)\");\n            foreach ($categories as $category) {\n                $stmt->execute([$category[0], $category[1], $category[2]]);\n            }\n            \n            // Create a default admin user\n            $admin_password = password_hash('admin123', PASSWORD_DEFAULT);\n            $stmt = $this->conn->prepare(\"INSERT OR IGNORE INTO users (username, email, password, first_name, last_name, role) VALUES (?, ?, ?, ?, ?, ?)\");\n            $stmt->execute(['admin', 'admin@marketnest.com', $admin_password, 'Admin', 'User', 'admin']);\n        } catch (Exception $e) {\n            // Ignore sample data errors\n        }\n    }\n}\n?>","size_bytes":4514},"database/init.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/database.php';\n\nfunction initializeDatabase() {\n    try {\n        $database = new Database();\n        $conn = $database->getConnection();\n        \n        if ($conn) {\n            echo \"Database connection established successfully.\\n\";\n            \n            // Read and execute the schema\n            $schema = file_get_contents(__DIR__ . '/schema_sqlite.sql');\n            $statements = explode(';', $schema);\n            \n            foreach ($statements as $statement) {\n                $statement = trim($statement);\n                if (!empty($statement)) {\n                    $conn->exec($statement);\n                }\n            }\n            \n            echo \"Database schema created successfully.\\n\";\n            \n            // Insert sample categories\n            insertSampleData($conn);\n            \n            return true;\n        } else {\n            echo \"Failed to connect to database.\\n\";\n            return false;\n        }\n    } catch (Exception $e) {\n        echo \"Error initializing database: \" . $e->getMessage() . \"\\n\";\n        return false;\n    }\n}\n\nfunction insertSampleData($conn) {\n    // Insert sample categories\n    $categories = [\n        ['Electronics', 'Electronic gadgets and devices', 'üì±'],\n        ['Clothing', 'Fashion and apparel', 'üëï'],\n        ['Home & Garden', 'Home improvement and garden items', 'üè†'],\n        ['Books', 'Books and educational materials', 'üìö'],\n        ['Sports', 'Sports and outdoor equipment', '‚öΩ'],\n        ['Beauty', 'Beauty and personal care products', 'üíÑ']\n    ];\n    \n    $stmt = $conn->prepare(\"INSERT OR IGNORE INTO categories (name, description, icon) VALUES (?, ?, ?)\");\n    foreach ($categories as $category) {\n        $stmt->execute([$category[0], $category[1], $category[2]]);\n    }\n    \n    // Create a default admin user\n    $admin_password = password_hash('admin123', PASSWORD_DEFAULT);\n    $stmt = $conn->prepare(\"INSERT OR IGNORE INTO users (username, email, password, first_name, last_name, role) VALUES (?, ?, ?, ?, ?, ?)\");\n    $stmt->execute(['admin', 'admin@orangecart.com', $admin_password, 'Admin', 'User', 'admin']);\n    \n    $admin_id = $conn->lastInsertId();\n    if ($admin_id) {\n        $stmt = $conn->prepare(\"INSERT OR IGNORE INTO user_roles (user_id, role) VALUES (?, ?)\");\n        $stmt->execute([$admin_id, 'admin']);\n    }\n    \n    echo \"Sample data inserted successfully.\\n\";\n}\n\n// Run initialization if called directly\nif (basename(__FILE__) == basename($_SERVER[\"SCRIPT_NAME\"])) {\n    initializeDatabase();\n}\n?>","size_bytes":2574},"database/init_mysql.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/database.php';\n\nfunction initializeMySQLDatabase() {\n    try {\n        // First, connect without specifying database to create it\n        $host = 'localhost';\n        $username = 'root';\n        $password = '';\n        \n        $pdo = new PDO(\"mysql:host=$host;charset=utf8mb4\", $username, $password, [\n            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,\n            PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,\n            PDO::MYSQL_ATTR_INIT_COMMAND => \"SET NAMES utf8mb4\"\n        ]);\n        \n        echo \"Connected to MySQL server successfully.\\n\";\n        \n        // Create database if it doesn't exist\n        $pdo->exec(\"CREATE DATABASE IF NOT EXISTS ecommerce_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci\");\n        echo \"Database 'ecommerce_db' created/verified successfully.\\n\";\n        \n        // Use the database\n        $pdo->exec(\"USE ecommerce_db\");\n        \n        // Read and execute the original MySQL schema\n        $schema = file_get_contents(__DIR__ . '/schema.sql');\n        \n        // Remove the first few lines that create/use database\n        $schema = preg_replace('/^-- E-commerce Database Schema\\s*\\n/', '', $schema);\n        $schema = preg_replace('/^CREATE DATABASE.*?\\n/', '', $schema);\n        $schema = preg_replace('/^USE.*?\\n/', '', $schema);\n        \n        // Add tracking_payments table to the schema\n        $schema .= \"\n\n-- Tracking payments table\nCREATE TABLE IF NOT EXISTS tracking_payments (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    user_id INT NOT NULL,\n    shipment_id INT NOT NULL,\n    tracking_level ENUM('standard', 'premium') NOT NULL,\n    amount DECIMAL(10,2) NOT NULL,\n    status ENUM('pending', 'completed', 'failed') DEFAULT 'pending',\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (user_id) REFERENCES users(id),\n    FOREIGN KEY (shipment_id) REFERENCES shipments(id)\n);\";\n        \n        // Split into individual statements and execute\n        $statements = array_filter(array_map('trim', explode(';', $schema)));\n        \n        foreach ($statements as $statement) {\n            if (!empty($statement)) {\n                $pdo->exec($statement);\n            }\n        }\n        \n        echo \"Database schema created successfully.\\n\";\n        \n        // Insert sample data\n        insertMySQLSampleData($pdo);\n        \n        return true;\n    } catch (Exception $e) {\n        echo \"Error initializing MySQL database: \" . $e->getMessage() . \"\\n\";\n        return false;\n    }\n}\n\nfunction insertMySQLSampleData($pdo) {\n    // Insert sample categories\n    $categories = [\n        ['Electronics', 'Electronic gadgets and devices'],\n        ['Clothing', 'Fashion and apparel'],\n        ['Home & Garden', 'Home improvement and garden items'],\n        ['Books', 'Books and educational materials'],\n        ['Sports', 'Sports and outdoor equipment'],\n        ['Beauty', 'Beauty and personal care products']\n    ];\n    \n    $stmt = $pdo->prepare(\"INSERT IGNORE INTO categories (name, description) VALUES (?, ?)\");\n    foreach ($categories as $category) {\n        $stmt->execute([$category[0], $category[1]]);\n    }\n    \n    // Create a default admin user\n    $admin_password = password_hash('admin123', PASSWORD_DEFAULT);\n    $stmt = $pdo->prepare(\"INSERT IGNORE INTO users (username, email, password, first_name, last_name) VALUES (?, ?, ?, ?, ?)\");\n    $stmt->execute(['admin', 'admin@marketnest.com', $admin_password, 'Admin', 'User']);\n    \n    $admin_id = $pdo->lastInsertId();\n    if ($admin_id) {\n        $stmt = $pdo->prepare(\"UPDATE users SET role = 'admin' WHERE id = ?\");\n        $stmt->execute([$admin_id]);\n        \n        $stmt = $pdo->prepare(\"INSERT IGNORE INTO user_roles (user_id, role) VALUES (?, ?)\");\n        $stmt->execute([$admin_id, 'admin']);\n    }\n    \n    echo \"Sample data inserted successfully.\\n\";\n    echo \"Admin login - Username: admin, Password: admin123\\n\";\n}\n\n// Run initialization if called directly\nif (basename(__FILE__) == basename($_SERVER[\"SCRIPT_NAME\"])) {\n    initializeMySQLDatabase();\n}\n?>","size_bytes":4073},"includes/auth.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass Auth {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function register($username, $email, $password, $first_name, $last_name, $phone = '', $address = '', $city = '', $state = '', $zip_code = '') {\n        try {\n            // Check if user already exists\n            $stmt = $this->db->prepare(\"SELECT id FROM users WHERE username = ? OR email = ?\");\n            $stmt->execute([$username, $email]);\n            \n            if ($stmt->rowCount() > 0) {\n                return ['success' => false, 'message' => 'Username or email already exists'];\n            }\n            \n            // Hash password\n            $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n            \n            // Insert user\n            $stmt = $this->db->prepare(\"\n                INSERT INTO users (username, email, password, first_name, last_name, phone, address, city, state, zip_code) \n                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n            \");\n            \n            $stmt->execute([$username, $email, $hashed_password, $first_name, $last_name, $phone, $address, $city, $state, $zip_code]);\n            $user_id = $this->db->lastInsertId();\n            \n            // Add customer role\n            $stmt = $this->db->prepare(\"INSERT INTO user_roles (user_id, role) VALUES (?, 'customer')\");\n            $stmt->execute([$user_id]);\n            \n            return ['success' => true, 'message' => 'Registration successful'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Registration failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function login($username, $password) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT u.*, ur.role \n                FROM users u \n                LEFT JOIN user_roles ur ON u.id = ur.user_id \n                WHERE u.username = ? OR u.email = ?\n            \");\n            $stmt->execute([$username, $username]);\n            \n            if ($stmt->rowCount() == 1) {\n                $user = $stmt->fetch(PDO::FETCH_ASSOC);\n                \n                if (password_verify($password, $user['password'])) {\n                    // Set session variables\n                    $_SESSION['user_id'] = $user['id'];\n                    $_SESSION['username'] = $user['username'];\n                    $_SESSION['user_role'] = $user['role'] ?? 'customer';\n                    $_SESSION['first_name'] = $user['first_name'];\n                    $_SESSION['last_name'] = $user['last_name'];\n                    \n                    return ['success' => true, 'message' => 'Login successful'];\n                }\n            }\n            \n            return ['success' => false, 'message' => 'Invalid username or password'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Login failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function logout() {\n        session_destroy();\n        return ['success' => true, 'message' => 'Logged out successfully'];\n    }\n    \n    public function get_user_info($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT u.*, ur.role \n                FROM users u \n                LEFT JOIN user_roles ur ON u.id = ur.user_id \n                WHERE u.id = ?\n            \");\n            $stmt->execute([$user_id]);\n            \n            return $stmt->fetch(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return false;\n        }\n    }\n}\n?>\n","size_bytes":3722},"includes/cart.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass CartManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function add_to_cart($user_id, $product_id, $quantity = 1) {\n        try {\n            // Check if product exists and is active\n            $stmt = $this->db->prepare(\"SELECT stock_quantity FROM products WHERE id = ? AND status = 'active'\");\n            $stmt->execute([$product_id]);\n            $product = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if (!$product) {\n                return ['success' => false, 'message' => 'Product not found'];\n            }\n            \n            // Check if item already in cart\n            $stmt = $this->db->prepare(\"SELECT quantity FROM cart WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$user_id, $product_id]);\n            $existing = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($existing) {\n                $new_quantity = $existing['quantity'] + $quantity;\n                \n                if ($new_quantity > $product['stock_quantity']) {\n                    return ['success' => false, 'message' => 'Not enough stock available'];\n                }\n                \n                $stmt = $this->db->prepare(\"UPDATE cart SET quantity = ?, updated_at = NOW() WHERE user_id = ? AND product_id = ?\");\n                $stmt->execute([$new_quantity, $user_id, $product_id]);\n            } else {\n                if ($quantity > $product['stock_quantity']) {\n                    return ['success' => false, 'message' => 'Not enough stock available'];\n                }\n                \n                $stmt = $this->db->prepare(\"INSERT INTO cart (user_id, product_id, quantity) VALUES (?, ?, ?)\");\n                $stmt->execute([$user_id, $product_id, $quantity]);\n            }\n            \n            return ['success' => true, 'message' => 'Item added to cart'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to add to cart: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_cart_items($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT c.*, p.name, p.price, p.sale_price, p.images, p.stock_quantity, v.business_name\n                FROM cart c\n                JOIN products p ON c.product_id = p.id\n                JOIN vendors v ON p.vendor_id = v.id\n                WHERE c.user_id = ? AND p.status = 'active'\n                ORDER BY c.updated_at DESC\n            \");\n            \n            $stmt->execute([$user_id]);\n            $items = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            foreach ($items as &$item) {\n                $item['images'] = json_decode($item['images'], true) ?: [];\n                $item['current_price'] = $item['sale_price'] ?: $item['price'];\n                $item['total_price'] = $item['current_price'] * $item['quantity'];\n            }\n            \n            return $items;\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function update_cart_quantity($user_id, $product_id, $quantity) {\n        try {\n            if ($quantity <= 0) {\n                return $this->remove_from_cart($user_id, $product_id);\n            }\n            \n            // Check stock\n            $stmt = $this->db->prepare(\"SELECT stock_quantity FROM products WHERE id = ?\");\n            $stmt->execute([$product_id]);\n            $product = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($quantity > $product['stock_quantity']) {\n                return ['success' => false, 'message' => 'Not enough stock available'];\n            }\n            \n            $stmt = $this->db->prepare(\"UPDATE cart SET quantity = ?, updated_at = NOW() WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$quantity, $user_id, $product_id]);\n            \n            return ['success' => true, 'message' => 'Cart updated'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to update cart: ' . $e->getMessage()];\n        }\n    }\n    \n    public function remove_from_cart($user_id, $product_id) {\n        try {\n            $stmt = $this->db->prepare(\"DELETE FROM cart WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            return ['success' => true, 'message' => 'Item removed from cart'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to remove from cart: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_cart_count($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT SUM(quantity) as total FROM cart WHERE user_id = ?\");\n            $stmt->execute([$user_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            return $result['total'] ?: 0;\n            \n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function get_cart_total($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT SUM(c.quantity * COALESCE(p.sale_price, p.price)) as total\n                FROM cart c\n                JOIN products p ON c.product_id = p.id\n                WHERE c.user_id = ? AND p.status = 'active'\n            \");\n            \n            $stmt->execute([$user_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            return $result['total'] ?: 0;\n            \n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function clear_cart($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"DELETE FROM cart WHERE user_id = ?\");\n            $stmt->execute([$user_id]);\n            \n            return ['success' => true, 'message' => 'Cart cleared'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to clear cart'];\n        }\n    }\n}\n?>\n","size_bytes":6152},"includes/order.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass OrderManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function create_order($user_id, $cart_items, $shipping_address, $billing_address, $payment_method, $coupon_code = null) {\n        try {\n            $this->db->beginTransaction();\n            \n            // Calculate totals\n            $subtotal = 0;\n            foreach ($cart_items as $item) {\n                $subtotal += $item['current_price'] * $item['quantity'];\n            }\n            \n            $discount_amount = 0;\n            $coupon_id = null;\n            \n            // Apply coupon if provided\n            if ($coupon_code) {\n                $coupon_result = $this->apply_coupon($coupon_code, $subtotal);\n                if ($coupon_result['success']) {\n                    $discount_amount = $coupon_result['discount'];\n                    $coupon_id = $coupon_result['coupon_id'];\n                }\n            }\n            \n            $tax_amount = ($subtotal - $discount_amount) * 0.08; // 8% tax\n            $shipping_amount = 0; // Free shipping\n            $total_amount = $subtotal + $tax_amount + $shipping_amount - $discount_amount;\n            \n            // Generate order number\n            $order_number = 'ORD-' . date('Y') . '-' . str_pad(rand(1, 999999), 6, '0', STR_PAD_LEFT);\n            \n            // Set payment status based on payment method\n            $payment_status = ($payment_method == 'mobile_money_cameroon') ? 'pending' : 'completed';\n            \n            // Create order\n            $stmt = $this->db->prepare(\"\n                INSERT INTO orders (user_id, order_number, total_amount, tax_amount, shipping_amount, discount_amount, shipping_address, billing_address, payment_method, payment_status) \n                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n            \");\n            \n            $stmt->execute([\n                $user_id, $order_number, $total_amount, $tax_amount, \n                $shipping_amount, $discount_amount, $shipping_address, $billing_address, $payment_method, $payment_status\n            ]);\n            \n            $order_id = $this->db->lastInsertId();\n            \n            // Create order items\n            foreach ($cart_items as $item) {\n                $stmt = $this->db->prepare(\"\n                    INSERT INTO order_items (order_id, product_id, vendor_id, quantity, price, total) \n                    VALUES (?, ?, ?, ?, ?, ?)\n                \");\n                \n                $item_total = $item['current_price'] * $item['quantity'];\n                \n                // Get vendor_id from product\n                $stmt2 = $this->db->prepare(\"SELECT vendor_id FROM products WHERE id = ?\");\n                $stmt2->execute([$item['product_id']]);\n                $vendor_id = $stmt2->fetch(PDO::FETCH_ASSOC)['vendor_id'];\n                \n                $stmt->execute([\n                    $order_id, $item['product_id'], $vendor_id, \n                    $item['quantity'], $item['current_price'], $item_total\n                ]);\n                \n                // Update product stock\n                $stmt = $this->db->prepare(\"UPDATE products SET stock_quantity = stock_quantity - ? WHERE id = ?\");\n                $stmt->execute([$item['quantity'], $item['product_id']]);\n            }\n            \n            // Create payment record\n            $stmt = $this->db->prepare(\"\n                INSERT INTO payments (order_id, user_id, amount, payment_method, status) \n                VALUES (?, ?, ?, ?, 'completed')\n            \");\n            $stmt->execute([$order_id, $user_id, $total_amount, $payment_method]);\n            \n            // Update order payment status\n            $stmt = $this->db->prepare(\"UPDATE orders SET payment_status = 'paid', status = 'processing' WHERE id = ?\");\n            $stmt->execute([$order_id]);\n            \n            // Update coupon usage if applied\n            if ($coupon_id) {\n                $stmt = $this->db->prepare(\"UPDATE coupons SET used_count = used_count + 1 WHERE id = ?\");\n                $stmt->execute([$coupon_id]);\n            }\n            \n            // Create shipment record\n            $tracking_number = 'TRK-' . date('Ymd') . '-' . str_pad(rand(1, 99999), 5, '0', STR_PAD_LEFT);\n            $stmt = $this->db->prepare(\"\n                INSERT INTO shipments (order_id, tracking_number, carrier, status) \n                VALUES (?, ?, 'Standard Shipping', 'pending')\n            \");\n            $stmt->execute([$order_id, $tracking_number]);\n            \n            $shipment_id = $this->db->lastInsertId();\n            \n            // Add initial tracking history\n            $stmt = $this->db->prepare(\"\n                INSERT INTO tracking_history (shipment_id, status, description) \n                VALUES (?, 'Order Placed', 'Your order has been placed and is being processed')\n            \");\n            $stmt->execute([$shipment_id]);\n            \n            // Clear cart\n            $stmt = $this->db->prepare(\"DELETE FROM cart WHERE user_id = ?\");\n            $stmt->execute([$user_id]);\n            \n            $this->db->commit();\n            \n            return [\n                'success' => true, \n                'message' => 'Order placed successfully',\n                'order_id' => $order_id,\n                'order_number' => $order_number,\n                'tracking_number' => $tracking_number\n            ];\n            \n        } catch (Exception $e) {\n            $this->db->rollBack();\n            return ['success' => false, 'message' => 'Order failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_order_by_id($order_id, $user_id = null) {\n        try {\n            $where_clause = \"o.id = ?\";\n            $params = [$order_id];\n            \n            if ($user_id) {\n                $where_clause .= \" AND o.user_id = ?\";\n                $params[] = $user_id;\n            }\n            \n            $stmt = $this->db->prepare(\"\n                SELECT o.*, u.first_name, u.last_name, u.email, s.tracking_number, s.status as shipment_status\n                FROM orders o\n                JOIN users u ON o.user_id = u.id\n                LEFT JOIN shipments s ON o.id = s.order_id\n                WHERE $where_clause\n            \");\n            \n            $stmt->execute($params);\n            $order = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($order) {\n                // Get order items\n                $stmt = $this->db->prepare(\"\n                    SELECT oi.*, p.name, p.images, v.business_name\n                    FROM order_items oi\n                    JOIN products p ON oi.product_id = p.id\n                    JOIN vendors v ON oi.vendor_id = v.id\n                    WHERE oi.order_id = ?\n                \");\n                $stmt->execute([$order_id]);\n                $order['items'] = $stmt->fetchAll(PDO::FETCH_ASSOC);\n                \n                // Decode images for each item\n                foreach ($order['items'] as &$item) {\n                    $item['images'] = json_decode($item['images'], true) ?: [];\n                }\n            }\n            \n            return $order;\n            \n        } catch (PDOException $e) {\n            return false;\n        }\n    }\n    \n    public function get_user_orders($user_id, $limit = 20, $offset = 0) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT o.*, s.tracking_number, s.status as shipment_status\n                FROM orders o\n                LEFT JOIN shipments s ON o.id = s.order_id\n                WHERE o.user_id = ?\n                ORDER BY o.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $stmt->execute([$user_id, $limit, $offset]);\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_vendor_orders($vendor_id, $limit = 20, $offset = 0) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT DISTINCT o.*, u.first_name, u.last_name, s.tracking_number, s.status as shipment_status\n                FROM orders o\n                JOIN order_items oi ON o.id = oi.order_id\n                JOIN users u ON o.user_id = u.id\n                LEFT JOIN shipments s ON o.id = s.order_id\n                WHERE oi.vendor_id = ?\n                ORDER BY o.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $stmt->execute([$vendor_id, $limit, $offset]);\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function update_order_status($order_id, $status) {\n        try {\n            $stmt = $this->db->prepare(\"UPDATE orders SET status = ?, updated_at = NOW() WHERE id = ?\");\n            $stmt->execute([$status, $order_id]);\n            \n            return ['success' => true, 'message' => 'Order status updated'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to update order status'];\n        }\n    }\n    \n    private function apply_coupon($coupon_code, $subtotal) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT * FROM coupons \n                WHERE code = ? AND is_active = 1 \n                AND (expires_at IS NULL OR expires_at > NOW())\n                AND (usage_limit IS NULL OR used_count < usage_limit)\n                AND minimum_amount <= ?\n            \");\n            \n            $stmt->execute([$coupon_code, $subtotal]);\n            $coupon = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if (!$coupon) {\n                return ['success' => false, 'message' => 'Invalid or expired coupon'];\n            }\n            \n            $discount = 0;\n            if ($coupon['type'] === 'percentage') {\n                $discount = ($subtotal * $coupon['value']) / 100;\n            } else {\n                $discount = $coupon['value'];\n            }\n            \n            return [\n                'success' => true,\n                'discount' => $discount,\n                'coupon_id' => $coupon['id']\n            ];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Coupon validation failed'];\n        }\n    }\n    \n    public function validate_coupon($coupon_code, $subtotal) {\n        return $this->apply_coupon($coupon_code, $subtotal);\n    }\n    \n    // Additional vendor-specific methods needed by dashboards\n    public function getVendorOrderCount($vendor_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT COUNT(DISTINCT o.id) as count \n                FROM orders o\n                JOIN order_items oi ON o.id = oi.order_id\n                WHERE oi.vendor_id = ?\n            \");\n            $stmt->execute([$vendor_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['count'];\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function getVendorEarnings($vendor_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT SUM(oi.total) as earnings \n                FROM order_items oi\n                JOIN orders o ON oi.order_id = o.id\n                WHERE oi.vendor_id = ? AND o.status != 'cancelled'\n            \");\n            $stmt->execute([$vendor_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['earnings'] ?: 0;\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function getVendorPendingOrders($vendor_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT DISTINCT o.*, u.first_name, u.last_name, s.tracking_number, s.status as shipment_status\n                FROM orders o\n                JOIN order_items oi ON o.id = oi.order_id\n                JOIN users u ON o.user_id = u.id\n                LEFT JOIN shipments s ON o.id = s.order_id\n                WHERE oi.vendor_id = ? AND o.status = 'pending'\n                ORDER BY o.created_at DESC\n            \");\n            $stmt->execute([$vendor_id]);\n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function getUserOrders($user_id, $limit = 20, $offset = 0) {\n        return $this->get_user_orders($user_id, $limit, $offset);\n    }\n    \n    public function getUserOrderCount($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT COUNT(*) as count FROM orders WHERE user_id = ?\");\n            $stmt->execute([$user_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['count'];\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function getUserTotalSpent($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT SUM(total_amount) as total FROM orders WHERE user_id = ? AND status != 'cancelled'\");\n            $stmt->execute([$user_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['total'] ?: 0;\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n}\n?>\n","size_bytes":13459},"includes/product.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass ProductManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function add_product($vendor_id, $category_id, $name, $description, $price, $sale_price, $stock_quantity, $sku, $images, $is_featured = false, $is_flash_deal = false, $flash_deal_end = null) {\n        try {\n            $stmt = $this->db->prepare(\"\n                INSERT INTO products (vendor_id, category_id, name, description, price, sale_price, stock_quantity, sku, images, is_featured, is_flash_deal, flash_deal_end) \n                VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n            \");\n            \n            $images_json = json_encode($images);\n            \n            $stmt->execute([\n                $vendor_id, $category_id, $name, $description, $price, \n                $sale_price, $stock_quantity, $sku, $images_json, \n                $is_featured, $is_flash_deal, $flash_deal_end\n            ]);\n            \n            return ['success' => true, 'message' => 'Product added successfully', 'product_id' => $this->db->lastInsertId()];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to add product: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_products($limit = 20, $offset = 0, $category_id = null, $search = null, $vendor_id = null, $featured_only = false) {\n        try {\n            $where_conditions = [\"p.status = 'active'\"];\n            $params = [];\n            \n            if ($category_id) {\n                $where_conditions[] = \"p.category_id = ?\";\n                $params[] = $category_id;\n            }\n            \n            if ($search) {\n                $where_conditions[] = \"(p.name LIKE ? OR p.description LIKE ?)\";\n                $params[] = \"%$search%\";\n                $params[] = \"%$search%\";\n            }\n            \n            if ($vendor_id) {\n                $where_conditions[] = \"p.vendor_id = ?\";\n                $params[] = $vendor_id;\n            }\n            \n            if ($featured_only) {\n                $where_conditions[] = \"p.is_featured = 1\";\n            }\n            \n            $where_clause = implode(\" AND \", $where_conditions);\n            \n            $stmt = $this->db->prepare(\"\n                SELECT p.*, c.name as category_name, v.business_name, v.is_verified, v.verification_badge,\n                       AVG(r.rating) as avg_rating, COUNT(r.id) as review_count\n                FROM products p \n                LEFT JOIN categories c ON p.category_id = c.id \n                LEFT JOIN vendors v ON p.vendor_id = v.id \n                LEFT JOIN reviews r ON p.id = r.product_id\n                WHERE $where_clause\n                GROUP BY p.id\n                ORDER BY v.is_verified DESC, p.is_featured DESC, p.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $params[] = $limit;\n            $params[] = $offset;\n            \n            $stmt->execute($params);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            // Decode images JSON for each product\n            foreach ($products as &$product) {\n                $product['images'] = $product['images'] ? json_decode($product['images'], true) ?: [] : [];\n                $product['avg_rating'] = $product['avg_rating'] ? round($product['avg_rating'], 1) : 0;\n            }\n            \n            return $products;\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_product_by_id($product_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, c.name as category_name, v.business_name, v.is_verified, v.verification_badge, v.logo_path as vendor_logo,\n                       AVG(r.rating) as avg_rating, COUNT(r.id) as review_count\n                FROM products p \n                LEFT JOIN categories c ON p.category_id = c.id \n                LEFT JOIN vendors v ON p.vendor_id = v.id \n                LEFT JOIN reviews r ON p.id = r.product_id\n                WHERE p.id = ? AND p.status = 'active'\n                GROUP BY p.id\n            \");\n            \n            $stmt->execute([$product_id]);\n            $product = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($product) {\n                $product['images'] = $product['images'] ? json_decode($product['images'], true) ?: [] : [];\n                $product['avg_rating'] = $product['avg_rating'] ? round($product['avg_rating'], 1) : 0;\n            }\n            \n            return $product;\n            \n        } catch (PDOException $e) {\n            return false;\n        }\n    }\n    \n    public function get_categories() {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT c.*, COUNT(p.id) as product_count \n                FROM categories c \n                LEFT JOIN products p ON c.id = p.category_id AND p.status = 'active'\n                GROUP BY c.id \n                ORDER BY c.name\n            \");\n            $stmt->execute();\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_flash_deals($limit = 10) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, c.name as category_name, v.business_name, v.is_verified,\n                       AVG(r.rating) as avg_rating, COUNT(r.id) as review_count\n                FROM products p \n                LEFT JOIN categories c ON p.category_id = c.id \n                LEFT JOIN vendors v ON p.vendor_id = v.id \n                LEFT JOIN reviews r ON p.id = r.product_id\n                WHERE p.is_flash_deal = 1 AND p.flash_deal_end > NOW() AND p.status = 'active'\n                GROUP BY p.id\n                ORDER BY p.flash_deal_end ASC\n                LIMIT ?\n            \");\n            \n            $stmt->execute([$limit]);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            foreach ($products as &$product) {\n                $product['images'] = json_decode($product['images'], true) ?: [];\n                $product['avg_rating'] = $product['avg_rating'] ? round($product['avg_rating'], 1) : 0;\n            }\n            \n            return $products;\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function add_to_recently_viewed($user_id, $product_id) {\n        if (!$user_id) return;\n        \n        try {\n            // Remove if already exists\n            $stmt = $this->db->prepare(\"DELETE FROM recently_viewed WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            // Add new entry\n            $stmt = $this->db->prepare(\"INSERT INTO recently_viewed (user_id, product_id) VALUES (?, ?)\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            // Keep only last 10 items\n            $stmt = $this->db->prepare(\"\n                DELETE FROM recently_viewed \n                WHERE user_id = ? AND id NOT IN (\n                    SELECT id FROM (\n                        SELECT id FROM recently_viewed \n                        WHERE user_id = ? \n                        ORDER BY viewed_at DESC \n                        LIMIT 10\n                    ) as temp\n                )\n            \");\n            $stmt->execute([$user_id, $user_id]);\n            \n        } catch (PDOException $e) {\n            // Ignore errors for recently viewed\n        }\n    }\n    \n    public function get_recently_viewed($user_id, $limit = 10) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, rv.viewed_at\n                FROM recently_viewed rv\n                JOIN products p ON rv.product_id = p.id\n                WHERE rv.user_id = ? AND p.status = 'active'\n                ORDER BY rv.viewed_at DESC\n                LIMIT ?\n            \");\n            \n            $stmt->execute([$user_id, $limit]);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            foreach ($products as &$product) {\n                $product['images'] = json_decode($product['images'], true) ?: [];\n            }\n            \n            return $products;\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function add_review($user_id, $product_id, $order_id, $rating, $title, $comment) {\n        try {\n            $stmt = $this->db->prepare(\"\n                INSERT INTO reviews (user_id, product_id, order_id, rating, title, comment) \n                VALUES (?, ?, ?, ?, ?, ?)\n            \");\n            \n            $stmt->execute([$user_id, $product_id, $order_id, $rating, $title, $comment]);\n            \n            return ['success' => true, 'message' => 'Review added successfully'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to add review: ' . $e->getMessage()];\n        }\n    }\n    \n    public function getFeaturedProducts($limit = 10) {\n        return $this->get_products($limit, 0, null, null, null, true);\n    }\n    \n    public function getCategories() {\n        return $this->get_categories();\n    }\n    \n    public function getFlashDeals($limit = 10) {\n        return $this->get_flash_deals($limit);\n    }\n    \n    public function get_product_reviews($product_id, $limit = 10, $offset = 0) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT r.*, u.first_name, u.last_name, u.username\n                FROM reviews r\n                JOIN users u ON r.user_id = u.id\n                WHERE r.product_id = ?\n                ORDER BY r.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $stmt->execute([$product_id, $limit, $offset]);\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    // Additional vendor-specific methods needed by dashboards\n    public function getVendorProducts($vendor_id, $limit = 20, $offset = 0) {\n        return $this->get_products($limit, $offset, null, null, $vendor_id);\n    }\n    \n    public function getVendorProductCount($vendor_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT COUNT(*) as count FROM products WHERE vendor_id = ? AND status = 'active'\");\n            $stmt->execute([$vendor_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['count'];\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n    \n    public function getVendorTopProducts($vendor_id, $limit = 5) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, SUM(oi.quantity) as total_sold,\n                       AVG(r.rating) as avg_rating, COUNT(r.id) as review_count\n                FROM products p\n                LEFT JOIN order_items oi ON p.id = oi.product_id\n                LEFT JOIN reviews r ON p.id = r.product_id\n                WHERE p.vendor_id = ? AND p.status = 'active'\n                GROUP BY p.id\n                ORDER BY total_sold DESC, p.created_at DESC\n                LIMIT ?\n            \");\n            $stmt->execute([$vendor_id, $limit]);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            // Decode images for each product\n            foreach ($products as &$product) {\n                $product['images'] = json_decode($product['images'], true) ?: [];\n                $product['total_sold'] = $product['total_sold'] ?: 0;\n                $product['avg_rating'] = $product['avg_rating'] ? round($product['avg_rating'], 1) : 0;\n            }\n            \n            return $products;\n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function getWishlistCount($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT COUNT(*) as count FROM wishlist WHERE user_id = ?\");\n            $stmt->execute([$user_id]);\n            $result = $stmt->fetch(PDO::FETCH_ASSOC);\n            return $result['count'];\n        } catch (PDOException $e) {\n            return 0;\n        }\n    }\n}\n?>\n","size_bytes":12400},"includes/tracking.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass TrackingManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function get_shipment_by_tracking($tracking_number, $user_id = null) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT s.*, o.order_number, o.user_id, o.total_amount,\n                       u.first_name, u.last_name, u.free_trackings_used\n                FROM shipments s\n                JOIN orders o ON s.order_id = o.id\n                JOIN users u ON o.user_id = u.id\n                WHERE s.tracking_number = ?\n            \");\n            \n            $stmt->execute([$tracking_number]);\n            $shipment = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($shipment) {\n                // Get tracking history\n                $stmt = $this->db->prepare(\"\n                    SELECT * FROM tracking_history \n                    WHERE shipment_id = ? \n                    ORDER BY timestamp ASC\n                \");\n                $stmt->execute([$shipment['id']]);\n                $shipment['history'] = $stmt->fetchAll(PDO::FETCH_ASSOC);\n                \n                // Determine tracking level based on user and payment\n                $shipment['tracking_level'] = $this->get_tracking_level($shipment, $user_id);\n            }\n            \n            return $shipment;\n            \n        } catch (PDOException $e) {\n            return false;\n        }\n    }\n    \n    public function get_tracking_level($shipment, $user_id = null) {\n        // If user is not logged in, only basic tracking\n        if (!$user_id) {\n            return 'basic';\n        }\n        \n        // If it's the shipment owner, check their free tracking usage\n        if ($user_id == $shipment['user_id']) {\n            if ($shipment['free_trackings_used'] < FREE_TRACKING_LIMIT) {\n                return 'basic';\n            }\n        }\n        \n        // Check if user has paid for advanced tracking for this shipment\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT tracking_level FROM tracking_payments \n                WHERE user_id = ? AND shipment_id = ? AND status = 'completed'\n                ORDER BY created_at DESC LIMIT 1\n            \");\n            $stmt->execute([$user_id, $shipment['id']]);\n            $payment = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if ($payment) {\n                return $payment['tracking_level'];\n            }\n            \n            return 'basic';\n            \n        } catch (PDOException $e) {\n            return 'basic';\n        }\n    }\n    \n    public function increment_free_tracking_usage($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                UPDATE users \n                SET free_trackings_used = free_trackings_used + 1 \n                WHERE id = ?\n            \");\n            $stmt->execute([$user_id]);\n            \n        } catch (PDOException $e) {\n            // Ignore errors\n        }\n    }\n    \n    public function purchase_advanced_tracking($user_id, $shipment_id, $tracking_level, $amount) {\n        try {\n            $this->db->beginTransaction();\n            \n            // Create tracking payment record\n            $stmt = $this->db->prepare(\"\n                INSERT INTO tracking_payments (user_id, shipment_id, tracking_level, amount, status) \n                VALUES (?, ?, ?, ?, 'completed')\n            \");\n            $stmt->execute([$user_id, $shipment_id, $tracking_level, $amount]);\n            \n            $this->db->commit();\n            \n            return ['success' => true, 'message' => 'Advanced tracking purchased successfully'];\n            \n        } catch (Exception $e) {\n            $this->db->rollBack();\n            return ['success' => false, 'message' => 'Payment failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function update_shipment_status($shipment_id, $status, $location = null, $description = null) {\n        try {\n            $this->db->beginTransaction();\n            \n            // Update shipment (compatible with both MySQL and SQLite)\n            $stmt = $this->db->prepare(\"\n                UPDATE shipments \n                SET status = ?, current_location = ?, updated_at = CURRENT_TIMESTAMP \n                WHERE id = ?\n            \");\n            $stmt->execute([$status, $location, $shipment_id]);\n            \n            // Add tracking history\n            $stmt = $this->db->prepare(\"\n                INSERT INTO tracking_history (shipment_id, status, location, description) \n                VALUES (?, ?, ?, ?)\n            \");\n            $stmt->execute([$shipment_id, $status, $location, $description]);\n            \n            // Update order status if delivered\n            if ($status === 'delivered') {\n                $stmt = $this->db->prepare(\"\n                    UPDATE orders o\n                    JOIN shipments s ON o.id = s.order_id\n                    SET o.status = 'delivered'\n                    WHERE s.id = ?\n                \");\n                $stmt->execute([$shipment_id]);\n                \n                $stmt = $this->db->prepare(\"\n                    UPDATE shipments \n                    SET delivered_at = CURRENT_TIMESTAMP \n                    WHERE id = ?\n                \");\n                $stmt->execute([$shipment_id]);\n            }\n            \n            $this->db->commit();\n            \n            return ['success' => true, 'message' => 'Shipment status updated'];\n            \n        } catch (Exception $e) {\n            $this->db->rollBack();\n            return ['success' => false, 'message' => 'Update failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_all_shipments($limit = 50, $offset = 0) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT s.*, o.order_number, u.first_name, u.last_name\n                FROM shipments s\n                JOIN orders o ON s.order_id = o.id\n                JOIN users u ON o.user_id = u.id\n                ORDER BY s.created_at DESC\n                LIMIT ? OFFSET ?\n            \");\n            \n            $stmt->execute([$limit, $offset]);\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_tracking_progress_percentage($status) {\n        $progress_map = [\n            'pending' => 10,\n            'picked_up' => 25,\n            'in_transit' => 50,\n            'out_for_delivery' => 75,\n            'delivered' => 100\n        ];\n        \n        return $progress_map[$status] ?? 0;\n    }\n}\n\n// Note: tracking_payments table should be created through the main schema initialization\n?>\n","size_bytes":6847},"includes/vendor.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass VendorManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function submit_application($name, $email, $business_name, $description, $logo_path = null) {\n        try {\n            // Check if email already has an application\n            $stmt = $this->db->prepare(\"SELECT id FROM vendor_applications WHERE email = ? AND status = 'pending'\");\n            $stmt->execute([$email]);\n            \n            if ($stmt->rowCount() > 0) {\n                return ['success' => false, 'message' => 'You already have a pending application'];\n            }\n            \n            // Check if email is already a vendor\n            $stmt = $this->db->prepare(\"\n                SELECT v.id FROM vendors v \n                JOIN users u ON v.user_id = u.id \n                WHERE u.email = ?\n            \");\n            $stmt->execute([$email]);\n            \n            if ($stmt->rowCount() > 0) {\n                return ['success' => false, 'message' => 'This email is already associated with a vendor account'];\n            }\n            \n            // Insert application\n            $stmt = $this->db->prepare(\"\n                INSERT INTO vendor_applications (name, email, business_name, description, logo_path) \n                VALUES (?, ?, ?, ?, ?)\n            \");\n            \n            $stmt->execute([$name, $email, $business_name, $description, $logo_path]);\n            \n            return ['success' => true, 'message' => 'Application submitted successfully! We will review it within 24-48 hours.'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Application failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_pending_applications() {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT * FROM vendor_applications \n                WHERE status = 'pending' \n                ORDER BY applied_at DESC\n            \");\n            $stmt->execute();\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function get_all_applications() {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT va.*, u.username as reviewed_by_username \n                FROM vendor_applications va \n                LEFT JOIN users u ON va.reviewed_by = u.id \n                ORDER BY va.applied_at DESC\n            \");\n            $stmt->execute();\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function approve_application($application_id, $admin_id) {\n        try {\n            $this->db->beginTransaction();\n            \n            // Get application details\n            $stmt = $this->db->prepare(\"SELECT * FROM vendor_applications WHERE id = ?\");\n            $stmt->execute([$application_id]);\n            $application = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            if (!$application) {\n                throw new Exception('Application not found');\n            }\n            \n            // Create user account for vendor\n            $username = strtolower(str_replace(' ', '_', $application['business_name'])) . '_' . rand(1000, 9999);\n            $temp_password = 'temp_' . rand(100000, 999999);\n            $hashed_password = password_hash($temp_password, PASSWORD_DEFAULT);\n            \n            $stmt = $this->db->prepare(\"\n                INSERT INTO users (username, email, password, first_name, last_name) \n                VALUES (?, ?, ?, ?, ?)\n            \");\n            $stmt->execute([\n                $username, \n                $application['email'], \n                $hashed_password, \n                $application['name'], \n                'Vendor'\n            ]);\n            \n            $user_id = $this->db->lastInsertId();\n            \n            // Add vendor role\n            $stmt = $this->db->prepare(\"INSERT INTO user_roles (user_id, role) VALUES (?, 'vendor')\");\n            $stmt->execute([$user_id]);\n            \n            // Create vendor record\n            $stmt = $this->db->prepare(\"\n                INSERT INTO vendors (user_id, business_name, description, logo_path) \n                VALUES (?, ?, ?, ?)\n            \");\n            $stmt->execute([\n                $user_id, \n                $application['business_name'], \n                $application['description'], \n                $application['logo_path']\n            ]);\n            \n            // Update application status\n            $stmt = $this->db->prepare(\"\n                UPDATE vendor_applications \n                SET status = 'approved', reviewed_at = NOW(), reviewed_by = ? \n                WHERE id = ?\n            \");\n            $stmt->execute([$admin_id, $application_id]);\n            \n            // Send notification to vendor\n            $this->send_notification($user_id, 'vendor_approved', 'Vendor Application Approved', \n                \"Congratulations! Your vendor application has been approved. Your login credentials: Username: {$username}, Temporary Password: {$temp_password}. Please change your password after first login.\");\n            \n            $this->db->commit();\n            \n            return ['success' => true, 'message' => 'Vendor application approved successfully', 'credentials' => ['username' => $username, 'password' => $temp_password]];\n            \n        } catch (Exception $e) {\n            $this->db->rollBack();\n            return ['success' => false, 'message' => 'Approval failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function reject_application($application_id, $admin_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                UPDATE vendor_applications \n                SET status = 'rejected', reviewed_at = NOW(), reviewed_by = ? \n                WHERE id = ?\n            \");\n            $stmt->execute([$admin_id, $application_id]);\n            \n            return ['success' => true, 'message' => 'Application rejected'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Rejection failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function assign_badge($vendor_id, $badge_name) {\n        try {\n            $stmt = $this->db->prepare(\"\n                UPDATE vendors \n                SET verification_badge = ?, is_verified = TRUE \n                WHERE id = ?\n            \");\n            $stmt->execute([$badge_name, $vendor_id]);\n            \n            return ['success' => true, 'message' => 'Badge assigned successfully'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Badge assignment failed: ' . $e->getMessage()];\n        }\n    }\n    \n    public function get_all_vendors() {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT v.*, u.username, u.email, u.first_name, u.last_name \n                FROM vendors v \n                JOIN users u ON v.user_id = u.id \n                ORDER BY v.is_verified DESC, v.created_at DESC\n            \");\n            $stmt->execute();\n            \n            return $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    private function send_notification($user_id, $type, $title, $message) {\n        try {\n            $stmt = $this->db->prepare(\"\n                INSERT INTO notifications (user_id, type, title, message) \n                VALUES (?, ?, ?, ?)\n            \");\n            $stmt->execute([$user_id, $type, $title, $message]);\n            \n        } catch (PDOException $e) {\n            // Log error but don't fail the main operation\n            error_log(\"Notification failed: \" . $e->getMessage());\n        }\n    }\n}\n?>\n","size_bytes":8062},"includes/wishlist.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass WishlistManager {\n    private $db;\n    \n    public function __construct() {\n        $database = new Database();\n        $this->db = $database->getConnection();\n    }\n    \n    public function add_to_wishlist($user_id, $product_id) {\n        try {\n            // Use INSERT OR IGNORE for SQLite compatibility, but will work with MySQL too\n            $stmt = $this->db->prepare(\"INSERT OR IGNORE INTO wishlist (user_id, product_id) VALUES (?, ?)\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            return ['success' => true, 'message' => 'Added to wishlist'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to add to wishlist'];\n        }\n    }\n    \n    public function remove_from_wishlist($user_id, $product_id) {\n        try {\n            $stmt = $this->db->prepare(\"DELETE FROM wishlist WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            return ['success' => true, 'message' => 'Removed from wishlist'];\n            \n        } catch (PDOException $e) {\n            return ['success' => false, 'message' => 'Failed to remove from wishlist'];\n        }\n    }\n    \n    public function get_wishlist($user_id) {\n        try {\n            $stmt = $this->db->prepare(\"\n                SELECT p.*, w.created_at as added_at\n                FROM wishlist w\n                JOIN products p ON w.product_id = p.id\n                WHERE w.user_id = ? AND p.status = 'active'\n                ORDER BY w.created_at DESC\n            \");\n            \n            $stmt->execute([$user_id]);\n            $products = $stmt->fetchAll(PDO::FETCH_ASSOC);\n            \n            foreach ($products as &$product) {\n                $product['images'] = $product['images'] ? json_decode($product['images'], true) ?: [] : [];\n            }\n            \n            return $products;\n            \n        } catch (PDOException $e) {\n            return [];\n        }\n    }\n    \n    public function is_in_wishlist($user_id, $product_id) {\n        try {\n            $stmt = $this->db->prepare(\"SELECT id FROM wishlist WHERE user_id = ? AND product_id = ?\");\n            $stmt->execute([$user_id, $product_id]);\n            \n            return $stmt->rowCount() > 0;\n            \n        } catch (PDOException $e) {\n            return false;\n        }\n    }\n}\n?>\n","size_bytes":2455},"user/dashboard.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/auth.php';\nrequire_once '../includes/order.php';\nrequire_once '../includes/product.php';\n\n// Check if user is logged in\nif (!isLoggedIn()) {\n    header('Location: ../login.php');\n    exit();\n}\n\n$user = getCurrentUser();\nif ($user['role'] !== 'customer') {\n    header('Location: ../index.php');\n    exit();\n}\n\n$orderManager = new OrderManager();\n$productManager = new ProductManager();\n\n// Get user statistics\n$recentOrders = $orderManager->getUserOrders($user['id'], 5);\n$totalOrders = $orderManager->getUserOrderCount($user['id']);\n$totalSpent = $orderManager->getUserTotalSpent($user['id']);\n$wishlistCount = $productManager->getWishlistCount($user['id']);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>My Dashboard - E-Commerce</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#f97316',\n                        secondary: '#fb923c'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between h-16\">\n                <div class=\"flex items-center\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-primary\">E-Commerce</a>\n                </div>\n                <div class=\"flex items-center space-x-4\">\n                    <span class=\"text-gray-700\">Welcome, <?php echo htmlspecialchars($user['first_name']); ?>!</span>\n                    <a href=\"../logout.php\" class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition\">Logout</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <!-- Dashboard Header -->\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">My Dashboard</h1>\n            <p class=\"text-gray-600 mt-2\">Manage your orders, profile, and preferences</p>\n        </div>\n\n        <!-- Stats Cards -->\n        <div class=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-primary/10 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $totalOrders; ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-green-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Spent</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\">$<?php echo number_format($totalSpent, 2); ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-red-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Wishlist Items</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $wishlistCount; ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-blue-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Addresses</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\">2</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <!-- Recent Orders -->\n            <div class=\"lg:col-span-2\">\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Recent Orders</h2>\n                    </div>\n                    <div class=\"p-6\">\n                        <?php if (empty($recentOrders)): ?>\n                            <p class=\"text-gray-500 text-center py-8\">No orders yet. <a href=\"../products.php\" class=\"text-primary hover:underline\">Start shopping!</a></p>\n                        <?php else: ?>\n                            <div class=\"space-y-4\">\n                                <?php foreach ($recentOrders as $order): ?>\n                                    <div class=\"border border-gray-200 rounded-lg p-4\">\n                                        <div class=\"flex justify-between items-start\">\n                                            <div>\n                                                <p class=\"font-semibold text-gray-900\">Order #<?php echo $order['order_number']; ?></p>\n                                                <p class=\"text-sm text-gray-600\"><?php echo date('M j, Y', strtotime($order['created_at'])); ?></p>\n                                                <p class=\"text-sm text-gray-600\"><?php echo $order['item_count']; ?> items</p>\n                                            </div>\n                                            <div class=\"text-right\">\n                                                <p class=\"font-semibold text-gray-900\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                                                <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \n                                                    <?php echo $order['status'] === 'delivered' ? 'bg-green-100 text-green-800' : \n                                                        ($order['status'] === 'shipped' ? 'bg-blue-100 text-blue-800' : \n                                                        ($order['status'] === 'processing' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800')); ?>\">\n                                                    <?php echo ucfirst($order['status']); ?>\n                                                </span>\n                                            </div>\n                                        </div>\n                                        <div class=\"mt-3 flex space-x-3\">\n                                            <a href=\"../order-detail.php?id=<?php echo $order['id']; ?>\" class=\"text-primary hover:underline text-sm\">View Details</a>\n                                            <?php if ($order['tracking_number']): ?>\n                                                <a href=\"../track.php?tracking=<?php echo $order['tracking_number']; ?>\" class=\"text-primary hover:underline text-sm\">Track Package</a>\n                                            <?php endif; ?>\n                                        </div>\n                                    </div>\n                                <?php endforeach; ?>\n                            </div>\n                            <div class=\"mt-6 text-center\">\n                                <a href=\"../order-history.php\" class=\"text-primary hover:underline\">View All Orders</a>\n                            </div>\n                        <?php endif; ?>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Quick Actions -->\n            <div class=\"space-y-6\">\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Quick Actions</h2>\n                    </div>\n                    <div class=\"p-6 space-y-4\">\n                        <a href=\"../products.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">Browse Products</span>\n                        </a>\n                        \n                        <a href=\"../cart.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v5a2 2 0 01-2 2H9a2 2 0 01-2-2v-5m6-5V6a2 2 0 00-2-2H9a2 2 0 00-2 2v3\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">View Cart</span>\n                        </a>\n                        \n                        <a href=\"wishlist.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">My Wishlist</span>\n                        </a>\n                        \n                        <a href=\"profile.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">Edit Profile</span>\n                        </a>\n                        \n                        <a href=\"../track.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">Track Shipment</span>\n                        </a>\n                    </div>\n                </div>\n\n                <!-- Account Info -->\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Account Info</h2>\n                    </div>\n                    <div class=\"p-6\">\n                        <div class=\"space-y-3\">\n                            <div>\n                                <p class=\"text-sm text-gray-600\">Name</p>\n                                <p class=\"font-medium\"><?php echo htmlspecialchars($user['first_name'] . ' ' . $user['last_name']); ?></p>\n                            </div>\n                            <div>\n                                <p class=\"text-sm text-gray-600\">Email</p>\n                                <p class=\"font-medium\"><?php echo htmlspecialchars($user['email']); ?></p>\n                            </div>\n                            <div>\n                                <p class=\"text-sm text-gray-600\">Member Since</p>\n                                <p class=\"font-medium\"><?php echo date('M Y', strtotime($user['created_at'])); ?></p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":14384},"vendor/add-product.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/auth.php';\nrequire_once '../includes/product.php';\n\n// Check if user is logged in and is a vendor\nif (!isLoggedIn()) {\n    header('Location: ../login.php');\n    exit();\n}\n\n$user = getCurrentUser();\nif ($user['role'] !== 'vendor') {\n    header('Location: ../index.php');\n    exit();\n}\n\n$productManager = new ProductManager();\n$categories = $productManager->getCategories();\n\n$success = false;\n$error = '';\n\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    $name = trim($_POST['name']);\n    $description = trim($_POST['description']);\n    $price = floatval($_POST['price']);\n    $category_id = intval($_POST['category_id']);\n    $stock_quantity = intval($_POST['stock_quantity']);\n    $sku = trim($_POST['sku']);\n    $weight = floatval($_POST['weight']);\n    $dimensions = trim($_POST['dimensions']);\n    \n    // Handle image upload\n    $image_url = '';\n    if (isset($_FILES['image']) && $_FILES['image']['error'] === UPLOAD_ERR_OK) {\n        $upload_dir = '../uploads/products/';\n        if (!file_exists($upload_dir)) {\n            mkdir($upload_dir, 0777, true);\n        }\n        \n        $file_extension = pathinfo($_FILES['image']['name'], PATHINFO_EXTENSION);\n        $filename = uniqid() . '.' . $file_extension;\n        $upload_path = $upload_dir . $filename;\n        \n        if (move_uploaded_file($_FILES['image']['tmp_name'], $upload_path)) {\n            $image_url = 'uploads/products/' . $filename;\n        }\n    }\n    \n    if ($name && $description && $price > 0 && $category_id && $stock_quantity >= 0) {\n        $product_id = $productManager->addProduct([\n            'vendor_id' => $user['id'],\n            'name' => $name,\n            'description' => $description,\n            'price' => $price,\n            'category_id' => $category_id,\n            'stock_quantity' => $stock_quantity,\n            'sku' => $sku,\n            'weight' => $weight,\n            'dimensions' => $dimensions,\n            'image_url' => $image_url,\n            'status' => 'active'\n        ]);\n        \n        if ($product_id) {\n            $success = true;\n        } else {\n            $error = 'Failed to add product. Please try again.';\n        }\n    } else {\n        $error = 'Please fill in all required fields.';\n    }\n}\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Add Product - Vendor Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#f97316',\n                        secondary: '#fb923c'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-primary\">E-Commerce</a>\n                    <span class=\"text-gray-400\">|</span>\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-primary\">Vendor</a>\n                    <span class=\"text-gray-400\">></span>\n                    <span class=\"text-gray-700 font-medium\">Add Product</span>\n                </div>\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-primary\">Dashboard</a>\n                    <a href=\"../logout.php\" class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition\">Logout</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Add New Product</h1>\n            <p class=\"text-gray-600 mt-2\">Create a new product listing for your store</p>\n        </div>\n\n        <?php if ($success): ?>\n            <div class=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6\">\n                Product added successfully! <a href=\"products.php\" class=\"underline\">View your products</a>\n            </div>\n        <?php endif; ?>\n\n        <?php if ($error): ?>\n            <div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6\">\n                <?php echo htmlspecialchars($error); ?>\n            </div>\n        <?php endif; ?>\n\n        <div class=\"bg-white rounded-lg shadow\">\n            <form method=\"POST\" enctype=\"multipart/form-data\" class=\"p-6 space-y-6\">\n                <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                        <label for=\"name\" class=\"block text-sm font-medium text-gray-700 mb-2\">Product Name *</label>\n                        <input type=\"text\" id=\"name\" name=\"name\" required \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['name'] ?? ''); ?>\">\n                    </div>\n\n                    <div>\n                        <label for=\"sku\" class=\"block text-sm font-medium text-gray-700 mb-2\">SKU</label>\n                        <input type=\"text\" id=\"sku\" name=\"sku\" \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['sku'] ?? ''); ?>\">\n                    </div>\n                </div>\n\n                <div>\n                    <label for=\"description\" class=\"block text-sm font-medium text-gray-700 mb-2\">Description *</label>\n                    <textarea id=\"description\" name=\"description\" rows=\"4\" required \n                              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"><?php echo htmlspecialchars($_POST['description'] ?? ''); ?></textarea>\n                </div>\n\n                <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div>\n                        <label for=\"price\" class=\"block text-sm font-medium text-gray-700 mb-2\">Price ($) *</label>\n                        <input type=\"number\" id=\"price\" name=\"price\" step=\"0.01\" min=\"0\" required \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['price'] ?? ''); ?>\">\n                    </div>\n\n                    <div>\n                        <label for=\"category_id\" class=\"block text-sm font-medium text-gray-700 mb-2\">Category *</label>\n                        <select id=\"category_id\" name=\"category_id\" required \n                                class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                            <option value=\"\">Select Category</option>\n                            <?php foreach ($categories as $category): ?>\n                                <option value=\"<?php echo $category['id']; ?>\" \n                                        <?php echo ($_POST['category_id'] ?? '') == $category['id'] ? 'selected' : ''; ?>>\n                                    <?php echo htmlspecialchars($category['name']); ?>\n                                </option>\n                            <?php endforeach; ?>\n                        </select>\n                    </div>\n\n                    <div>\n                        <label for=\"stock_quantity\" class=\"block text-sm font-medium text-gray-700 mb-2\">Stock Quantity *</label>\n                        <input type=\"number\" id=\"stock_quantity\" name=\"stock_quantity\" min=\"0\" required \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['stock_quantity'] ?? ''); ?>\">\n                    </div>\n                </div>\n\n                <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                        <label for=\"weight\" class=\"block text-sm font-medium text-gray-700 mb-2\">Weight (lbs)</label>\n                        <input type=\"number\" id=\"weight\" name=\"weight\" step=\"0.01\" min=\"0\" \n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['weight'] ?? ''); ?>\">\n                    </div>\n\n                    <div>\n                        <label for=\"dimensions\" class=\"block text-sm font-medium text-gray-700 mb-2\">Dimensions (L x W x H)</label>\n                        <input type=\"text\" id=\"dimensions\" name=\"dimensions\" placeholder=\"e.g., 10 x 8 x 6 inches\"\n                               class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\"\n                               value=\"<?php echo htmlspecialchars($_POST['dimensions'] ?? ''); ?>\">\n                    </div>\n                </div>\n\n                <div>\n                    <label for=\"image\" class=\"block text-sm font-medium text-gray-700 mb-2\">Product Image</label>\n                    <input type=\"file\" id=\"image\" name=\"image\" accept=\"image/*\" \n                           class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent\">\n                    <p class=\"text-sm text-gray-500 mt-1\">Upload a high-quality image of your product (JPG, PNG, GIF)</p>\n                </div>\n\n                <div class=\"flex justify-end space-x-4\">\n                    <a href=\"dashboard.php\" class=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition\">\n                        Cancel\n                    </a>\n                    <button type=\"submit\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition\">\n                        Add Product\n                    </button>\n                </div>\n            </form>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":10593},"vendor/dashboard.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/auth.php';\nrequire_once '../includes/product.php';\nrequire_once '../includes/order.php';\n\n// Check if user is logged in and is a vendor\nif (!isLoggedIn()) {\n    header('Location: ../login.php');\n    exit();\n}\n\n$user = getCurrentUser();\nif ($user['role'] !== 'vendor') {\n    header('Location: ../index.php');\n    exit();\n}\n\n$productManager = new ProductManager();\n$orderManager = new OrderManager();\n\n// Get vendor statistics\n$totalProducts = $productManager->getVendorProductCount($user['id']);\n$totalOrders = $orderManager->getVendorOrderCount($user['id']);\n$totalEarnings = $orderManager->getVendorEarnings($user['id']);\n$pendingOrders = $orderManager->getVendorPendingOrders($user['id']);\n$recentOrders = $orderManager->getVendorOrders($user['id'], 5);\n$topProducts = $productManager->getVendorTopProducts($user['id'], 5);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Vendor Dashboard - E-Commerce</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#f97316',\n                        secondary: '#fb923c'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between h-16\">\n                <div class=\"flex items-center\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-primary\">E-Commerce</a>\n                    <span class=\"ml-4 px-3 py-1 bg-primary/10 text-primary text-sm font-medium rounded-full\">Vendor</span>\n                </div>\n                <div class=\"flex items-center space-x-4\">\n                    <span class=\"text-gray-700\">Welcome, <?php echo htmlspecialchars($user['first_name']); ?>!</span>\n                    <a href=\"../logout.php\" class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition\">Logout</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <!-- Dashboard Header -->\n        <div class=\"mb-8\">\n            <h1 class=\"text-3xl font-bold text-gray-900\">Vendor Dashboard</h1>\n            <p class=\"text-gray-600 mt-2\">Manage your products, orders, and business analytics</p>\n        </div>\n\n        <!-- Stats Cards -->\n        <div class=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-primary/10 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-primary\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Products</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $totalProducts; ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-blue-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo $totalOrders; ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-green-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Total Earnings</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\">$<?php echo number_format($totalEarnings, 2); ?></p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"bg-white rounded-lg shadow p-6\">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 bg-yellow-100 rounded-lg\">\n                        <svg class=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                        </svg>\n                    </div>\n                    <div class=\"ml-4\">\n                        <p class=\"text-sm font-medium text-gray-600\">Pending Orders</p>\n                        <p class=\"text-2xl font-semibold text-gray-900\"><?php echo count($pendingOrders); ?></p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n            <!-- Recent Orders -->\n            <div class=\"lg:col-span-2 space-y-6\">\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Recent Orders</h2>\n                        <a href=\"orders.php\" class=\"text-primary hover:underline text-sm\">View All</a>\n                    </div>\n                    <div class=\"p-6\">\n                        <?php if (empty($recentOrders)): ?>\n                            <p class=\"text-gray-500 text-center py-8\">No orders yet.</p>\n                        <?php else: ?>\n                            <div class=\"space-y-4\">\n                                <?php foreach ($recentOrders as $order): ?>\n                                    <div class=\"border border-gray-200 rounded-lg p-4\">\n                                        <div class=\"flex justify-between items-start\">\n                                            <div>\n                                                <p class=\"font-semibold text-gray-900\">Order #<?php echo $order['order_number']; ?></p>\n                                                <p class=\"text-sm text-gray-600\">Customer: <?php echo htmlspecialchars($order['customer_name']); ?></p>\n                                                <p class=\"text-sm text-gray-600\"><?php echo date('M j, Y', strtotime($order['created_at'])); ?></p>\n                                            </div>\n                                            <div class=\"text-right\">\n                                                <p class=\"font-semibold text-gray-900\">$<?php echo number_format($order['total_amount'], 2); ?></p>\n                                                <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \n                                                    <?php echo $order['status'] === 'delivered' ? 'bg-green-100 text-green-800' : \n                                                        ($order['status'] === 'shipped' ? 'bg-blue-100 text-blue-800' : \n                                                        ($order['status'] === 'processing' ? 'bg-yellow-100 text-yellow-800' : 'bg-gray-100 text-gray-800')); ?>\">\n                                                    <?php echo ucfirst($order['status']); ?>\n                                                </span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                <?php endforeach; ?>\n                            </div>\n                        <?php endif; ?>\n                    </div>\n                </div>\n\n                <!-- Top Products -->\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Top Selling Products</h2>\n                    </div>\n                    <div class=\"p-6\">\n                        <?php if (empty($topProducts)): ?>\n                            <p class=\"text-gray-500 text-center py-8\">No sales data yet.</p>\n                        <?php else: ?>\n                            <div class=\"space-y-4\">\n                                <?php foreach ($topProducts as $product): ?>\n                                    <div class=\"flex items-center space-x-4\">\n                                        <img src=\"<?php echo htmlspecialchars($product['image_url'] ?: '/placeholder.svg?height=50&width=50'); ?>\" \n                                             alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                                             class=\"w-12 h-12 object-cover rounded-lg\">\n                                        <div class=\"flex-1\">\n                                            <p class=\"font-medium text-gray-900\"><?php echo htmlspecialchars($product['name']); ?></p>\n                                            <p class=\"text-sm text-gray-600\"><?php echo $product['sales_count']; ?> sold</p>\n                                        </div>\n                                        <p class=\"font-semibold text-gray-900\">$<?php echo number_format($product['price'], 2); ?></p>\n                                    </div>\n                                <?php endforeach; ?>\n                            </div>\n                        <?php endif; ?>\n                    </div>\n                </div>\n            </div>\n\n            <!-- Quick Actions & Analytics -->\n            <div class=\"space-y-6\">\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Quick Actions</h2>\n                    </div>\n                    <div class=\"p-6 space-y-4\">\n                        <a href=\"add-product.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">Add New Product</span>\n                        </a>\n                        \n                        <a href=\"products.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">Manage Products</span>\n                        </a>\n                        \n                        <a href=\"orders.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">View Orders</span>\n                        </a>\n                        \n                        <a href=\"analytics.php\" class=\"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition\">\n                            <svg class=\"w-5 h-5 text-primary mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n                            </svg>\n                            <span class=\"text-gray-700\">View Analytics</span>\n                        </a>\n                    </div>\n                </div>\n\n                <!-- Earnings Chart -->\n                <div class=\"bg-white rounded-lg shadow\">\n                    <div class=\"px-6 py-4 border-b border-gray-200\">\n                        <h2 class=\"text-lg font-semibold text-gray-900\">Monthly Earnings</h2>\n                    </div>\n                    <div class=\"p-6\">\n                        <canvas id=\"earningsChart\" width=\"400\" height=\"200\"></canvas>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        // Sample earnings chart\n        const ctx = document.getElementById('earningsChart').getContext('2d');\n        new Chart(ctx, {\n            type: 'line',\n            data: {\n                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],\n                datasets: [{\n                    label: 'Earnings ($)',\n                    data: [1200, 1900, 3000, 2500, 2200, 3000],\n                    borderColor: '#f97316',\n                    backgroundColor: 'rgba(249, 115, 22, 0.1)',\n                    tension: 0.4\n                }]\n            },\n            options: {\n                responsive: true,\n                plugins: {\n                    legend: {\n                        display: false\n                    }\n                },\n                scales: {\n                    y: {\n                        beginAtZero: true\n                    }\n                }\n            }\n        });\n    </script>\n</body>\n</html>\n","size_bytes":15124},"vendor/products.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../includes/auth.php';\nrequire_once '../includes/product.php';\n\n// Check if user is logged in and is a vendor\nif (!isLoggedIn()) {\n    header('Location: ../login.php');\n    exit();\n}\n\n$user = getCurrentUser();\nif ($user['role'] !== 'vendor') {\n    header('Location: ../index.php');\n    exit();\n}\n\n$productManager = new ProductManager();\n\n// Handle product actions\nif ($_POST['action'] ?? '' === 'update_status') {\n    $product_id = $_POST['product_id'];\n    $status = $_POST['status'];\n    \n    $productManager->updateProductStatus($product_id, $status, $user['id']);\n    header('Location: products.php?updated=1');\n    exit();\n}\n\n// Get vendor's products\n$products = $productManager->getVendorProducts($user['id']);\n?>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>My Products - Vendor Dashboard</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <script>\n        tailwind.config = {\n            theme: {\n                extend: {\n                    colors: {\n                        primary: '#f97316',\n                        secondary: '#fb923c'\n                    }\n                }\n            }\n        }\n    </script>\n</head>\n<body class=\"bg-gray-50\">\n    <!-- Navigation -->\n    <nav class=\"bg-white shadow-sm border-b\">\n        <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div class=\"flex justify-between h-16\">\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"../index.php\" class=\"text-2xl font-bold text-primary\">E-Commerce</a>\n                    <span class=\"text-gray-400\">|</span>\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-primary\">Vendor</a>\n                    <span class=\"text-gray-400\">></span>\n                    <span class=\"text-gray-700 font-medium\">Products</span>\n                </div>\n                <div class=\"flex items-center space-x-4\">\n                    <a href=\"dashboard.php\" class=\"text-gray-700 hover:text-primary\">Dashboard</a>\n                    <a href=\"../logout.php\" class=\"bg-primary text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition\">Logout</a>\n                </div>\n            </div>\n        </div>\n    </nav>\n\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div class=\"flex justify-between items-center mb-8\">\n            <div>\n                <h1 class=\"text-3xl font-bold text-gray-900\">My Products</h1>\n                <p class=\"text-gray-600 mt-2\">Manage your product listings</p>\n            </div>\n            <a href=\"add-product.php\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition\">\n                Add New Product\n            </a>\n        </div>\n\n        <?php if (isset($_GET['updated'])): ?>\n            <div class=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-6\">\n                Product updated successfully!\n            </div>\n        <?php endif; ?>\n\n        <div class=\"bg-white rounded-lg shadow overflow-hidden\">\n            <?php if (empty($products)): ?>\n                <div class=\"text-center py-12\">\n                    <svg class=\"w-16 h-16 text-gray-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"></path>\n                    </svg>\n                    <h3 class=\"text-lg font-medium text-gray-900 mb-2\">No products yet</h3>\n                    <p class=\"text-gray-600 mb-4\">Start by adding your first product to your store.</p>\n                    <a href=\"add-product.php\" class=\"bg-primary text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition\">\n                        Add Your First Product\n                    </a>\n                </div>\n            <?php else: ?>\n                <div class=\"overflow-x-auto\">\n                    <table class=\"min-w-full divide-y divide-gray-200\">\n                        <thead class=\"bg-gray-50\">\n                            <tr>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Product</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Price</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Stock</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Created</th>\n                                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody class=\"bg-white divide-y divide-gray-200\">\n                            <?php foreach ($products as $product): ?>\n                                <tr>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <div class=\"flex items-center\">\n                                            <img src=\"../<?php echo htmlspecialchars($product['image_url'] ?: 'placeholder.svg?height=50&width=50'); ?>\" \n                                                 alt=\"<?php echo htmlspecialchars($product['name']); ?>\" \n                                                 class=\"w-12 h-12 object-cover rounded-lg\">\n                                            <div class=\"ml-4\">\n                                                <div class=\"text-sm font-medium text-gray-900\">\n                                                    <?php echo htmlspecialchars($product['name']); ?>\n                                                </div>\n                                                <div class=\"text-sm text-gray-500\">\n                                                    SKU: <?php echo htmlspecialchars($product['sku'] ?: 'N/A'); ?>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                                        $<?php echo number_format($product['price'], 2); ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                                        <?php echo $product['stock_quantity']; ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap\">\n                                        <span class=\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \n                                            <?php echo $product['status'] === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'; ?>\">\n                                            <?php echo ucfirst($product['status']); ?>\n                                        </span>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                        <?php echo date('M j, Y', strtotime($product['created_at'])); ?>\n                                    </td>\n                                    <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2\">\n                                        <a href=\"../product-detail.php?id=<?php echo $product['id']; ?>\" \n                                           class=\"text-primary hover:text-orange-600\">View</a>\n                                        <form method=\"POST\" class=\"inline\">\n                                            <input type=\"hidden\" name=\"action\" value=\"update_status\">\n                                            <input type=\"hidden\" name=\"product_id\" value=\"<?php echo $product['id']; ?>\">\n                                            <input type=\"hidden\" name=\"status\" value=\"<?php echo $product['status'] === 'active' ? 'inactive' : 'active'; ?>\">\n                                            <button type=\"submit\" class=\"text-primary hover:text-orange-600\">\n                                                <?php echo $product['status'] === 'active' ? 'Deactivate' : 'Activate'; ?>\n                                            </button>\n                                        </form>\n                                    </td>\n                                </tr>\n                            <?php endforeach; ?>\n                        </tbody>\n                    </table>\n                </div>\n            <?php endif; ?>\n        </div>\n    </div>\n</body>\n</html>\n","size_bytes":9103},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"twilio>=9.8.0\",\n]\n","size_bytes":165},"send_email.php":{"content":"<?php\n// Email functionality for order confirmations\n// Simple email implementation - in production you'd use a proper email service\n\nfunction send_order_confirmation_email($user_email, $order_data) {\n    $subject = \"Order Confirmation - Market Nest - Order #\" . $order_data['order_number'];\n    \n    $message = \"\n    <html>\n    <head>\n        <title>Order Confirmation</title>\n        <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .header { background: #0f172a; color: white; padding: 20px; text-align: center; }\n            .content { background: #f9f9f9; padding: 20px; }\n            .footer { background: #e5e7eb; padding: 10px; text-align: center; font-size: 12px; }\n            .highlight { background: #10b981; color: white; padding: 10px; border-radius: 5px; }\n        </style>\n    </head>\n    <body>\n        <div class='container'>\n            <div class='header'>\n                <h1>Market Nest</h1>\n                <h2>Order Confirmation</h2>\n            </div>\n            <div class='content'>\n                <h3>Thank you for your order!</h3>\n                <p><strong>Order Number:</strong> \" . $order_data['order_number'] . \"</p>\n                <p><strong>Total Amount:</strong> \" . number_format($order_data['total_amount'], 2) . \" FCFA</p>\n                <p><strong>Payment Method:</strong> \" . ucwords(str_replace('_', ' ', $order_data['payment_method'])) . \"</p>\n                \n                \" . ($order_data['payment_method'] == 'mobile_money_cameroon' ? \n                \"<div class='highlight'>\n                    <h4>Mobile Money Payment Instructions</h4>\n                    <p>Please send <strong>\" . number_format($order_data['total_amount'], 2) . \" FCFA</strong> to <strong>679871130</strong></p>\n                    <p>Include your order number <strong>\" . $order_data['order_number'] . \"</strong> in the transaction message.</p>\n                </div>\" : \"\") . \"\n                \n                <p>We'll process your order and send you tracking information once it ships.</p>\n                <p>Thank you for choosing Market Nest!</p>\n            </div>\n            <div class='footer'>\n                <p>&copy; \" . date('Y') . \" Market Nest. All rights reserved.</p>\n            </div>\n        </div>\n    </body>\n    </html>\";\n    \n    $headers = \"MIME-Version: 1.0\" . \"\\r\\n\";\n    $headers .= \"Content-type:text/html;charset=UTF-8\" . \"\\r\\n\";\n    $headers .= \"From: noreply@marketnest.com\" . \"\\r\\n\";\n    \n    // For development, log the email instead of sending\n    error_log(\"Email to \" . $user_email . \" - Subject: \" . $subject);\n    error_log(\"Email content: \" . strip_tags($message));\n    \n    // In production, uncomment this line:\n    // mail($user_email, $subject, $message, $headers);\n    \n    return ['success' => true, 'message' => 'Email confirmation sent'];\n}\n\nfunction send_payment_confirmation_email($user_email, $payment_data) {\n    $subject = \"Payment Confirmed - Market Nest - Order #\" . $payment_data['order_number'];\n    \n    $message = \"\n    <html>\n    <head>\n        <title>Payment Confirmation</title>\n        <style>\n            body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n            .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n            .header { background: #10b981; color: white; padding: 20px; text-align: center; }\n            .content { background: #f9f9f9; padding: 20px; }\n        </style>\n    </head>\n    <body>\n        <div class='container'>\n            <div class='header'>\n                <h1>Payment Confirmed!</h1>\n            </div>\n            <div class='content'>\n                <h3>Your payment has been received!</h3>\n                <p><strong>Order Number:</strong> \" . $payment_data['order_number'] . \"</p>\n                <p><strong>Amount Received:</strong> \" . number_format($payment_data['amount'], 2) . \" FCFA</p>\n                <p>Your order is now being processed and will ship soon!</p>\n            </div>\n        </div>\n    </body>\n    </html>\";\n    \n    $headers = \"MIME-Version: 1.0\" . \"\\r\\n\";\n    $headers .= \"Content-type:text/html;charset=UTF-8\" . \"\\r\\n\";\n    $headers .= \"From: noreply@marketnest.com\" . \"\\r\\n\";\n    \n    // Log for development\n    error_log(\"Payment email to \" . $user_email . \" - Subject: \" . $subject);\n    \n    return ['success' => true, 'message' => 'Payment email sent'];\n}\n?>","size_bytes":4489},"send_sms.php":{"content":"<?php\n// SMS functionality using Twilio integration for order confirmations\n// Based on Twilio integration blueprint\n\nfunction send_order_confirmation_sms($phone_number, $order_data) {\n    // For now, we'll use a simple approach - in production you'd use the Python Twilio script\n    // This is a placeholder for mobile money and SMS integration\n    \n    $message = \"Market Nest Order Confirmation\\n\";\n    $message .= \"Order #\" . $order_data['order_number'] . \"\\n\";\n    $message .= \"Total: \" . number_format($order_data['total_amount'], 2) . \" FCFA\\n\";\n    $message .= \"Payment: Mobile Money\\n\";\n    $message .= \"Thank you for shopping with Market Nest!\";\n    \n    // Log SMS for now - in production this would call the Twilio service\n    error_log(\"SMS to \" . $phone_number . \": \" . $message);\n    \n    return ['success' => true, 'message' => 'SMS confirmation sent'];\n}\n\nfunction send_payment_confirmation_sms($phone_number, $payment_data) {\n    $message = \"Market Nest Payment Confirmation\\n\";\n    $message .= \"Payment received: \" . number_format($payment_data['amount'], 2) . \" FCFA\\n\";\n    $message .= \"Mobile Money: 679871130\\n\";\n    $message .= \"Your order will be processed shortly.\";\n    \n    // Log SMS for now\n    error_log(\"Payment SMS to \" . $phone_number . \": \" . $message);\n    \n    return ['success' => true, 'message' => 'Payment SMS sent'];\n}\n?>","size_bytes":1363}},"version":1}
>>>>>>> e09cec3c400d978e9676d615e1bfdf6215d2d111
